function tw(r,e){for(var n=0;n<e.length;n++){const s=e[n];if(typeof s!="string"&&!Array.isArray(s)){for(const o in s)if(o!=="default"&&!(o in r)){const u=Object.getOwnPropertyDescriptor(s,o);u&&Object.defineProperty(r,o,u.get?u:{enumerable:!0,get:()=>s[o]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function I0(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var mm={exports:{}},Ql={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rv;function nw(){if(Rv)return Ql;Rv=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,u){var f=null;if(u!==void 0&&(f=""+u),o.key!==void 0&&(f=""+o.key),"key"in o){u={};for(var p in o)p!=="key"&&(u[p]=o[p])}else u=o;return o=u.ref,{$$typeof:r,type:s,key:f,ref:o!==void 0?o:null,props:u}}return Ql.Fragment=e,Ql.jsx=n,Ql.jsxs=n,Ql}var xv;function iw(){return xv||(xv=1,mm.exports=nw()),mm.exports}var E=iw(),pm={exports:{}},De={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Iv;function rw(){if(Iv)return De;Iv=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),A=Symbol.iterator;function R(D){return D===null||typeof D!="object"?null:(D=A&&D[A]||D["@@iterator"],typeof D=="function"?D:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,$={};function L(D,F,ie){this.props=D,this.context=F,this.refs=$,this.updater=ie||N}L.prototype.isReactComponent={},L.prototype.setState=function(D,F){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,F,"setState")},L.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function se(){}se.prototype=L.prototype;function ae(D,F,ie){this.props=D,this.context=F,this.refs=$,this.updater=ie||N}var re=ae.prototype=new se;re.constructor=ae,B(re,L.prototype),re.isPureReactComponent=!0;var fe=Array.isArray,le={H:null,A:null,T:null,S:null,V:null},pe=Object.prototype.hasOwnProperty;function M(D,F,ie,ee,de,Re){return ie=Re.ref,{$$typeof:r,type:D,key:F,ref:ie!==void 0?ie:null,props:Re}}function x(D,F){return M(D.type,F,void 0,void 0,void 0,D.props)}function w(D){return typeof D=="object"&&D!==null&&D.$$typeof===r}function O(D){var F={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(ie){return F[ie]})}var V=/\/+/g;function k(D,F){return typeof D=="object"&&D!==null&&D.key!=null?O(""+D.key):F.toString(36)}function I(){}function Ae(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(I,I):(D.status="pending",D.then(function(F){D.status==="pending"&&(D.status="fulfilled",D.value=F)},function(F){D.status==="pending"&&(D.status="rejected",D.reason=F)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function Ee(D,F,ie,ee,de){var Re=typeof D;(Re==="undefined"||Re==="boolean")&&(D=null);var ue=!1;if(D===null)ue=!0;else switch(Re){case"bigint":case"string":case"number":ue=!0;break;case"object":switch(D.$$typeof){case r:case e:ue=!0;break;case T:return ue=D._init,Ee(ue(D._payload),F,ie,ee,de)}}if(ue)return de=de(D),ue=ee===""?"."+k(D,0):ee,fe(de)?(ie="",ue!=null&&(ie=ue.replace(V,"$&/")+"/"),Ee(de,F,ie,"",function(nt){return nt})):de!=null&&(w(de)&&(de=x(de,ie+(de.key==null||D&&D.key===de.key?"":(""+de.key).replace(V,"$&/")+"/")+ue)),F.push(de)),1;ue=0;var je=ee===""?".":ee+":";if(fe(D))for(var Ne=0;Ne<D.length;Ne++)ee=D[Ne],Re=je+k(ee,Ne),ue+=Ee(ee,F,ie,Re,de);else if(Ne=R(D),typeof Ne=="function")for(D=Ne.call(D),Ne=0;!(ee=D.next()).done;)ee=ee.value,Re=je+k(ee,Ne++),ue+=Ee(ee,F,ie,Re,de);else if(Re==="object"){if(typeof D.then=="function")return Ee(Ae(D),F,ie,ee,de);throw F=String(D),Error("Objects are not valid as a React child (found: "+(F==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":F)+"). If you meant to render a collection of children, use an array instead.")}return ue}function G(D,F,ie){if(D==null)return D;var ee=[],de=0;return Ee(D,ee,"","",function(Re){return F.call(ie,Re,de++)}),ee}function X(D){if(D._status===-1){var F=D._result;F=F(),F.then(function(ie){(D._status===0||D._status===-1)&&(D._status=1,D._result=ie)},function(ie){(D._status===0||D._status===-1)&&(D._status=2,D._result=ie)}),D._status===-1&&(D._status=0,D._result=F)}if(D._status===1)return D._result.default;throw D._result}var ce=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var F=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(F))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)};function xe(){}return De.Children={map:G,forEach:function(D,F,ie){G(D,function(){F.apply(this,arguments)},ie)},count:function(D){var F=0;return G(D,function(){F++}),F},toArray:function(D){return G(D,function(F){return F})||[]},only:function(D){if(!w(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},De.Component=L,De.Fragment=n,De.Profiler=o,De.PureComponent=ae,De.StrictMode=s,De.Suspense=m,De.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=le,De.__COMPILER_RUNTIME={__proto__:null,c:function(D){return le.H.useMemoCache(D)}},De.cache=function(D){return function(){return D.apply(null,arguments)}},De.cloneElement=function(D,F,ie){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var ee=B({},D.props),de=D.key,Re=void 0;if(F!=null)for(ue in F.ref!==void 0&&(Re=void 0),F.key!==void 0&&(de=""+F.key),F)!pe.call(F,ue)||ue==="key"||ue==="__self"||ue==="__source"||ue==="ref"&&F.ref===void 0||(ee[ue]=F[ue]);var ue=arguments.length-2;if(ue===1)ee.children=ie;else if(1<ue){for(var je=Array(ue),Ne=0;Ne<ue;Ne++)je[Ne]=arguments[Ne+2];ee.children=je}return M(D.type,de,void 0,void 0,Re,ee)},De.createContext=function(D){return D={$$typeof:f,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:u,_context:D},D},De.createElement=function(D,F,ie){var ee,de={},Re=null;if(F!=null)for(ee in F.key!==void 0&&(Re=""+F.key),F)pe.call(F,ee)&&ee!=="key"&&ee!=="__self"&&ee!=="__source"&&(de[ee]=F[ee]);var ue=arguments.length-2;if(ue===1)de.children=ie;else if(1<ue){for(var je=Array(ue),Ne=0;Ne<ue;Ne++)je[Ne]=arguments[Ne+2];de.children=je}if(D&&D.defaultProps)for(ee in ue=D.defaultProps,ue)de[ee]===void 0&&(de[ee]=ue[ee]);return M(D,Re,void 0,void 0,null,de)},De.createRef=function(){return{current:null}},De.forwardRef=function(D){return{$$typeof:p,render:D}},De.isValidElement=w,De.lazy=function(D){return{$$typeof:T,_payload:{_status:-1,_result:D},_init:X}},De.memo=function(D,F){return{$$typeof:y,type:D,compare:F===void 0?null:F}},De.startTransition=function(D){var F=le.T,ie={};le.T=ie;try{var ee=D(),de=le.S;de!==null&&de(ie,ee),typeof ee=="object"&&ee!==null&&typeof ee.then=="function"&&ee.then(xe,ce)}catch(Re){ce(Re)}finally{le.T=F}},De.unstable_useCacheRefresh=function(){return le.H.useCacheRefresh()},De.use=function(D){return le.H.use(D)},De.useActionState=function(D,F,ie){return le.H.useActionState(D,F,ie)},De.useCallback=function(D,F){return le.H.useCallback(D,F)},De.useContext=function(D){return le.H.useContext(D)},De.useDebugValue=function(){},De.useDeferredValue=function(D,F){return le.H.useDeferredValue(D,F)},De.useEffect=function(D,F,ie){var ee=le.H;if(typeof ie=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ee.useEffect(D,F)},De.useId=function(){return le.H.useId()},De.useImperativeHandle=function(D,F,ie){return le.H.useImperativeHandle(D,F,ie)},De.useInsertionEffect=function(D,F){return le.H.useInsertionEffect(D,F)},De.useLayoutEffect=function(D,F){return le.H.useLayoutEffect(D,F)},De.useMemo=function(D,F){return le.H.useMemo(D,F)},De.useOptimistic=function(D,F){return le.H.useOptimistic(D,F)},De.useReducer=function(D,F,ie){return le.H.useReducer(D,F,ie)},De.useRef=function(D){return le.H.useRef(D)},De.useState=function(D){return le.H.useState(D)},De.useSyncExternalStore=function(D,F,ie){return le.H.useSyncExternalStore(D,F,ie)},De.useTransition=function(){return le.H.useTransition()},De.version="19.1.1",De}var Cv;function dp(){return Cv||(Cv=1,pm.exports=rw()),pm.exports}var U=dp();const C0=I0(U),sw=tw({__proto__:null,default:C0},[U]);var gm={exports:{}},Yl={},ym={exports:{}},_m={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nv;function aw(){return Nv||(Nv=1,(function(r){function e(G,X){var ce=G.length;G.push(X);e:for(;0<ce;){var xe=ce-1>>>1,D=G[xe];if(0<o(D,X))G[xe]=X,G[ce]=D,ce=xe;else break e}}function n(G){return G.length===0?null:G[0]}function s(G){if(G.length===0)return null;var X=G[0],ce=G.pop();if(ce!==X){G[0]=ce;e:for(var xe=0,D=G.length,F=D>>>1;xe<F;){var ie=2*(xe+1)-1,ee=G[ie],de=ie+1,Re=G[de];if(0>o(ee,ce))de<D&&0>o(Re,ee)?(G[xe]=Re,G[de]=ce,xe=de):(G[xe]=ee,G[ie]=ce,xe=ie);else if(de<D&&0>o(Re,ce))G[xe]=Re,G[de]=ce,xe=de;else break e}}return X}function o(G,X){var ce=G.sortIndex-X.sortIndex;return ce!==0?ce:G.id-X.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var f=Date,p=f.now();r.unstable_now=function(){return f.now()-p}}var m=[],y=[],T=1,A=null,R=3,N=!1,B=!1,$=!1,L=!1,se=typeof setTimeout=="function"?setTimeout:null,ae=typeof clearTimeout=="function"?clearTimeout:null,re=typeof setImmediate<"u"?setImmediate:null;function fe(G){for(var X=n(y);X!==null;){if(X.callback===null)s(y);else if(X.startTime<=G)s(y),X.sortIndex=X.expirationTime,e(m,X);else break;X=n(y)}}function le(G){if($=!1,fe(G),!B)if(n(m)!==null)B=!0,pe||(pe=!0,k());else{var X=n(y);X!==null&&Ee(le,X.startTime-G)}}var pe=!1,M=-1,x=5,w=-1;function O(){return L?!0:!(r.unstable_now()-w<x)}function V(){if(L=!1,pe){var G=r.unstable_now();w=G;var X=!0;try{e:{B=!1,$&&($=!1,ae(M),M=-1),N=!0;var ce=R;try{t:{for(fe(G),A=n(m);A!==null&&!(A.expirationTime>G&&O());){var xe=A.callback;if(typeof xe=="function"){A.callback=null,R=A.priorityLevel;var D=xe(A.expirationTime<=G);if(G=r.unstable_now(),typeof D=="function"){A.callback=D,fe(G),X=!0;break t}A===n(m)&&s(m),fe(G)}else s(m);A=n(m)}if(A!==null)X=!0;else{var F=n(y);F!==null&&Ee(le,F.startTime-G),X=!1}}break e}finally{A=null,R=ce,N=!1}X=void 0}}finally{X?k():pe=!1}}}var k;if(typeof re=="function")k=function(){re(V)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,Ae=I.port2;I.port1.onmessage=V,k=function(){Ae.postMessage(null)}}else k=function(){se(V,0)};function Ee(G,X){M=se(function(){G(r.unstable_now())},X)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(G){G.callback=null},r.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<G?Math.floor(1e3/G):5},r.unstable_getCurrentPriorityLevel=function(){return R},r.unstable_next=function(G){switch(R){case 1:case 2:case 3:var X=3;break;default:X=R}var ce=R;R=X;try{return G()}finally{R=ce}},r.unstable_requestPaint=function(){L=!0},r.unstable_runWithPriority=function(G,X){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var ce=R;R=G;try{return X()}finally{R=ce}},r.unstable_scheduleCallback=function(G,X,ce){var xe=r.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?xe+ce:xe):ce=xe,G){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=ce+D,G={id:T++,callback:X,priorityLevel:G,startTime:ce,expirationTime:D,sortIndex:-1},ce>xe?(G.sortIndex=ce,e(y,G),n(m)===null&&G===n(y)&&($?(ae(M),M=-1):$=!0,Ee(le,ce-xe))):(G.sortIndex=D,e(m,G),B||N||(B=!0,pe||(pe=!0,k()))),G},r.unstable_shouldYield=O,r.unstable_wrapCallback=function(G){var X=R;return function(){var ce=R;R=X;try{return G.apply(this,arguments)}finally{R=ce}}}})(_m)),_m}var Dv;function ow(){return Dv||(Dv=1,ym.exports=aw()),ym.exports}var vm={exports:{}},Zt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ov;function lw(){if(Ov)return Zt;Ov=1;var r=dp();function e(m){var y="https://react.dev/errors/"+m;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)y+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+m+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(m,y,T){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:A==null?null:""+A,children:m,containerInfo:y,implementation:T}}var f=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(m,y){if(m==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Zt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Zt.createPortal=function(m,y){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return u(m,y,null,T)},Zt.flushSync=function(m){var y=f.T,T=s.p;try{if(f.T=null,s.p=2,m)return m()}finally{f.T=y,s.p=T,s.d.f()}},Zt.preconnect=function(m,y){typeof m=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,s.d.C(m,y))},Zt.prefetchDNS=function(m){typeof m=="string"&&s.d.D(m)},Zt.preinit=function(m,y){if(typeof m=="string"&&y&&typeof y.as=="string"){var T=y.as,A=p(T,y.crossOrigin),R=typeof y.integrity=="string"?y.integrity:void 0,N=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;T==="style"?s.d.S(m,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:A,integrity:R,fetchPriority:N}):T==="script"&&s.d.X(m,{crossOrigin:A,integrity:R,fetchPriority:N,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Zt.preinitModule=function(m,y){if(typeof m=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var T=p(y.as,y.crossOrigin);s.d.M(m,{crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&s.d.M(m)},Zt.preload=function(m,y){if(typeof m=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var T=y.as,A=p(T,y.crossOrigin);s.d.L(m,T,{crossOrigin:A,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Zt.preloadModule=function(m,y){if(typeof m=="string")if(y){var T=p(y.as,y.crossOrigin);s.d.m(m,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else s.d.m(m)},Zt.requestFormReset=function(m){s.d.r(m)},Zt.unstable_batchedUpdates=function(m,y){return m(y)},Zt.useFormState=function(m,y,T){return f.H.useFormState(m,y,T)},Zt.useFormStatus=function(){return f.H.useHostTransitionStatus()},Zt.version="19.1.1",Zt}var Mv;function N0(){if(Mv)return vm.exports;Mv=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),vm.exports=lw(),vm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vv;function uw(){if(Vv)return Yl;Vv=1;var r=ow(),e=dp(),n=N0();function s(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function f(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function p(t){if(u(t)!==t)throw Error(s(188))}function m(t){var i=t.alternate;if(!i){if(i=u(t),i===null)throw Error(s(188));return i!==t?null:t}for(var a=t,l=i;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return p(h),t;if(d===l)return p(h),i;d=d.sibling}throw Error(s(188))}if(a.return!==l.return)a=h,l=d;else{for(var v=!1,S=h.child;S;){if(S===a){v=!0,a=h,l=d;break}if(S===l){v=!0,l=h,a=d;break}S=S.sibling}if(!v){for(S=d.child;S;){if(S===a){v=!0,a=d,l=h;break}if(S===l){v=!0,l=d,a=h;break}S=S.sibling}if(!v)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:i}function y(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=y(t),i!==null)return i;t=t.sibling}return null}var T=Object.assign,A=Symbol.for("react.element"),R=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),$=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),se=Symbol.for("react.provider"),ae=Symbol.for("react.consumer"),re=Symbol.for("react.context"),fe=Symbol.for("react.forward_ref"),le=Symbol.for("react.suspense"),pe=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function k(t){return t===null||typeof t!="object"?null:(t=V&&t[V]||t["@@iterator"],typeof t=="function"?t:null)}var I=Symbol.for("react.client.reference");function Ae(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===I?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case B:return"Fragment";case L:return"Profiler";case $:return"StrictMode";case le:return"Suspense";case pe:return"SuspenseList";case w:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case N:return"Portal";case re:return(t.displayName||"Context")+".Provider";case ae:return(t._context.displayName||"Context")+".Consumer";case fe:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case M:return i=t.displayName||null,i!==null?i:Ae(t.type)||"Memo";case x:i=t._payload,t=t._init;try{return Ae(t(i))}catch{}}return null}var Ee=Array.isArray,G=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce={pending:!1,data:null,method:null,action:null},xe=[],D=-1;function F(t){return{current:t}}function ie(t){0>D||(t.current=xe[D],xe[D]=null,D--)}function ee(t,i){D++,xe[D]=t.current,t.current=i}var de=F(null),Re=F(null),ue=F(null),je=F(null);function Ne(t,i){switch(ee(ue,i),ee(Re,t),ee(de,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?ev(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=ev(i),t=tv(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}ie(de),ee(de,t)}function nt(){ie(de),ie(Re),ie(ue)}function St(t){t.memoizedState!==null&&ee(je,t);var i=de.current,a=tv(i,t.type);i!==a&&(ee(Re,t),ee(de,a))}function gn(t){Re.current===t&&(ie(de),ie(Re)),je.current===t&&(ie(je),Bl._currentValue=ce)}var ys=Object.prototype.hasOwnProperty,_s=r.unstable_scheduleCallback,vs=r.unstable_cancelCallback,Uo=r.unstable_shouldYield,Vu=r.unstable_requestPaint,In=r.unstable_now,mf=r.unstable_getCurrentPriorityLevel,jo=r.unstable_ImmediatePriority,_a=r.unstable_UserBlockingPriority,Es=r.unstable_NormalPriority,pf=r.unstable_LowPriority,va=r.unstable_IdlePriority,zo=r.log,Pu=r.unstable_setDisableYieldValue,ft=null,$e=null;function yn(t){if(typeof zo=="function"&&Pu(t),$e&&typeof $e.setStrictMode=="function")try{$e.setStrictMode(ft,t)}catch{}}var Wt=Math.clz32?Math.clz32:Ts,ku=Math.log,gf=Math.LN2;function Ts(t){return t>>>=0,t===0?32:31-(ku(t)/gf|0)|0}var Ss=256,As=4194304;function Wn(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Ea(t,i,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,d=t.suspendedLanes,v=t.pingedLanes;t=t.warmLanes;var S=l&134217727;return S!==0?(l=S&~d,l!==0?h=Wn(l):(v&=S,v!==0?h=Wn(v):a||(a=S&~t,a!==0&&(h=Wn(a))))):(S=l&~d,S!==0?h=Wn(S):v!==0?h=Wn(v):a||(a=l&~t,a!==0&&(h=Wn(a)))),h===0?0:i!==0&&i!==h&&(i&d)===0&&(d=h&-h,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:h}function bs(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function Bo(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qo(){var t=Ss;return Ss<<=1,(Ss&4194048)===0&&(Ss=256),t}function Ho(){var t=As;return As<<=1,(As&62914560)===0&&(As=4194304),t}function zi(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function Bi(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Fo(t,i,a,l,h,d){var v=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var S=t.entanglements,C=t.expirationTimes,H=t.hiddenUpdates;for(a=v&~a;0<a;){var W=31-Wt(a),te=1<<W;S[W]=0,C[W]=-1;var Q=H[W];if(Q!==null)for(H[W]=null,W=0;W<Q.length;W++){var Y=Q[W];Y!==null&&(Y.lane&=-536870913)}a&=~te}l!==0&&hi(t,l,0),d!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=d&~(v&~i))}function hi(t,i,a){t.pendingLanes|=i,t.suspendedLanes&=~i;var l=31-Wt(i);t.entangledLanes|=i,t.entanglements[l]=t.entanglements[l]|1073741824|a&4194090}function Go(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var l=31-Wt(a),h=1<<l;h&i|t[l]&i&&(t[l]|=i),a&=~h}}function vr(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Ta(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Er(){var t=X.p;return t!==0?t:(t=window.event,t===void 0?32:Ev(t.type))}function Lu(t,i){var a=X.p;try{return X.p=t,i()}finally{X.p=a}}var lt=Math.random().toString(36).slice(2),Dt="__reactFiber$"+lt,At="__reactProps$"+lt,Cn="__reactContainer$"+lt,Qo="__reactEvents$"+lt,yf="__reactListeners$"+lt,Tr="__reactHandles$"+lt,Uu="__reactResources$"+lt,ws="__reactMarker$"+lt;function Sr(t){delete t[Dt],delete t[At],delete t[Qo],delete t[yf],delete t[Tr]}function qi(t){var i=t[Dt];if(i)return i;for(var a=t.parentNode;a;){if(i=a[Cn]||a[Dt]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=sv(t);t!==null;){if(a=t[Dt])return a;t=sv(t)}return i}t=a,a=t.parentNode}return null}function fi(t){if(t=t[Dt]||t[Cn]){var i=t.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return t}return null}function di(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(s(33))}function on(t){var i=t[Uu];return i||(i=t[Uu]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function pt(t){t[ws]=!0}var Yo=new Set,Sa={};function Jn(t,i){Hi(t,i),Hi(t+"Capture",i)}function Hi(t,i){for(Sa[t]=i,t=0;t<i.length;t++)Yo.add(i[t])}var ju=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),zu={},Rs={};function Bu(t){return ys.call(Rs,t)?!0:ys.call(zu,t)?!1:ju.test(t)?Rs[t]=!0:(zu[t]=!0,!1)}function Ar(t,i,a){if(Bu(i))if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+a)}}function mi(t,i,a){if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+a)}}function Ht(t,i,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(i,a,""+l)}}var xs,qu;function Fi(t){if(xs===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);xs=i&&i[1]||"",qu=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+xs+t+qu}var Aa=!1;function ba(t,i){if(!t||Aa)return"";Aa=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var te=function(){throw Error()};if(Object.defineProperty(te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(te,[])}catch(Y){var Q=Y}Reflect.construct(t,[],te)}else{try{te.call()}catch(Y){Q=Y}t.call(te.prototype)}}else{try{throw Error()}catch(Y){Q=Y}(te=t())&&typeof te.catch=="function"&&te.catch(function(){})}}catch(Y){if(Y&&Q&&typeof Y.stack=="string")return[Y.stack,Q.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),v=d[0],S=d[1];if(v&&S){var C=v.split(`
`),H=S.split(`
`);for(h=l=0;l<C.length&&!C[l].includes("DetermineComponentFrameRoot");)l++;for(;h<H.length&&!H[h].includes("DetermineComponentFrameRoot");)h++;if(l===C.length||h===H.length)for(l=C.length-1,h=H.length-1;1<=l&&0<=h&&C[l]!==H[h];)h--;for(;1<=l&&0<=h;l--,h--)if(C[l]!==H[h]){if(l!==1||h!==1)do if(l--,h--,0>h||C[l]!==H[h]){var W=`
`+C[l].replace(" at new "," at ");return t.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",t.displayName)),W}while(1<=l&&0<=h);break}}}finally{Aa=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Fi(a):""}function Ko(t){switch(t.tag){case 26:case 27:case 5:return Fi(t.type);case 16:return Fi("Lazy");case 13:return Fi("Suspense");case 19:return Fi("SuspenseList");case 0:case 15:return ba(t.type,!1);case 11:return ba(t.type.render,!1);case 1:return ba(t.type,!0);case 31:return Fi("Activity");default:return""}}function wa(t){try{var i="";do i+=Ko(t),t=t.return;while(t);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function ln(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function $o(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function _f(t){var i=$o(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,i),l=""+t[i];if(!t.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,d=a.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return h.call(this)},set:function(v){l=""+v,d.call(this,v)}}),Object.defineProperty(t,i,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(v){l=""+v},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function Ra(t){t._valueTracker||(t._valueTracker=_f(t))}function Xo(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return t&&(l=$o(t)?t.checked?"true":"false":t.value),t=l,t!==a?(i.setValue(t),!0):!1}function Is(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var vf=/[\n"\\]/g;function bt(t){return t.replace(vf,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function _n(t,i,a,l,h,d,v,S){t.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?t.type=v:t.removeAttribute("type"),i!=null?v==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+ln(i)):t.value!==""+ln(i)&&(t.value=""+ln(i)):v!=="submit"&&v!=="reset"||t.removeAttribute("value"),i!=null?br(t,v,ln(i)):a!=null?br(t,v,ln(a)):l!=null&&t.removeAttribute("value"),h==null&&d!=null&&(t.defaultChecked=!!d),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?t.name=""+ln(S):t.removeAttribute("name")}function Cs(t,i,a,l,h,d,v,S){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null))return;a=a!=null?""+ln(a):"",i=i!=null?""+ln(i):a,S||i===t.value||(t.value=i),t.defaultValue=i}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=S?t.checked:!!l,t.defaultChecked=!!l,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(t.name=v)}function br(t,i,a){i==="number"&&Is(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Gi(t,i,a,l){if(t=t.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=i.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+ln(a),i=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}i!==null||t[h].disabled||(i=t[h])}i!==null&&(i.selected=!0)}}function Je(t,i,a){if(i!=null&&(i=""+ln(i),i!==t.value&&(t.value=i),a==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=a!=null?""+ln(a):""}function Ns(t,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(s(92));if(Ee(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=ln(i),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l)}function Nn(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var Ds=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Hu(t,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":l?t.setProperty(i,a):typeof a!="number"||a===0||Ds.has(i)?i==="float"?t.cssFloat=a:t[i]=(""+a).trim():t[i]=a+"px"}function Wo(t,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in i)l=i[h],i.hasOwnProperty(h)&&a[h]!==l&&Hu(t,h,l)}else for(var d in i)i.hasOwnProperty(d)&&Hu(t,d,i[d])}function Jo(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ef=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Tf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function xa(t){return Tf.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var Qi=null;function Dn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Yi=null,Ki=null;function Zo(t){var i=fi(t);if(i&&(t=i.stateNode)){var a=t[At]||null;e:switch(t=i.stateNode,i.type){case"input":if(_n(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+bt(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==t&&l.form===t.form){var h=l[At]||null;if(!h)throw Error(s(90));_n(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===t.form&&Xo(l)}break e;case"textarea":Je(t,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&Gi(t,!!a.multiple,i,!1)}}}var pi=!1;function Fu(t,i,a){if(pi)return t(i,a);pi=!0;try{var l=t(i);return l}finally{if(pi=!1,(Yi!==null||Ki!==null)&&(Lc(),Yi&&(i=Yi,t=Ki,Ki=Yi=null,Zo(i),t)))for(i=0;i<t.length;i++)Zo(t[i])}}function Os(t,i){var a=t.stateNode;if(a===null)return null;var l=a[At]||null;if(l===null)return null;a=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var Zn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),On=!1;if(Zn)try{var Ms={};Object.defineProperty(Ms,"passive",{get:function(){On=!0}}),window.addEventListener("test",Ms,Ms),window.removeEventListener("test",Ms,Ms)}catch{On=!1}var gi=null,wr=null,$i=null;function el(){if($i)return $i;var t,i=wr,a=i.length,l,h="value"in gi?gi.value:gi.textContent,d=h.length;for(t=0;t<a&&i[t]===h[t];t++);var v=a-t;for(l=1;l<=v&&i[a-l]===h[d-l];l++);return $i=h.slice(t,1<l?1-l:void 0)}function yi(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function _i(){return!0}function tl(){return!1}function Lt(t){function i(a,l,h,d,v){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=d,this.target=v,this.currentTarget=null;for(var S in t)t.hasOwnProperty(S)&&(a=t[S],this[S]=a?a(d):d[S]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?_i:tl,this.isPropagationStopped=tl,this}return T(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=_i)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=_i)},persist:function(){},isPersistent:_i}),i}var Ye={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ia=Lt(Ye),Vs=T({},Ye,{view:0,detail:0}),Gu=Lt(Vs),Ca,Na,vi,Ps=T({},Vs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Us,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==vi&&(vi&&t.type==="mousemove"?(Ca=t.screenX-vi.screenX,Na=t.screenY-vi.screenY):Na=Ca=0,vi=t),Ca)},movementY:function(t){return"movementY"in t?t.movementY:Na}}),Mn=Lt(Ps),Qu=T({},Ps,{dataTransfer:0}),Sf=Lt(Qu),ks=T({},Vs,{relatedTarget:0}),Da=Lt(ks),nl=T({},Ye,{animationName:0,elapsedTime:0,pseudoElement:0}),Oa=Lt(nl),Yu=T({},Ye,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ma=Lt(Yu),Af=T({},Ye,{data:0}),il=Lt(Af),Ls={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ku={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$u={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rl(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=$u[t])?!!i[t]:!1}function Us(){return rl}var Xu=T({},Vs,{key:function(t){if(t.key){var i=Ls[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=yi(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ku[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Us,charCode:function(t){return t.type==="keypress"?yi(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?yi(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Va=Lt(Xu),Wu=T({},Ps,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sl=Lt(Wu),Xi=T({},Vs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Us}),Ju=Lt(Xi),Zu=T({},Ye,{propertyName:0,elapsedTime:0,pseudoElement:0}),ec=Lt(Zu),tc=T({},Ps,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Pa=Lt(tc),un=T({},Ye,{newState:0,oldState:0}),nc=Lt(un),ic=[9,13,27,32],Ei=Zn&&"CompositionEvent"in window,c=null;Zn&&"documentMode"in document&&(c=document.documentMode);var g=Zn&&"TextEvent"in window&&!c,_=Zn&&(!Ei||c&&8<c&&11>=c),b=" ",z=!1;function K(t,i){switch(t){case"keyup":return ic.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function oe(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ze=!1;function Ot(t,i){switch(t){case"compositionend":return oe(i);case"keypress":return i.which!==32?null:(z=!0,b);case"textInput":return t=i.data,t===b&&z?null:t;default:return null}}function Be(t,i){if(ze)return t==="compositionend"||!Ei&&K(t,i)?(t=el(),$i=wr=gi=null,ze=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return _&&i.locale!=="ko"?null:i.data;default:return null}}var Ut={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mt(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!Ut[t.type]:i==="textarea"}function Wi(t,i,a,l){Yi?Ki?Ki.push(l):Ki=[l]:Yi=l,i=Hc(i,"onChange"),0<i.length&&(a=new Ia("onChange","change",null,a,l),t.push({event:a,listeners:i}))}var Ft=null,Ti=null;function al(t){$_(t,0)}function rc(t){var i=di(t);if(Xo(i))return t}function gg(t,i){if(t==="change")return i}var yg=!1;if(Zn){var bf;if(Zn){var wf="oninput"in document;if(!wf){var _g=document.createElement("div");_g.setAttribute("oninput","return;"),wf=typeof _g.oninput=="function"}bf=wf}else bf=!1;yg=bf&&(!document.documentMode||9<document.documentMode)}function vg(){Ft&&(Ft.detachEvent("onpropertychange",Eg),Ti=Ft=null)}function Eg(t){if(t.propertyName==="value"&&rc(Ti)){var i=[];Wi(i,Ti,t,Dn(t)),Fu(al,i)}}function DA(t,i,a){t==="focusin"?(vg(),Ft=i,Ti=a,Ft.attachEvent("onpropertychange",Eg)):t==="focusout"&&vg()}function OA(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return rc(Ti)}function MA(t,i){if(t==="click")return rc(i)}function VA(t,i){if(t==="input"||t==="change")return rc(i)}function PA(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var vn=typeof Object.is=="function"?Object.is:PA;function ol(t,i){if(vn(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!ys.call(i,h)||!vn(t[h],i[h]))return!1}return!0}function Tg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Sg(t,i){var a=Tg(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=i&&l>=i)return{node:a,offset:i-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Tg(a)}}function Ag(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?Ag(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function bg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=Is(t.document);i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=Is(t.document)}return i}function Rf(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var kA=Zn&&"documentMode"in document&&11>=document.documentMode,ka=null,xf=null,ll=null,If=!1;function wg(t,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;If||ka==null||ka!==Is(l)||(l=ka,"selectionStart"in l&&Rf(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),ll&&ol(ll,l)||(ll=l,l=Hc(xf,"onSelect"),0<l.length&&(i=new Ia("onSelect","select",null,i,a),t.push({event:i,listeners:l}),i.target=ka)))}function js(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var La={animationend:js("Animation","AnimationEnd"),animationiteration:js("Animation","AnimationIteration"),animationstart:js("Animation","AnimationStart"),transitionrun:js("Transition","TransitionRun"),transitionstart:js("Transition","TransitionStart"),transitioncancel:js("Transition","TransitionCancel"),transitionend:js("Transition","TransitionEnd")},Cf={},Rg={};Zn&&(Rg=document.createElement("div").style,"AnimationEvent"in window||(delete La.animationend.animation,delete La.animationiteration.animation,delete La.animationstart.animation),"TransitionEvent"in window||delete La.transitionend.transition);function zs(t){if(Cf[t])return Cf[t];if(!La[t])return t;var i=La[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in Rg)return Cf[t]=i[a];return t}var xg=zs("animationend"),Ig=zs("animationiteration"),Cg=zs("animationstart"),LA=zs("transitionrun"),UA=zs("transitionstart"),jA=zs("transitioncancel"),Ng=zs("transitionend"),Dg=new Map,Nf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Nf.push("scrollEnd");function ei(t,i){Dg.set(t,i),Jn(i,[t])}var Og=new WeakMap;function Vn(t,i){if(typeof t=="object"&&t!==null){var a=Og.get(t);return a!==void 0?a:(i={value:t,source:i,stack:wa(i)},Og.set(t,i),i)}return{value:t,source:i,stack:wa(i)}}var Pn=[],Ua=0,Df=0;function sc(){for(var t=Ua,i=Df=Ua=0;i<t;){var a=Pn[i];Pn[i++]=null;var l=Pn[i];Pn[i++]=null;var h=Pn[i];Pn[i++]=null;var d=Pn[i];if(Pn[i++]=null,l!==null&&h!==null){var v=l.pending;v===null?h.next=h:(h.next=v.next,v.next=h),l.pending=h}d!==0&&Mg(a,h,d)}}function ac(t,i,a,l){Pn[Ua++]=t,Pn[Ua++]=i,Pn[Ua++]=a,Pn[Ua++]=l,Df|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Of(t,i,a,l){return ac(t,i,a,l),oc(t)}function ja(t,i){return ac(t,null,null,i),oc(t)}function Mg(t,i,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,d=t.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(h=!0)),t=d,d=d.return;return t.tag===3?(d=t.stateNode,h&&i!==null&&(h=31-Wt(a),t=d.hiddenUpdates,l=t[h],l===null?t[h]=[i]:l.push(i),i.lane=a|536870912),d):null}function oc(t){if(50<Ml)throw Ml=0,Ud=null,Error(s(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var za={};function zA(t,i,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function En(t,i,a,l){return new zA(t,i,a,l)}function Mf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ji(t,i){var a=t.alternate;return a===null?(a=En(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Vg(t,i){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,i=a.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function lc(t,i,a,l,h,d){var v=0;if(l=t,typeof t=="function")Mf(t)&&(v=1);else if(typeof t=="string")v=qb(t,a,de.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case w:return t=En(31,a,i,h),t.elementType=w,t.lanes=d,t;case B:return Bs(a.children,h,d,i);case $:v=8,h|=24;break;case L:return t=En(12,a,i,h|2),t.elementType=L,t.lanes=d,t;case le:return t=En(13,a,i,h),t.elementType=le,t.lanes=d,t;case pe:return t=En(19,a,i,h),t.elementType=pe,t.lanes=d,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case se:case re:v=10;break e;case ae:v=9;break e;case fe:v=11;break e;case M:v=14;break e;case x:v=16,l=null;break e}v=29,a=Error(s(130,t===null?"null":typeof t,"")),l=null}return i=En(v,a,i,h),i.elementType=t,i.type=l,i.lanes=d,i}function Bs(t,i,a,l){return t=En(7,t,l,i),t.lanes=a,t}function Vf(t,i,a){return t=En(6,t,null,i),t.lanes=a,t}function Pf(t,i,a){return i=En(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var Ba=[],qa=0,uc=null,cc=0,kn=[],Ln=0,qs=null,Zi=1,er="";function Hs(t,i){Ba[qa++]=cc,Ba[qa++]=uc,uc=t,cc=i}function Pg(t,i,a){kn[Ln++]=Zi,kn[Ln++]=er,kn[Ln++]=qs,qs=t;var l=Zi;t=er;var h=32-Wt(l)-1;l&=~(1<<h),a+=1;var d=32-Wt(i)+h;if(30<d){var v=h-h%5;d=(l&(1<<v)-1).toString(32),l>>=v,h-=v,Zi=1<<32-Wt(i)+h|a<<h|l,er=d+t}else Zi=1<<d|a<<h|l,er=t}function kf(t){t.return!==null&&(Hs(t,1),Pg(t,1,0))}function Lf(t){for(;t===uc;)uc=Ba[--qa],Ba[qa]=null,cc=Ba[--qa],Ba[qa]=null;for(;t===qs;)qs=kn[--Ln],kn[Ln]=null,er=kn[--Ln],kn[Ln]=null,Zi=kn[--Ln],kn[Ln]=null}var cn=null,dt=null,Qe=!1,Fs=null,Si=!1,Uf=Error(s(519));function Gs(t){var i=Error(s(418,""));throw hl(Vn(i,t)),Uf}function kg(t){var i=t.stateNode,a=t.type,l=t.memoizedProps;switch(i[Dt]=t,i[At]=l,a){case"dialog":Pe("cancel",i),Pe("close",i);break;case"iframe":case"object":case"embed":Pe("load",i);break;case"video":case"audio":for(a=0;a<Pl.length;a++)Pe(Pl[a],i);break;case"source":Pe("error",i);break;case"img":case"image":case"link":Pe("error",i),Pe("load",i);break;case"details":Pe("toggle",i);break;case"input":Pe("invalid",i),Cs(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),Ra(i);break;case"select":Pe("invalid",i);break;case"textarea":Pe("invalid",i),Ns(i,l.value,l.defaultValue,l.children),Ra(i)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||Z_(i.textContent,a)?(l.popover!=null&&(Pe("beforetoggle",i),Pe("toggle",i)),l.onScroll!=null&&Pe("scroll",i),l.onScrollEnd!=null&&Pe("scrollend",i),l.onClick!=null&&(i.onclick=Fc),i=!0):i=!1,i||Gs(t)}function Lg(t){for(cn=t.return;cn;)switch(cn.tag){case 5:case 13:Si=!1;return;case 27:case 3:Si=!0;return;default:cn=cn.return}}function ul(t){if(t!==cn)return!1;if(!Qe)return Lg(t),Qe=!0,!1;var i=t.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||em(t.type,t.memoizedProps)),a=!a),a&&dt&&Gs(t),Lg(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));e:{for(t=t.nextSibling,i=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(i===0){dt=ni(t.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;t=t.nextSibling}dt=null}}else i===27?(i=dt,Br(t.type)?(t=rm,rm=null,dt=t):dt=i):dt=cn?ni(t.stateNode.nextSibling):null;return!0}function cl(){dt=cn=null,Qe=!1}function Ug(){var t=Fs;return t!==null&&(dn===null?dn=t:dn.push.apply(dn,t),Fs=null),t}function hl(t){Fs===null?Fs=[t]:Fs.push(t)}var jf=F(null),Qs=null,tr=null;function Rr(t,i,a){ee(jf,i._currentValue),i._currentValue=a}function nr(t){t._currentValue=jf.current,ie(jf)}function zf(t,i,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),t===a)break;t=t.return}}function Bf(t,i,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var d=h.dependencies;if(d!==null){var v=h.child;d=d.firstContext;e:for(;d!==null;){var S=d;d=h;for(var C=0;C<i.length;C++)if(S.context===i[C]){d.lanes|=a,S=d.alternate,S!==null&&(S.lanes|=a),zf(d.return,a,t),l||(v=null);break e}d=S.next}}else if(h.tag===18){if(v=h.return,v===null)throw Error(s(341));v.lanes|=a,d=v.alternate,d!==null&&(d.lanes|=a),zf(v,a,t),v=null}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===t){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}}function fl(t,i,a,l){t=null;for(var h=i,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var v=h.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var S=h.type;vn(h.pendingProps.value,v.value)||(t!==null?t.push(S):t=[S])}}else if(h===je.current){if(v=h.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(Bl):t=[Bl])}h=h.return}t!==null&&Bf(i,t,a,l),i.flags|=262144}function hc(t){for(t=t.firstContext;t!==null;){if(!vn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Ys(t){Qs=t,tr=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Jt(t){return jg(Qs,t)}function fc(t,i){return Qs===null&&Ys(t),jg(t,i)}function jg(t,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},tr===null){if(t===null)throw Error(s(308));tr=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else tr=tr.next=i;return a}var BA=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){i.aborted=!0,t.forEach(function(a){return a()})}},qA=r.unstable_scheduleCallback,HA=r.unstable_NormalPriority,Vt={$$typeof:re,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function qf(){return{controller:new BA,data:new Map,refCount:0}}function dl(t){t.refCount--,t.refCount===0&&qA(HA,function(){t.controller.abort()})}var ml=null,Hf=0,Ha=0,Fa=null;function FA(t,i){if(ml===null){var a=ml=[];Hf=0,Ha=Gd(),Fa={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Hf++,i.then(zg,zg),i}function zg(){if(--Hf===0&&ml!==null){Fa!==null&&(Fa.status="fulfilled");var t=ml;ml=null,Ha=0,Fa=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function GA(t,i){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var Bg=G.S;G.S=function(t,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&FA(t,i),Bg!==null&&Bg(t,i)};var Ks=F(null);function Ff(){var t=Ks.current;return t!==null?t:st.pooledCache}function dc(t,i){i===null?ee(Ks,Ks.current):ee(Ks,i.pool)}function qg(){var t=Ff();return t===null?null:{parent:Vt._currentValue,pool:t}}var pl=Error(s(460)),Hg=Error(s(474)),mc=Error(s(542)),Gf={then:function(){}};function Fg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function pc(){}function Gg(t,i,a){switch(a=t[a],a===void 0?t.push(i):a!==i&&(i.then(pc,pc),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Yg(t),t;default:if(typeof i.status=="string")i.then(pc,pc);else{if(t=st,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=i,t.status="pending",t.then(function(l){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=l}},function(l){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Yg(t),t}throw gl=i,pl}}var gl=null;function Qg(){if(gl===null)throw Error(s(459));var t=gl;return gl=null,t}function Yg(t){if(t===pl||t===mc)throw Error(s(483))}var xr=!1;function Qf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Yf(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Ir(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Cr(t,i,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Xe&2)!==0){var h=l.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),l.pending=i,i=oc(t),Mg(t,null,a),i}return ac(t,l,i,a),oc(t)}function yl(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,Go(t,a)}}function Kf(t,i){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=v:d=d.next=v,a=a.next}while(a!==null);d===null?h=d=i:d=d.next=i}else h=d=i;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}var $f=!1;function _l(){if($f){var t=Fa;if(t!==null)throw t}}function vl(t,i,a,l){$f=!1;var h=t.updateQueue;xr=!1;var d=h.firstBaseUpdate,v=h.lastBaseUpdate,S=h.shared.pending;if(S!==null){h.shared.pending=null;var C=S,H=C.next;C.next=null,v===null?d=H:v.next=H,v=C;var W=t.alternate;W!==null&&(W=W.updateQueue,S=W.lastBaseUpdate,S!==v&&(S===null?W.firstBaseUpdate=H:S.next=H,W.lastBaseUpdate=C))}if(d!==null){var te=h.baseState;v=0,W=H=C=null,S=d;do{var Q=S.lane&-536870913,Y=Q!==S.lane;if(Y?(qe&Q)===Q:(l&Q)===Q){Q!==0&&Q===Ha&&($f=!0),W!==null&&(W=W.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var we=t,Te=S;Q=i;var tt=a;switch(Te.tag){case 1:if(we=Te.payload,typeof we=="function"){te=we.call(tt,te,Q);break e}te=we;break e;case 3:we.flags=we.flags&-65537|128;case 0:if(we=Te.payload,Q=typeof we=="function"?we.call(tt,te,Q):we,Q==null)break e;te=T({},te,Q);break e;case 2:xr=!0}}Q=S.callback,Q!==null&&(t.flags|=64,Y&&(t.flags|=8192),Y=h.callbacks,Y===null?h.callbacks=[Q]:Y.push(Q))}else Y={lane:Q,tag:S.tag,payload:S.payload,callback:S.callback,next:null},W===null?(H=W=Y,C=te):W=W.next=Y,v|=Q;if(S=S.next,S===null){if(S=h.shared.pending,S===null)break;Y=S,S=Y.next,Y.next=null,h.lastBaseUpdate=Y,h.shared.pending=null}}while(!0);W===null&&(C=te),h.baseState=C,h.firstBaseUpdate=H,h.lastBaseUpdate=W,d===null&&(h.shared.lanes=0),Lr|=v,t.lanes=v,t.memoizedState=te}}function Kg(t,i){if(typeof t!="function")throw Error(s(191,t));t.call(i)}function $g(t,i){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Kg(a[t],i)}var Ga=F(null),gc=F(0);function Xg(t,i){t=ur,ee(gc,t),ee(Ga,i),ur=t|i.baseLanes}function Xf(){ee(gc,ur),ee(Ga,Ga.current)}function Wf(){ur=gc.current,ie(Ga),ie(gc)}var Nr=0,Oe=null,Ze=null,wt=null,yc=!1,Qa=!1,$s=!1,_c=0,El=0,Ya=null,QA=0;function gt(){throw Error(s(321))}function Jf(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!vn(t[a],i[a]))return!1;return!0}function Zf(t,i,a,l,h,d){return Nr=d,Oe=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,G.H=t===null||t.memoizedState===null?My:Vy,$s=!1,d=a(l,h),$s=!1,Qa&&(d=Jg(i,a,l,h)),Wg(t),d}function Wg(t){G.H=bc;var i=Ze!==null&&Ze.next!==null;if(Nr=0,wt=Ze=Oe=null,yc=!1,El=0,Ya=null,i)throw Error(s(300));t===null||jt||(t=t.dependencies,t!==null&&hc(t)&&(jt=!0))}function Jg(t,i,a,l){Oe=t;var h=0;do{if(Qa&&(Ya=null),El=0,Qa=!1,25<=h)throw Error(s(301));if(h+=1,wt=Ze=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}G.H=ZA,d=i(a,l)}while(Qa);return d}function YA(){var t=G.H,i=t.useState()[0];return i=typeof i.then=="function"?Tl(i):i,t=t.useState()[0],(Ze!==null?Ze.memoizedState:null)!==t&&(Oe.flags|=1024),i}function ed(){var t=_c!==0;return _c=0,t}function td(t,i,a){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~a}function nd(t){if(yc){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}yc=!1}Nr=0,wt=Ze=Oe=null,Qa=!1,El=_c=0,Ya=null}function hn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wt===null?Oe.memoizedState=wt=t:wt=wt.next=t,wt}function Rt(){if(Ze===null){var t=Oe.alternate;t=t!==null?t.memoizedState:null}else t=Ze.next;var i=wt===null?Oe.memoizedState:wt.next;if(i!==null)wt=i,Ze=t;else{if(t===null)throw Oe.alternate===null?Error(s(467)):Error(s(310));Ze=t,t={memoizedState:Ze.memoizedState,baseState:Ze.baseState,baseQueue:Ze.baseQueue,queue:Ze.queue,next:null},wt===null?Oe.memoizedState=wt=t:wt=wt.next=t}return wt}function id(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Tl(t){var i=El;return El+=1,Ya===null&&(Ya=[]),t=Gg(Ya,t,i),i=Oe,(wt===null?i.memoizedState:wt.next)===null&&(i=i.alternate,G.H=i===null||i.memoizedState===null?My:Vy),t}function vc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Tl(t);if(t.$$typeof===re)return Jt(t)}throw Error(s(438,String(t)))}function rd(t){var i=null,a=Oe.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=Oe.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=id(),Oe.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(t),l=0;l<t;l++)a[l]=O;return i.index++,a}function ir(t,i){return typeof i=="function"?i(t):i}function Ec(t){var i=Rt();return sd(i,Ze,t)}function sd(t,i,a){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var h=t.baseQueue,d=l.pending;if(d!==null){if(h!==null){var v=h.next;h.next=d.next,d.next=v}i.baseQueue=h=d,l.pending=null}if(d=t.baseState,h===null)t.memoizedState=d;else{i=h.next;var S=v=null,C=null,H=i,W=!1;do{var te=H.lane&-536870913;if(te!==H.lane?(qe&te)===te:(Nr&te)===te){var Q=H.revertLane;if(Q===0)C!==null&&(C=C.next={lane:0,revertLane:0,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),te===Ha&&(W=!0);else if((Nr&Q)===Q){H=H.next,Q===Ha&&(W=!0);continue}else te={lane:0,revertLane:H.revertLane,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},C===null?(S=C=te,v=d):C=C.next=te,Oe.lanes|=Q,Lr|=Q;te=H.action,$s&&a(d,te),d=H.hasEagerState?H.eagerState:a(d,te)}else Q={lane:te,revertLane:H.revertLane,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},C===null?(S=C=Q,v=d):C=C.next=Q,Oe.lanes|=te,Lr|=te;H=H.next}while(H!==null&&H!==i);if(C===null?v=d:C.next=S,!vn(d,t.memoizedState)&&(jt=!0,W&&(a=Fa,a!==null)))throw a;t.memoizedState=d,t.baseState=v,t.baseQueue=C,l.lastRenderedState=d}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function ad(t){var i=Rt(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,d=i.memoizedState;if(h!==null){a.pending=null;var v=h=h.next;do d=t(d,v.action),v=v.next;while(v!==h);vn(d,i.memoizedState)||(jt=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,l]}function Zg(t,i,a){var l=Oe,h=Rt(),d=Qe;if(d){if(a===void 0)throw Error(s(407));a=a()}else a=i();var v=!vn((Ze||h).memoizedState,a);v&&(h.memoizedState=a,jt=!0),h=h.queue;var S=ny.bind(null,l,h,t);if(Sl(2048,8,S,[t]),h.getSnapshot!==i||v||wt!==null&&wt.memoizedState.tag&1){if(l.flags|=2048,Ka(9,Tc(),ty.bind(null,l,h,a,i),null),st===null)throw Error(s(349));d||(Nr&124)!==0||ey(l,i,a)}return a}function ey(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=Oe.updateQueue,i===null?(i=id(),Oe.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function ty(t,i,a,l){i.value=a,i.getSnapshot=l,iy(i)&&ry(t)}function ny(t,i,a){return a(function(){iy(i)&&ry(t)})}function iy(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!vn(t,a)}catch{return!0}}function ry(t){var i=ja(t,2);i!==null&&wn(i,t,2)}function od(t){var i=hn();if(typeof t=="function"){var a=t;if(t=a(),$s){yn(!0);try{a()}finally{yn(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ir,lastRenderedState:t},i}function sy(t,i,a,l){return t.baseState=a,sd(t,Ze,typeof l=="function"?l:ir)}function KA(t,i,a,l,h){if(Ac(t))throw Error(s(485));if(t=i.action,t!==null){var d={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){d.listeners.push(v)}};G.T!==null?a(!0):d.isTransition=!1,l(d),a=i.pending,a===null?(d.next=i.pending=d,ay(i,d)):(d.next=a.next,i.pending=a.next=d)}}function ay(t,i){var a=i.action,l=i.payload,h=t.state;if(i.isTransition){var d=G.T,v={};G.T=v;try{var S=a(h,l),C=G.S;C!==null&&C(v,S),oy(t,i,S)}catch(H){ld(t,i,H)}finally{G.T=d}}else try{d=a(h,l),oy(t,i,d)}catch(H){ld(t,i,H)}}function oy(t,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){ly(t,i,l)},function(l){return ld(t,i,l)}):ly(t,i,a)}function ly(t,i,a){i.status="fulfilled",i.value=a,uy(i),t.state=a,i=t.pending,i!==null&&(a=i.next,a===i?t.pending=null:(a=a.next,i.next=a,ay(t,a)))}function ld(t,i,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,uy(i),i=i.next;while(i!==l)}t.action=null}function uy(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function cy(t,i){return i}function hy(t,i){if(Qe){var a=st.formState;if(a!==null){e:{var l=Oe;if(Qe){if(dt){t:{for(var h=dt,d=Si;h.nodeType!==8;){if(!d){h=null;break t}if(h=ni(h.nextSibling),h===null){h=null;break t}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){dt=ni(h.nextSibling),l=h.data==="F!";break e}}Gs(l)}l=!1}l&&(i=a[0])}}return a=hn(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:cy,lastRenderedState:i},a.queue=l,a=Ny.bind(null,Oe,l),l.dispatch=a,l=od(!1),d=dd.bind(null,Oe,!1,l.queue),l=hn(),h={state:i,dispatch:null,action:t,pending:null},l.queue=h,a=KA.bind(null,Oe,h,d,a),h.dispatch=a,l.memoizedState=t,[i,a,!1]}function fy(t){var i=Rt();return dy(i,Ze,t)}function dy(t,i,a){if(i=sd(t,i,cy)[0],t=Ec(ir)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=Tl(i)}catch(v){throw v===pl?mc:v}else l=i;i=Rt();var h=i.queue,d=h.dispatch;return a!==i.memoizedState&&(Oe.flags|=2048,Ka(9,Tc(),$A.bind(null,h,a),null)),[l,d,t]}function $A(t,i){t.action=i}function my(t){var i=Rt(),a=Ze;if(a!==null)return dy(i,a,t);Rt(),i=i.memoizedState,a=Rt();var l=a.queue.dispatch;return a.memoizedState=t,[i,l,!1]}function Ka(t,i,a,l){return t={tag:t,create:a,deps:l,inst:i,next:null},i=Oe.updateQueue,i===null&&(i=id(),Oe.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,i.lastEffect=t),t}function Tc(){return{destroy:void 0,resource:void 0}}function py(){return Rt().memoizedState}function Sc(t,i,a,l){var h=hn();l=l===void 0?null:l,Oe.flags|=t,h.memoizedState=Ka(1|i,Tc(),a,l)}function Sl(t,i,a,l){var h=Rt();l=l===void 0?null:l;var d=h.memoizedState.inst;Ze!==null&&l!==null&&Jf(l,Ze.memoizedState.deps)?h.memoizedState=Ka(i,d,a,l):(Oe.flags|=t,h.memoizedState=Ka(1|i,d,a,l))}function gy(t,i){Sc(8390656,8,t,i)}function yy(t,i){Sl(2048,8,t,i)}function _y(t,i){return Sl(4,2,t,i)}function vy(t,i){return Sl(4,4,t,i)}function Ey(t,i){if(typeof i=="function"){t=t();var a=i(t);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function Ty(t,i,a){a=a!=null?a.concat([t]):null,Sl(4,4,Ey.bind(null,i,t),a)}function ud(){}function Sy(t,i){var a=Rt();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&Jf(i,l[1])?l[0]:(a.memoizedState=[t,i],t)}function Ay(t,i){var a=Rt();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&Jf(i,l[1]))return l[0];if(l=t(),$s){yn(!0);try{t()}finally{yn(!1)}}return a.memoizedState=[l,i],l}function cd(t,i,a){return a===void 0||(Nr&1073741824)!==0?t.memoizedState=i:(t.memoizedState=a,t=R_(),Oe.lanes|=t,Lr|=t,a)}function by(t,i,a,l){return vn(a,i)?a:Ga.current!==null?(t=cd(t,a,l),vn(t,i)||(jt=!0),t):(Nr&42)===0?(jt=!0,t.memoizedState=a):(t=R_(),Oe.lanes|=t,Lr|=t,i)}function wy(t,i,a,l,h){var d=X.p;X.p=d!==0&&8>d?d:8;var v=G.T,S={};G.T=S,dd(t,!1,i,a);try{var C=h(),H=G.S;if(H!==null&&H(S,C),C!==null&&typeof C=="object"&&typeof C.then=="function"){var W=GA(C,l);Al(t,i,W,bn(t))}else Al(t,i,l,bn(t))}catch(te){Al(t,i,{then:function(){},status:"rejected",reason:te},bn())}finally{X.p=d,G.T=v}}function XA(){}function hd(t,i,a,l){if(t.tag!==5)throw Error(s(476));var h=Ry(t).queue;wy(t,h,i,ce,a===null?XA:function(){return xy(t),a(l)})}function Ry(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:ce,baseState:ce,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ir,lastRenderedState:ce},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ir,lastRenderedState:a},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function xy(t){var i=Ry(t).next.queue;Al(t,i,{},bn())}function fd(){return Jt(Bl)}function Iy(){return Rt().memoizedState}function Cy(){return Rt().memoizedState}function WA(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var a=bn();t=Ir(a);var l=Cr(i,t,a);l!==null&&(wn(l,i,a),yl(l,i,a)),i={cache:qf()},t.payload=i;return}i=i.return}}function JA(t,i,a){var l=bn();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Ac(t)?Dy(i,a):(a=Of(t,i,a,l),a!==null&&(wn(a,t,l),Oy(a,i,l)))}function Ny(t,i,a){var l=bn();Al(t,i,a,l)}function Al(t,i,a,l){var h={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Ac(t))Dy(i,h);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var v=i.lastRenderedState,S=d(v,a);if(h.hasEagerState=!0,h.eagerState=S,vn(S,v))return ac(t,i,h,0),st===null&&sc(),!1}catch{}finally{}if(a=Of(t,i,h,l),a!==null)return wn(a,t,l),Oy(a,i,l),!0}return!1}function dd(t,i,a,l){if(l={lane:2,revertLane:Gd(),action:l,hasEagerState:!1,eagerState:null,next:null},Ac(t)){if(i)throw Error(s(479))}else i=Of(t,a,l,2),i!==null&&wn(i,t,2)}function Ac(t){var i=t.alternate;return t===Oe||i!==null&&i===Oe}function Dy(t,i){Qa=yc=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function Oy(t,i,a){if((a&4194048)!==0){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,Go(t,a)}}var bc={readContext:Jt,use:vc,useCallback:gt,useContext:gt,useEffect:gt,useImperativeHandle:gt,useLayoutEffect:gt,useInsertionEffect:gt,useMemo:gt,useReducer:gt,useRef:gt,useState:gt,useDebugValue:gt,useDeferredValue:gt,useTransition:gt,useSyncExternalStore:gt,useId:gt,useHostTransitionStatus:gt,useFormState:gt,useActionState:gt,useOptimistic:gt,useMemoCache:gt,useCacheRefresh:gt},My={readContext:Jt,use:vc,useCallback:function(t,i){return hn().memoizedState=[t,i===void 0?null:i],t},useContext:Jt,useEffect:gy,useImperativeHandle:function(t,i,a){a=a!=null?a.concat([t]):null,Sc(4194308,4,Ey.bind(null,i,t),a)},useLayoutEffect:function(t,i){return Sc(4194308,4,t,i)},useInsertionEffect:function(t,i){Sc(4,2,t,i)},useMemo:function(t,i){var a=hn();i=i===void 0?null:i;var l=t();if($s){yn(!0);try{t()}finally{yn(!1)}}return a.memoizedState=[l,i],l},useReducer:function(t,i,a){var l=hn();if(a!==void 0){var h=a(i);if($s){yn(!0);try{a(i)}finally{yn(!1)}}}else h=i;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=JA.bind(null,Oe,t),[l.memoizedState,t]},useRef:function(t){var i=hn();return t={current:t},i.memoizedState=t},useState:function(t){t=od(t);var i=t.queue,a=Ny.bind(null,Oe,i);return i.dispatch=a,[t.memoizedState,a]},useDebugValue:ud,useDeferredValue:function(t,i){var a=hn();return cd(a,t,i)},useTransition:function(){var t=od(!1);return t=wy.bind(null,Oe,t.queue,!0,!1),hn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,a){var l=Oe,h=hn();if(Qe){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),st===null)throw Error(s(349));(qe&124)!==0||ey(l,i,a)}h.memoizedState=a;var d={value:a,getSnapshot:i};return h.queue=d,gy(ny.bind(null,l,d,t),[t]),l.flags|=2048,Ka(9,Tc(),ty.bind(null,l,d,a,i),null),a},useId:function(){var t=hn(),i=st.identifierPrefix;if(Qe){var a=er,l=Zi;a=(l&~(1<<32-Wt(l)-1)).toString(32)+a,i="«"+i+"R"+a,a=_c++,0<a&&(i+="H"+a.toString(32)),i+="»"}else a=QA++,i="«"+i+"r"+a.toString(32)+"»";return t.memoizedState=i},useHostTransitionStatus:fd,useFormState:hy,useActionState:hy,useOptimistic:function(t){var i=hn();i.memoizedState=i.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=dd.bind(null,Oe,!0,a),a.dispatch=i,[t,i]},useMemoCache:rd,useCacheRefresh:function(){return hn().memoizedState=WA.bind(null,Oe)}},Vy={readContext:Jt,use:vc,useCallback:Sy,useContext:Jt,useEffect:yy,useImperativeHandle:Ty,useInsertionEffect:_y,useLayoutEffect:vy,useMemo:Ay,useReducer:Ec,useRef:py,useState:function(){return Ec(ir)},useDebugValue:ud,useDeferredValue:function(t,i){var a=Rt();return by(a,Ze.memoizedState,t,i)},useTransition:function(){var t=Ec(ir)[0],i=Rt().memoizedState;return[typeof t=="boolean"?t:Tl(t),i]},useSyncExternalStore:Zg,useId:Iy,useHostTransitionStatus:fd,useFormState:fy,useActionState:fy,useOptimistic:function(t,i){var a=Rt();return sy(a,Ze,t,i)},useMemoCache:rd,useCacheRefresh:Cy},ZA={readContext:Jt,use:vc,useCallback:Sy,useContext:Jt,useEffect:yy,useImperativeHandle:Ty,useInsertionEffect:_y,useLayoutEffect:vy,useMemo:Ay,useReducer:ad,useRef:py,useState:function(){return ad(ir)},useDebugValue:ud,useDeferredValue:function(t,i){var a=Rt();return Ze===null?cd(a,t,i):by(a,Ze.memoizedState,t,i)},useTransition:function(){var t=ad(ir)[0],i=Rt().memoizedState;return[typeof t=="boolean"?t:Tl(t),i]},useSyncExternalStore:Zg,useId:Iy,useHostTransitionStatus:fd,useFormState:my,useActionState:my,useOptimistic:function(t,i){var a=Rt();return Ze!==null?sy(a,Ze,t,i):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:rd,useCacheRefresh:Cy},$a=null,bl=0;function wc(t){var i=bl;return bl+=1,$a===null&&($a=[]),Gg($a,t,i)}function wl(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function Rc(t,i){throw i.$$typeof===A?Error(s(525)):(t=Object.prototype.toString.call(i),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function Py(t){var i=t._init;return i(t._payload)}function ky(t){function i(j,P){if(t){var q=j.deletions;q===null?(j.deletions=[P],j.flags|=16):q.push(P)}}function a(j,P){if(!t)return null;for(;P!==null;)i(j,P),P=P.sibling;return null}function l(j){for(var P=new Map;j!==null;)j.key!==null?P.set(j.key,j):P.set(j.index,j),j=j.sibling;return P}function h(j,P){return j=Ji(j,P),j.index=0,j.sibling=null,j}function d(j,P,q){return j.index=q,t?(q=j.alternate,q!==null?(q=q.index,q<P?(j.flags|=67108866,P):q):(j.flags|=67108866,P)):(j.flags|=1048576,P)}function v(j){return t&&j.alternate===null&&(j.flags|=67108866),j}function S(j,P,q,J){return P===null||P.tag!==6?(P=Vf(q,j.mode,J),P.return=j,P):(P=h(P,q),P.return=j,P)}function C(j,P,q,J){var ge=q.type;return ge===B?W(j,P,q.props.children,J,q.key):P!==null&&(P.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===x&&Py(ge)===P.type)?(P=h(P,q.props),wl(P,q),P.return=j,P):(P=lc(q.type,q.key,q.props,null,j.mode,J),wl(P,q),P.return=j,P)}function H(j,P,q,J){return P===null||P.tag!==4||P.stateNode.containerInfo!==q.containerInfo||P.stateNode.implementation!==q.implementation?(P=Pf(q,j.mode,J),P.return=j,P):(P=h(P,q.children||[]),P.return=j,P)}function W(j,P,q,J,ge){return P===null||P.tag!==7?(P=Bs(q,j.mode,J,ge),P.return=j,P):(P=h(P,q),P.return=j,P)}function te(j,P,q){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return P=Vf(""+P,j.mode,q),P.return=j,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case R:return q=lc(P.type,P.key,P.props,null,j.mode,q),wl(q,P),q.return=j,q;case N:return P=Pf(P,j.mode,q),P.return=j,P;case x:var J=P._init;return P=J(P._payload),te(j,P,q)}if(Ee(P)||k(P))return P=Bs(P,j.mode,q,null),P.return=j,P;if(typeof P.then=="function")return te(j,wc(P),q);if(P.$$typeof===re)return te(j,fc(j,P),q);Rc(j,P)}return null}function Q(j,P,q,J){var ge=P!==null?P.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return ge!==null?null:S(j,P,""+q,J);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case R:return q.key===ge?C(j,P,q,J):null;case N:return q.key===ge?H(j,P,q,J):null;case x:return ge=q._init,q=ge(q._payload),Q(j,P,q,J)}if(Ee(q)||k(q))return ge!==null?null:W(j,P,q,J,null);if(typeof q.then=="function")return Q(j,P,wc(q),J);if(q.$$typeof===re)return Q(j,P,fc(j,q),J);Rc(j,q)}return null}function Y(j,P,q,J,ge){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return j=j.get(q)||null,S(P,j,""+J,ge);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case R:return j=j.get(J.key===null?q:J.key)||null,C(P,j,J,ge);case N:return j=j.get(J.key===null?q:J.key)||null,H(P,j,J,ge);case x:var Me=J._init;return J=Me(J._payload),Y(j,P,q,J,ge)}if(Ee(J)||k(J))return j=j.get(q)||null,W(P,j,J,ge,null);if(typeof J.then=="function")return Y(j,P,q,wc(J),ge);if(J.$$typeof===re)return Y(j,P,q,fc(P,J),ge);Rc(P,J)}return null}function we(j,P,q,J){for(var ge=null,Me=null,_e=P,Se=P=0,Bt=null;_e!==null&&Se<q.length;Se++){_e.index>Se?(Bt=_e,_e=null):Bt=_e.sibling;var Ge=Q(j,_e,q[Se],J);if(Ge===null){_e===null&&(_e=Bt);break}t&&_e&&Ge.alternate===null&&i(j,_e),P=d(Ge,P,Se),Me===null?ge=Ge:Me.sibling=Ge,Me=Ge,_e=Bt}if(Se===q.length)return a(j,_e),Qe&&Hs(j,Se),ge;if(_e===null){for(;Se<q.length;Se++)_e=te(j,q[Se],J),_e!==null&&(P=d(_e,P,Se),Me===null?ge=_e:Me.sibling=_e,Me=_e);return Qe&&Hs(j,Se),ge}for(_e=l(_e);Se<q.length;Se++)Bt=Y(_e,j,Se,q[Se],J),Bt!==null&&(t&&Bt.alternate!==null&&_e.delete(Bt.key===null?Se:Bt.key),P=d(Bt,P,Se),Me===null?ge=Bt:Me.sibling=Bt,Me=Bt);return t&&_e.forEach(function(Qr){return i(j,Qr)}),Qe&&Hs(j,Se),ge}function Te(j,P,q,J){if(q==null)throw Error(s(151));for(var ge=null,Me=null,_e=P,Se=P=0,Bt=null,Ge=q.next();_e!==null&&!Ge.done;Se++,Ge=q.next()){_e.index>Se?(Bt=_e,_e=null):Bt=_e.sibling;var Qr=Q(j,_e,Ge.value,J);if(Qr===null){_e===null&&(_e=Bt);break}t&&_e&&Qr.alternate===null&&i(j,_e),P=d(Qr,P,Se),Me===null?ge=Qr:Me.sibling=Qr,Me=Qr,_e=Bt}if(Ge.done)return a(j,_e),Qe&&Hs(j,Se),ge;if(_e===null){for(;!Ge.done;Se++,Ge=q.next())Ge=te(j,Ge.value,J),Ge!==null&&(P=d(Ge,P,Se),Me===null?ge=Ge:Me.sibling=Ge,Me=Ge);return Qe&&Hs(j,Se),ge}for(_e=l(_e);!Ge.done;Se++,Ge=q.next())Ge=Y(_e,j,Se,Ge.value,J),Ge!==null&&(t&&Ge.alternate!==null&&_e.delete(Ge.key===null?Se:Ge.key),P=d(Ge,P,Se),Me===null?ge=Ge:Me.sibling=Ge,Me=Ge);return t&&_e.forEach(function(ew){return i(j,ew)}),Qe&&Hs(j,Se),ge}function tt(j,P,q,J){if(typeof q=="object"&&q!==null&&q.type===B&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case R:e:{for(var ge=q.key;P!==null;){if(P.key===ge){if(ge=q.type,ge===B){if(P.tag===7){a(j,P.sibling),J=h(P,q.props.children),J.return=j,j=J;break e}}else if(P.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===x&&Py(ge)===P.type){a(j,P.sibling),J=h(P,q.props),wl(J,q),J.return=j,j=J;break e}a(j,P);break}else i(j,P);P=P.sibling}q.type===B?(J=Bs(q.props.children,j.mode,J,q.key),J.return=j,j=J):(J=lc(q.type,q.key,q.props,null,j.mode,J),wl(J,q),J.return=j,j=J)}return v(j);case N:e:{for(ge=q.key;P!==null;){if(P.key===ge)if(P.tag===4&&P.stateNode.containerInfo===q.containerInfo&&P.stateNode.implementation===q.implementation){a(j,P.sibling),J=h(P,q.children||[]),J.return=j,j=J;break e}else{a(j,P);break}else i(j,P);P=P.sibling}J=Pf(q,j.mode,J),J.return=j,j=J}return v(j);case x:return ge=q._init,q=ge(q._payload),tt(j,P,q,J)}if(Ee(q))return we(j,P,q,J);if(k(q)){if(ge=k(q),typeof ge!="function")throw Error(s(150));return q=ge.call(q),Te(j,P,q,J)}if(typeof q.then=="function")return tt(j,P,wc(q),J);if(q.$$typeof===re)return tt(j,P,fc(j,q),J);Rc(j,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,P!==null&&P.tag===6?(a(j,P.sibling),J=h(P,q),J.return=j,j=J):(a(j,P),J=Vf(q,j.mode,J),J.return=j,j=J),v(j)):a(j,P)}return function(j,P,q,J){try{bl=0;var ge=tt(j,P,q,J);return $a=null,ge}catch(_e){if(_e===pl||_e===mc)throw _e;var Me=En(29,_e,null,j.mode);return Me.lanes=J,Me.return=j,Me}finally{}}}var Xa=ky(!0),Ly=ky(!1),Un=F(null),Ai=null;function Dr(t){var i=t.alternate;ee(Pt,Pt.current&1),ee(Un,t),Ai===null&&(i===null||Ga.current!==null||i.memoizedState!==null)&&(Ai=t)}function Uy(t){if(t.tag===22){if(ee(Pt,Pt.current),ee(Un,t),Ai===null){var i=t.alternate;i!==null&&i.memoizedState!==null&&(Ai=t)}}else Or()}function Or(){ee(Pt,Pt.current),ee(Un,Un.current)}function rr(t){ie(Un),Ai===t&&(Ai=null),ie(Pt)}var Pt=F(0);function xc(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||im(a)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function md(t,i,a,l){i=t.memoizedState,a=a(l,i),a=a==null?i:T({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var pd={enqueueSetState:function(t,i,a){t=t._reactInternals;var l=bn(),h=Ir(l);h.payload=i,a!=null&&(h.callback=a),i=Cr(t,h,l),i!==null&&(wn(i,t,l),yl(i,t,l))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var l=bn(),h=Ir(l);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=Cr(t,h,l),i!==null&&(wn(i,t,l),yl(i,t,l))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=bn(),l=Ir(a);l.tag=2,i!=null&&(l.callback=i),i=Cr(t,l,a),i!==null&&(wn(i,t,a),yl(i,t,a))}};function jy(t,i,a,l,h,d,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,d,v):i.prototype&&i.prototype.isPureReactComponent?!ol(a,l)||!ol(h,d):!0}function zy(t,i,a,l){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==t&&pd.enqueueReplaceState(i,i.state,null)}function Xs(t,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(t=t.defaultProps){a===i&&(a=T({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}var Ic=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function By(t){Ic(t)}function qy(t){console.error(t)}function Hy(t){Ic(t)}function Cc(t,i){try{var a=t.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function Fy(t,i,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function gd(t,i,a){return a=Ir(a),a.tag=3,a.payload={element:null},a.callback=function(){Cc(t,i)},a}function Gy(t){return t=Ir(t),t.tag=3,t}function Qy(t,i,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=l.value;t.payload=function(){return h(d)},t.callback=function(){Fy(i,a,l)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(t.callback=function(){Fy(i,a,l),typeof h!="function"&&(Ur===null?Ur=new Set([this]):Ur.add(this));var S=l.stack;this.componentDidCatch(l.value,{componentStack:S!==null?S:""})})}function eb(t,i,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&fl(i,a,h,!0),a=Un.current,a!==null){switch(a.tag){case 13:return Ai===null?zd():a.alternate===null&&mt===0&&(mt=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===Gf?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),qd(t,l,h)),!1;case 22:return a.flags|=65536,l===Gf?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),qd(t,l,h)),!1}throw Error(s(435,a.tag))}return qd(t,l,h),zd(),!1}if(Qe)return i=Un.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,l!==Uf&&(t=Error(s(422),{cause:l}),hl(Vn(t,a)))):(l!==Uf&&(i=Error(s(423),{cause:l}),hl(Vn(i,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=Vn(l,a),h=gd(t.stateNode,l,h),Kf(t,h),mt!==4&&(mt=2)),!1;var d=Error(s(520),{cause:l});if(d=Vn(d,a),Ol===null?Ol=[d]:Ol.push(d),mt!==4&&(mt=2),i===null)return!0;l=Vn(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=gd(a.stateNode,l,t),Kf(a,t),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Ur===null||!Ur.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=Gy(h),Qy(h,t,a,l),Kf(a,h),!1}a=a.return}while(a!==null);return!1}var Yy=Error(s(461)),jt=!1;function Gt(t,i,a,l){i.child=t===null?Ly(i,null,a,l):Xa(i,t.child,a,l)}function Ky(t,i,a,l,h){a=a.render;var d=i.ref;if("ref"in l){var v={};for(var S in l)S!=="ref"&&(v[S]=l[S])}else v=l;return Ys(i),l=Zf(t,i,a,v,d,h),S=ed(),t!==null&&!jt?(td(t,i,h),sr(t,i,h)):(Qe&&S&&kf(i),i.flags|=1,Gt(t,i,l,h),i.child)}function $y(t,i,a,l,h){if(t===null){var d=a.type;return typeof d=="function"&&!Mf(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,Xy(t,i,d,l,h)):(t=lc(a.type,null,l,i,i.mode,h),t.ref=i.ref,t.return=i,i.child=t)}if(d=t.child,!bd(t,h)){var v=d.memoizedProps;if(a=a.compare,a=a!==null?a:ol,a(v,l)&&t.ref===i.ref)return sr(t,i,h)}return i.flags|=1,t=Ji(d,l),t.ref=i.ref,t.return=i,i.child=t}function Xy(t,i,a,l,h){if(t!==null){var d=t.memoizedProps;if(ol(d,l)&&t.ref===i.ref)if(jt=!1,i.pendingProps=l=d,bd(t,h))(t.flags&131072)!==0&&(jt=!0);else return i.lanes=t.lanes,sr(t,i,h)}return yd(t,i,a,l,h)}function Wy(t,i,a){var l=i.pendingProps,h=l.children,d=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((i.flags&128)!==0){if(l=d!==null?d.baseLanes|a:a,t!==null){for(h=i.child=t.child,d=0;h!==null;)d=d|h.lanes|h.childLanes,h=h.sibling;i.childLanes=d&~l}else i.childLanes=0,i.child=null;return Jy(t,i,l,a)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&dc(i,d!==null?d.cachePool:null),d!==null?Xg(i,d):Xf(),Uy(i);else return i.lanes=i.childLanes=536870912,Jy(t,i,d!==null?d.baseLanes|a:a,a)}else d!==null?(dc(i,d.cachePool),Xg(i,d),Or(),i.memoizedState=null):(t!==null&&dc(i,null),Xf(),Or());return Gt(t,i,h,a),i.child}function Jy(t,i,a,l){var h=Ff();return h=h===null?null:{parent:Vt._currentValue,pool:h},i.memoizedState={baseLanes:a,cachePool:h},t!==null&&dc(i,null),Xf(),Uy(i),t!==null&&fl(t,i,l,!0),null}function Nc(t,i){var a=i.ref;if(a===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(i.flags|=4194816)}}function yd(t,i,a,l,h){return Ys(i),a=Zf(t,i,a,l,void 0,h),l=ed(),t!==null&&!jt?(td(t,i,h),sr(t,i,h)):(Qe&&l&&kf(i),i.flags|=1,Gt(t,i,a,h),i.child)}function Zy(t,i,a,l,h,d){return Ys(i),i.updateQueue=null,a=Jg(i,l,a,h),Wg(t),l=ed(),t!==null&&!jt?(td(t,i,d),sr(t,i,d)):(Qe&&l&&kf(i),i.flags|=1,Gt(t,i,a,d),i.child)}function e_(t,i,a,l,h){if(Ys(i),i.stateNode===null){var d=za,v=a.contextType;typeof v=="object"&&v!==null&&(d=Jt(v)),d=new a(l,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=pd,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=l,d.state=i.memoizedState,d.refs={},Qf(i),v=a.contextType,d.context=typeof v=="object"&&v!==null?Jt(v):za,d.state=i.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(md(i,a,v,l),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(v=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),v!==d.state&&pd.enqueueReplaceState(d,d.state,null),vl(i,l,d,h),_l(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(t===null){d=i.stateNode;var S=i.memoizedProps,C=Xs(a,S);d.props=C;var H=d.context,W=a.contextType;v=za,typeof W=="object"&&W!==null&&(v=Jt(W));var te=a.getDerivedStateFromProps;W=typeof te=="function"||typeof d.getSnapshotBeforeUpdate=="function",S=i.pendingProps!==S,W||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(S||H!==v)&&zy(i,d,l,v),xr=!1;var Q=i.memoizedState;d.state=Q,vl(i,l,d,h),_l(),H=i.memoizedState,S||Q!==H||xr?(typeof te=="function"&&(md(i,a,te,l),H=i.memoizedState),(C=xr||jy(i,a,C,l,Q,H,v))?(W||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=H),d.props=l,d.state=H,d.context=v,l=C):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{d=i.stateNode,Yf(t,i),v=i.memoizedProps,W=Xs(a,v),d.props=W,te=i.pendingProps,Q=d.context,H=a.contextType,C=za,typeof H=="object"&&H!==null&&(C=Jt(H)),S=a.getDerivedStateFromProps,(H=typeof S=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(v!==te||Q!==C)&&zy(i,d,l,C),xr=!1,Q=i.memoizedState,d.state=Q,vl(i,l,d,h),_l();var Y=i.memoizedState;v!==te||Q!==Y||xr||t!==null&&t.dependencies!==null&&hc(t.dependencies)?(typeof S=="function"&&(md(i,a,S,l),Y=i.memoizedState),(W=xr||jy(i,a,W,l,Q,Y,C)||t!==null&&t.dependencies!==null&&hc(t.dependencies))?(H||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,Y,C),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,Y,C)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||v===t.memoizedProps&&Q===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&Q===t.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=Y),d.props=l,d.state=Y,d.context=C,l=W):(typeof d.componentDidUpdate!="function"||v===t.memoizedProps&&Q===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&Q===t.memoizedState||(i.flags|=1024),l=!1)}return d=l,Nc(t,i),l=(i.flags&128)!==0,d||l?(d=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,t!==null&&l?(i.child=Xa(i,t.child,null,h),i.child=Xa(i,null,a,h)):Gt(t,i,a,h),i.memoizedState=d.state,t=i.child):t=sr(t,i,h),t}function t_(t,i,a,l){return cl(),i.flags|=256,Gt(t,i,a,l),i.child}var _d={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function vd(t){return{baseLanes:t,cachePool:qg()}}function Ed(t,i,a){return t=t!==null?t.childLanes&~a:0,i&&(t|=jn),t}function n_(t,i,a){var l=i.pendingProps,h=!1,d=(i.flags&128)!==0,v;if((v=d)||(v=t!==null&&t.memoizedState===null?!1:(Pt.current&2)!==0),v&&(h=!0,i.flags&=-129),v=(i.flags&32)!==0,i.flags&=-33,t===null){if(Qe){if(h?Dr(i):Or(),Qe){var S=dt,C;if(C=S){e:{for(C=S,S=Si;C.nodeType!==8;){if(!S){S=null;break e}if(C=ni(C.nextSibling),C===null){S=null;break e}}S=C}S!==null?(i.memoizedState={dehydrated:S,treeContext:qs!==null?{id:Zi,overflow:er}:null,retryLane:536870912,hydrationErrors:null},C=En(18,null,null,0),C.stateNode=S,C.return=i,i.child=C,cn=i,dt=null,C=!0):C=!1}C||Gs(i)}if(S=i.memoizedState,S!==null&&(S=S.dehydrated,S!==null))return im(S)?i.lanes=32:i.lanes=536870912,null;rr(i)}return S=l.children,l=l.fallback,h?(Or(),h=i.mode,S=Dc({mode:"hidden",children:S},h),l=Bs(l,h,a,null),S.return=i,l.return=i,S.sibling=l,i.child=S,h=i.child,h.memoizedState=vd(a),h.childLanes=Ed(t,v,a),i.memoizedState=_d,l):(Dr(i),Td(i,S))}if(C=t.memoizedState,C!==null&&(S=C.dehydrated,S!==null)){if(d)i.flags&256?(Dr(i),i.flags&=-257,i=Sd(t,i,a)):i.memoizedState!==null?(Or(),i.child=t.child,i.flags|=128,i=null):(Or(),h=l.fallback,S=i.mode,l=Dc({mode:"visible",children:l.children},S),h=Bs(h,S,a,null),h.flags|=2,l.return=i,h.return=i,l.sibling=h,i.child=l,Xa(i,t.child,null,a),l=i.child,l.memoizedState=vd(a),l.childLanes=Ed(t,v,a),i.memoizedState=_d,i=h);else if(Dr(i),im(S)){if(v=S.nextSibling&&S.nextSibling.dataset,v)var H=v.dgst;v=H,l=Error(s(419)),l.stack="",l.digest=v,hl({value:l,source:null,stack:null}),i=Sd(t,i,a)}else if(jt||fl(t,i,a,!1),v=(a&t.childLanes)!==0,jt||v){if(v=st,v!==null&&(l=a&-a,l=(l&42)!==0?1:vr(l),l=(l&(v.suspendedLanes|a))!==0?0:l,l!==0&&l!==C.retryLane))throw C.retryLane=l,ja(t,l),wn(v,t,l),Yy;S.data==="$?"||zd(),i=Sd(t,i,a)}else S.data==="$?"?(i.flags|=192,i.child=t.child,i=null):(t=C.treeContext,dt=ni(S.nextSibling),cn=i,Qe=!0,Fs=null,Si=!1,t!==null&&(kn[Ln++]=Zi,kn[Ln++]=er,kn[Ln++]=qs,Zi=t.id,er=t.overflow,qs=i),i=Td(i,l.children),i.flags|=4096);return i}return h?(Or(),h=l.fallback,S=i.mode,C=t.child,H=C.sibling,l=Ji(C,{mode:"hidden",children:l.children}),l.subtreeFlags=C.subtreeFlags&65011712,H!==null?h=Ji(H,h):(h=Bs(h,S,a,null),h.flags|=2),h.return=i,l.return=i,l.sibling=h,i.child=l,l=h,h=i.child,S=t.child.memoizedState,S===null?S=vd(a):(C=S.cachePool,C!==null?(H=Vt._currentValue,C=C.parent!==H?{parent:H,pool:H}:C):C=qg(),S={baseLanes:S.baseLanes|a,cachePool:C}),h.memoizedState=S,h.childLanes=Ed(t,v,a),i.memoizedState=_d,l):(Dr(i),a=t.child,t=a.sibling,a=Ji(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,t!==null&&(v=i.deletions,v===null?(i.deletions=[t],i.flags|=16):v.push(t)),i.child=a,i.memoizedState=null,a)}function Td(t,i){return i=Dc({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function Dc(t,i){return t=En(22,t,null,i),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function Sd(t,i,a){return Xa(i,t.child,null,a),t=Td(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function i_(t,i,a){t.lanes|=i;var l=t.alternate;l!==null&&(l.lanes|=i),zf(t.return,i,a)}function Ad(t,i,a,l,h){var d=t.memoizedState;d===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h}:(d.isBackwards=i,d.rendering=null,d.renderingStartTime=0,d.last=l,d.tail=a,d.tailMode=h)}function r_(t,i,a){var l=i.pendingProps,h=l.revealOrder,d=l.tail;if(Gt(t,i,l.children,a),l=Pt.current,(l&2)!==0)l=l&1|2,i.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&i_(t,a,i);else if(t.tag===19)i_(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(ee(Pt,l),h){case"forwards":for(a=i.child,h=null;a!==null;)t=a.alternate,t!==null&&xc(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),Ad(i,!1,h,a,d);break;case"backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(t=h.alternate,t!==null&&xc(t)===null){i.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}Ad(i,!0,a,null,d);break;case"together":Ad(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function sr(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),Lr|=i.lanes,(a&i.childLanes)===0)if(t!==null){if(fl(t,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(s(153));if(i.child!==null){for(t=i.child,a=Ji(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=Ji(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function bd(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&hc(t)))}function tb(t,i,a){switch(i.tag){case 3:Ne(i,i.stateNode.containerInfo),Rr(i,Vt,t.memoizedState.cache),cl();break;case 27:case 5:St(i);break;case 4:Ne(i,i.stateNode.containerInfo);break;case 10:Rr(i,i.type,i.memoizedProps.value);break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(Dr(i),i.flags|=128,null):(a&i.child.childLanes)!==0?n_(t,i,a):(Dr(i),t=sr(t,i,a),t!==null?t.sibling:null);Dr(i);break;case 19:var h=(t.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(fl(t,i,a,!1),l=(a&i.childLanes)!==0),h){if(l)return r_(t,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),ee(Pt,Pt.current),l)break;return null;case 22:case 23:return i.lanes=0,Wy(t,i,a);case 24:Rr(i,Vt,t.memoizedState.cache)}return sr(t,i,a)}function s_(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps)jt=!0;else{if(!bd(t,a)&&(i.flags&128)===0)return jt=!1,tb(t,i,a);jt=(t.flags&131072)!==0}else jt=!1,Qe&&(i.flags&1048576)!==0&&Pg(i,cc,i.index);switch(i.lanes=0,i.tag){case 16:e:{t=i.pendingProps;var l=i.elementType,h=l._init;if(l=h(l._payload),i.type=l,typeof l=="function")Mf(l)?(t=Xs(l,t),i.tag=1,i=e_(null,i,l,t,a)):(i.tag=0,i=yd(null,i,l,t,a));else{if(l!=null){if(h=l.$$typeof,h===fe){i.tag=11,i=Ky(null,i,l,t,a);break e}else if(h===M){i.tag=14,i=$y(null,i,l,t,a);break e}}throw i=Ae(l)||l,Error(s(306,i,""))}}return i;case 0:return yd(t,i,i.type,i.pendingProps,a);case 1:return l=i.type,h=Xs(l,i.pendingProps),e_(t,i,l,h,a);case 3:e:{if(Ne(i,i.stateNode.containerInfo),t===null)throw Error(s(387));l=i.pendingProps;var d=i.memoizedState;h=d.element,Yf(t,i),vl(i,l,null,a);var v=i.memoizedState;if(l=v.cache,Rr(i,Vt,l),l!==d.cache&&Bf(i,[Vt],a,!0),_l(),l=v.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:v.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=t_(t,i,l,a);break e}else if(l!==h){h=Vn(Error(s(424)),i),hl(h),i=t_(t,i,l,a);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(dt=ni(t.firstChild),cn=i,Qe=!0,Fs=null,Si=!0,a=Ly(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(cl(),l===h){i=sr(t,i,a);break e}Gt(t,i,l,a)}i=i.child}return i;case 26:return Nc(t,i),t===null?(a=uv(i.type,null,i.pendingProps,null))?i.memoizedState=a:Qe||(a=i.type,t=i.pendingProps,l=Gc(ue.current).createElement(a),l[Dt]=i,l[At]=t,Yt(l,a,t),pt(l),i.stateNode=l):i.memoizedState=uv(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return St(i),t===null&&Qe&&(l=i.stateNode=av(i.type,i.pendingProps,ue.current),cn=i,Si=!0,h=dt,Br(i.type)?(rm=h,dt=ni(l.firstChild)):dt=h),Gt(t,i,i.pendingProps.children,a),Nc(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&Qe&&((h=l=dt)&&(l=Cb(l,i.type,i.pendingProps,Si),l!==null?(i.stateNode=l,cn=i,dt=ni(l.firstChild),Si=!1,h=!0):h=!1),h||Gs(i)),St(i),h=i.type,d=i.pendingProps,v=t!==null?t.memoizedProps:null,l=d.children,em(h,d)?l=null:v!==null&&em(h,v)&&(i.flags|=32),i.memoizedState!==null&&(h=Zf(t,i,YA,null,null,a),Bl._currentValue=h),Nc(t,i),Gt(t,i,l,a),i.child;case 6:return t===null&&Qe&&((t=a=dt)&&(a=Nb(a,i.pendingProps,Si),a!==null?(i.stateNode=a,cn=i,dt=null,t=!0):t=!1),t||Gs(i)),null;case 13:return n_(t,i,a);case 4:return Ne(i,i.stateNode.containerInfo),l=i.pendingProps,t===null?i.child=Xa(i,null,l,a):Gt(t,i,l,a),i.child;case 11:return Ky(t,i,i.type,i.pendingProps,a);case 7:return Gt(t,i,i.pendingProps,a),i.child;case 8:return Gt(t,i,i.pendingProps.children,a),i.child;case 12:return Gt(t,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,Rr(i,i.type,l.value),Gt(t,i,l.children,a),i.child;case 9:return h=i.type._context,l=i.pendingProps.children,Ys(i),h=Jt(h),l=l(h),i.flags|=1,Gt(t,i,l,a),i.child;case 14:return $y(t,i,i.type,i.pendingProps,a);case 15:return Xy(t,i,i.type,i.pendingProps,a);case 19:return r_(t,i,a);case 31:return l=i.pendingProps,a=i.mode,l={mode:l.mode,children:l.children},t===null?(a=Dc(l,a),a.ref=i.ref,i.child=a,a.return=i,i=a):(a=Ji(t.child,l),a.ref=i.ref,i.child=a,a.return=i,i=a),i;case 22:return Wy(t,i,a);case 24:return Ys(i),l=Jt(Vt),t===null?(h=Ff(),h===null&&(h=st,d=qf(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),i.memoizedState={parent:l,cache:h},Qf(i),Rr(i,Vt,h)):((t.lanes&a)!==0&&(Yf(t,i),vl(i,null,null,a),_l()),h=t.memoizedState,d=i.memoizedState,h.parent!==l?(h={parent:l,cache:l},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),Rr(i,Vt,l)):(l=d.cache,Rr(i,Vt,l),l!==h.cache&&Bf(i,[Vt],a,!0))),Gt(t,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function ar(t){t.flags|=4}function a_(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!mv(i)){if(i=Un.current,i!==null&&((qe&4194048)===qe?Ai!==null:(qe&62914560)!==qe&&(qe&536870912)===0||i!==Ai))throw gl=Gf,Hg;t.flags|=8192}}function Oc(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?Ho():536870912,t.lanes|=i,eo|=i)}function Rl(t,i){if(!Qe)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function ct(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(i)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,i}function nb(t,i,a){var l=i.pendingProps;switch(Lf(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ct(i),null;case 1:return ct(i),null;case 3:return a=i.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),nr(Vt),nt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(ul(i)?ar(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Ug())),ct(i),null;case 26:return a=i.memoizedState,t===null?(ar(i),a!==null?(ct(i),a_(i,a)):(ct(i),i.flags&=-16777217)):a?a!==t.memoizedState?(ar(i),ct(i),a_(i,a)):(ct(i),i.flags&=-16777217):(t.memoizedProps!==l&&ar(i),ct(i),i.flags&=-16777217),null;case 27:gn(i),a=ue.current;var h=i.type;if(t!==null&&i.stateNode!=null)t.memoizedProps!==l&&ar(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return ct(i),null}t=de.current,ul(i)?kg(i):(t=av(h,l,a),i.stateNode=t,ar(i))}return ct(i),null;case 5:if(gn(i),a=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&ar(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return ct(i),null}if(t=de.current,ul(i))kg(i);else{switch(h=Gc(ue.current),t){case 1:t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=h.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?h.createElement(a,{is:l.is}):h.createElement(a)}}t[Dt]=i,t[At]=l;e:for(h=i.child;h!==null;){if(h.tag===5||h.tag===6)t.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===i)break e;for(;h.sibling===null;){if(h.return===null||h.return===i)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}i.stateNode=t;e:switch(Yt(t,a,l),a){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&ar(i)}}return ct(i),i.flags&=-16777217,null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==l&&ar(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(s(166));if(t=ue.current,ul(i)){if(t=i.stateNode,a=i.memoizedProps,l=null,h=cn,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[Dt]=i,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Z_(t.nodeValue,a)),t||Gs(i)}else t=Gc(t).createTextNode(l),t[Dt]=i,i.stateNode=t}return ct(i),null;case 13:if(l=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=ul(i),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(s(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[Dt]=i}else cl(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ct(i),h=!1}else h=Ug(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(rr(i),i):(rr(i),null)}if(rr(i),(i.flags&128)!==0)return i.lanes=a,i;if(a=l!==null,t=t!==null&&t.memoizedState!==null,a){l=i.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool);var d=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==h&&(l.flags|=2048)}return a!==t&&a&&(i.child.flags|=8192),Oc(i,i.updateQueue),ct(i),null;case 4:return nt(),t===null&&$d(i.stateNode.containerInfo),ct(i),null;case 10:return nr(i.type),ct(i),null;case 19:if(ie(Pt),h=i.memoizedState,h===null)return ct(i),null;if(l=(i.flags&128)!==0,d=h.rendering,d===null)if(l)Rl(h,!1);else{if(mt!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(d=xc(t),d!==null){for(i.flags|=128,Rl(h,!1),t=d.updateQueue,i.updateQueue=t,Oc(i,t),i.subtreeFlags=0,t=a,a=i.child;a!==null;)Vg(a,t),a=a.sibling;return ee(Pt,Pt.current&1|2),i.child}t=t.sibling}h.tail!==null&&In()>Pc&&(i.flags|=128,l=!0,Rl(h,!1),i.lanes=4194304)}else{if(!l)if(t=xc(d),t!==null){if(i.flags|=128,l=!0,t=t.updateQueue,i.updateQueue=t,Oc(i,t),Rl(h,!0),h.tail===null&&h.tailMode==="hidden"&&!d.alternate&&!Qe)return ct(i),null}else 2*In()-h.renderingStartTime>Pc&&a!==536870912&&(i.flags|=128,l=!0,Rl(h,!1),i.lanes=4194304);h.isBackwards?(d.sibling=i.child,i.child=d):(t=h.last,t!==null?t.sibling=d:i.child=d,h.last=d)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=In(),i.sibling=null,t=Pt.current,ee(Pt,l?t&1|2:t&1),i):(ct(i),null);case 22:case 23:return rr(i),Wf(),l=i.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(ct(i),i.subtreeFlags&6&&(i.flags|=8192)):ct(i),a=i.updateQueue,a!==null&&Oc(i,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),t!==null&&ie(Ks),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),nr(Vt),ct(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function ib(t,i){switch(Lf(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return nr(Vt),nt(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return gn(i),null;case 13:if(rr(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(s(340));cl()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return ie(Pt),null;case 4:return nt(),null;case 10:return nr(i.type),null;case 22:case 23:return rr(i),Wf(),t!==null&&ie(Ks),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return nr(Vt),null;case 25:return null;default:return null}}function o_(t,i){switch(Lf(i),i.tag){case 3:nr(Vt),nt();break;case 26:case 27:case 5:gn(i);break;case 4:nt();break;case 13:rr(i);break;case 19:ie(Pt);break;case 10:nr(i.type);break;case 22:case 23:rr(i),Wf(),t!==null&&ie(Ks);break;case 24:nr(Vt)}}function xl(t,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var d=a.create,v=a.inst;l=d(),v.destroy=l}a=a.next}while(a!==h)}}catch(S){it(i,i.return,S)}}function Mr(t,i,a){try{var l=i.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var d=h.next;l=d;do{if((l.tag&t)===t){var v=l.inst,S=v.destroy;if(S!==void 0){v.destroy=void 0,h=i;var C=a,H=S;try{H()}catch(W){it(h,C,W)}}}l=l.next}while(l!==d)}}catch(W){it(i,i.return,W)}}function l_(t){var i=t.updateQueue;if(i!==null){var a=t.stateNode;try{$g(i,a)}catch(l){it(t,t.return,l)}}}function u_(t,i,a){a.props=Xs(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){it(t,i,l)}}function Il(t,i){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){it(t,i,h)}}function bi(t,i){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){it(t,i,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){it(t,i,h)}else a.current=null}function c_(t){var i=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){it(t,t.return,h)}}function wd(t,i,a){try{var l=t.stateNode;bb(l,t.type,a,i),l[At]=i}catch(h){it(t,t.return,h)}}function h_(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Br(t.type)||t.tag===4}function Rd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||h_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Br(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function xd(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(t),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Fc));else if(l!==4&&(l===27&&Br(t.type)&&(a=t.stateNode,i=null),t=t.child,t!==null))for(xd(t,i,a),t=t.sibling;t!==null;)xd(t,i,a),t=t.sibling}function Mc(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(l!==4&&(l===27&&Br(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Mc(t,i,a),t=t.sibling;t!==null;)Mc(t,i,a),t=t.sibling}function f_(t){var i=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);Yt(i,l,a),i[Dt]=t,i[At]=a}catch(d){it(t,t.return,d)}}var or=!1,yt=!1,Id=!1,d_=typeof WeakSet=="function"?WeakSet:Set,zt=null;function rb(t,i){if(t=t.containerInfo,Jd=Wc,t=bg(t),Rf(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var v=0,S=-1,C=-1,H=0,W=0,te=t,Q=null;t:for(;;){for(var Y;te!==a||h!==0&&te.nodeType!==3||(S=v+h),te!==d||l!==0&&te.nodeType!==3||(C=v+l),te.nodeType===3&&(v+=te.nodeValue.length),(Y=te.firstChild)!==null;)Q=te,te=Y;for(;;){if(te===t)break t;if(Q===a&&++H===h&&(S=v),Q===d&&++W===l&&(C=v),(Y=te.nextSibling)!==null)break;te=Q,Q=te.parentNode}te=Y}a=S===-1||C===-1?null:{start:S,end:C}}else a=null}a=a||{start:0,end:0}}else a=null;for(Zd={focusedElem:t,selectionRange:a},Wc=!1,zt=i;zt!==null;)if(i=zt,t=i.child,(i.subtreeFlags&1024)!==0&&t!==null)t.return=i,zt=t;else for(;zt!==null;){switch(i=zt,d=i.alternate,t=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&d!==null){t=void 0,a=i,h=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var we=Xs(a.type,h,a.elementType===a.type);t=l.getSnapshotBeforeUpdate(we,d),l.__reactInternalSnapshotBeforeUpdate=t}catch(Te){it(a,a.return,Te)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,a=t.nodeType,a===9)nm(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":nm(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=i.sibling,t!==null){t.return=i.return,zt=t;break}zt=i.return}}function m_(t,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Vr(t,a),l&4&&xl(5,a);break;case 1:if(Vr(t,a),l&4)if(t=a.stateNode,i===null)try{t.componentDidMount()}catch(v){it(a,a.return,v)}else{var h=Xs(a.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(h,i,t.__reactInternalSnapshotBeforeUpdate)}catch(v){it(a,a.return,v)}}l&64&&l_(a),l&512&&Il(a,a.return);break;case 3:if(Vr(t,a),l&64&&(t=a.updateQueue,t!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{$g(t,i)}catch(v){it(a,a.return,v)}}break;case 27:i===null&&l&4&&f_(a);case 26:case 5:Vr(t,a),i===null&&l&4&&c_(a),l&512&&Il(a,a.return);break;case 12:Vr(t,a);break;case 13:Vr(t,a),l&4&&y_(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=db.bind(null,a),Db(t,a))));break;case 22:if(l=a.memoizedState!==null||or,!l){i=i!==null&&i.memoizedState!==null||yt,h=or;var d=yt;or=l,(yt=i)&&!d?Pr(t,a,(a.subtreeFlags&8772)!==0):Vr(t,a),or=h,yt=d}break;case 30:break;default:Vr(t,a)}}function p_(t){var i=t.alternate;i!==null&&(t.alternate=null,p_(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&Sr(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var ut=null,fn=!1;function lr(t,i,a){for(a=a.child;a!==null;)g_(t,i,a),a=a.sibling}function g_(t,i,a){if($e&&typeof $e.onCommitFiberUnmount=="function")try{$e.onCommitFiberUnmount(ft,a)}catch{}switch(a.tag){case 26:yt||bi(a,i),lr(t,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:yt||bi(a,i);var l=ut,h=fn;Br(a.type)&&(ut=a.stateNode,fn=!1),lr(t,i,a),Ll(a.stateNode),ut=l,fn=h;break;case 5:yt||bi(a,i);case 6:if(l=ut,h=fn,ut=null,lr(t,i,a),ut=l,fn=h,ut!==null)if(fn)try{(ut.nodeType===9?ut.body:ut.nodeName==="HTML"?ut.ownerDocument.body:ut).removeChild(a.stateNode)}catch(d){it(a,i,d)}else try{ut.removeChild(a.stateNode)}catch(d){it(a,i,d)}break;case 18:ut!==null&&(fn?(t=ut,rv(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Gl(t)):rv(ut,a.stateNode));break;case 4:l=ut,h=fn,ut=a.stateNode.containerInfo,fn=!0,lr(t,i,a),ut=l,fn=h;break;case 0:case 11:case 14:case 15:yt||Mr(2,a,i),yt||Mr(4,a,i),lr(t,i,a);break;case 1:yt||(bi(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&u_(a,i,l)),lr(t,i,a);break;case 21:lr(t,i,a);break;case 22:yt=(l=yt)||a.memoizedState!==null,lr(t,i,a),yt=l;break;default:lr(t,i,a)}}function y_(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Gl(t)}catch(a){it(i,i.return,a)}}function sb(t){switch(t.tag){case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new d_),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new d_),i;default:throw Error(s(435,t.tag))}}function Cd(t,i){var a=sb(t);i.forEach(function(l){var h=mb.bind(null,t,l);a.has(l)||(a.add(l),l.then(h,h))})}function Tn(t,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],d=t,v=i,S=v;e:for(;S!==null;){switch(S.tag){case 27:if(Br(S.type)){ut=S.stateNode,fn=!1;break e}break;case 5:ut=S.stateNode,fn=!1;break e;case 3:case 4:ut=S.stateNode.containerInfo,fn=!0;break e}S=S.return}if(ut===null)throw Error(s(160));g_(d,v,h),ut=null,fn=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)__(i,t),i=i.sibling}var ti=null;function __(t,i){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Tn(i,t),Sn(t),l&4&&(Mr(3,t,t.return),xl(3,t),Mr(5,t,t.return));break;case 1:Tn(i,t),Sn(t),l&512&&(yt||a===null||bi(a,a.return)),l&64&&or&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=ti;if(Tn(i,t),Sn(t),l&512&&(yt||a===null||bi(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":d=h.getElementsByTagName("title")[0],(!d||d[ws]||d[Dt]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(l),h.head.insertBefore(d,h.querySelector("head > title"))),Yt(d,l,a),d[Dt]=t,pt(d),l=d;break e;case"link":var v=fv("link","href",h).get(l+(a.href||""));if(v){for(var S=0;S<v.length;S++)if(d=v[S],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(S,1);break t}}d=h.createElement(l),Yt(d,l,a),h.head.appendChild(d);break;case"meta":if(v=fv("meta","content",h).get(l+(a.content||""))){for(S=0;S<v.length;S++)if(d=v[S],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(S,1);break t}}d=h.createElement(l),Yt(d,l,a),h.head.appendChild(d);break;default:throw Error(s(468,l))}d[Dt]=t,pt(d),l=d}t.stateNode=l}else dv(h,t.type,t.stateNode);else t.stateNode=hv(h,l,t.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?dv(h,t.type,t.stateNode):hv(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&wd(t,t.memoizedProps,a.memoizedProps)}break;case 27:Tn(i,t),Sn(t),l&512&&(yt||a===null||bi(a,a.return)),a!==null&&l&4&&wd(t,t.memoizedProps,a.memoizedProps);break;case 5:if(Tn(i,t),Sn(t),l&512&&(yt||a===null||bi(a,a.return)),t.flags&32){h=t.stateNode;try{Nn(h,"")}catch(Y){it(t,t.return,Y)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,wd(t,h,a!==null?a.memoizedProps:h)),l&1024&&(Id=!0);break;case 6:if(Tn(i,t),Sn(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(Y){it(t,t.return,Y)}}break;case 3:if(Kc=null,h=ti,ti=Qc(i.containerInfo),Tn(i,t),ti=h,Sn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Gl(i.containerInfo)}catch(Y){it(t,t.return,Y)}Id&&(Id=!1,v_(t));break;case 4:l=ti,ti=Qc(t.stateNode.containerInfo),Tn(i,t),Sn(t),ti=l;break;case 12:Tn(i,t),Sn(t);break;case 13:Tn(i,t),Sn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Pd=In()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Cd(t,l)));break;case 22:h=t.memoizedState!==null;var C=a!==null&&a.memoizedState!==null,H=or,W=yt;if(or=H||h,yt=W||C,Tn(i,t),yt=W,or=H,Sn(t),l&8192)e:for(i=t.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||C||or||yt||Ws(t)),a=null,i=t;;){if(i.tag===5||i.tag===26){if(a===null){C=a=i;try{if(d=C.stateNode,h)v=d.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{S=C.stateNode;var te=C.memoizedProps.style,Q=te!=null&&te.hasOwnProperty("display")?te.display:null;S.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(Y){it(C,C.return,Y)}}}else if(i.tag===6){if(a===null){C=i;try{C.stateNode.nodeValue=h?"":C.memoizedProps}catch(Y){it(C,C.return,Y)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Cd(t,a))));break;case 19:Tn(i,t),Sn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Cd(t,l)));break;case 30:break;case 21:break;default:Tn(i,t),Sn(t)}}function Sn(t){var i=t.flags;if(i&2){try{for(var a,l=t.return;l!==null;){if(h_(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,d=Rd(t);Mc(t,d,h);break;case 5:var v=a.stateNode;a.flags&32&&(Nn(v,""),a.flags&=-33);var S=Rd(t);Mc(t,S,v);break;case 3:case 4:var C=a.stateNode.containerInfo,H=Rd(t);xd(t,H,C);break;default:throw Error(s(161))}}catch(W){it(t,t.return,W)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function v_(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;v_(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function Vr(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)m_(t,i.alternate,i),i=i.sibling}function Ws(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:Mr(4,i,i.return),Ws(i);break;case 1:bi(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&u_(i,i.return,a),Ws(i);break;case 27:Ll(i.stateNode);case 26:case 5:bi(i,i.return),Ws(i);break;case 22:i.memoizedState===null&&Ws(i);break;case 30:Ws(i);break;default:Ws(i)}t=t.sibling}}function Pr(t,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,h=t,d=i,v=d.flags;switch(d.tag){case 0:case 11:case 15:Pr(h,d,a),xl(4,d);break;case 1:if(Pr(h,d,a),l=d,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(H){it(l,l.return,H)}if(l=d,h=l.updateQueue,h!==null){var S=l.stateNode;try{var C=h.shared.hiddenCallbacks;if(C!==null)for(h.shared.hiddenCallbacks=null,h=0;h<C.length;h++)Kg(C[h],S)}catch(H){it(l,l.return,H)}}a&&v&64&&l_(d),Il(d,d.return);break;case 27:f_(d);case 26:case 5:Pr(h,d,a),a&&l===null&&v&4&&c_(d),Il(d,d.return);break;case 12:Pr(h,d,a);break;case 13:Pr(h,d,a),a&&v&4&&y_(h,d);break;case 22:d.memoizedState===null&&Pr(h,d,a),Il(d,d.return);break;case 30:break;default:Pr(h,d,a)}i=i.sibling}}function Nd(t,i){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&dl(a))}function Dd(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&dl(t))}function wi(t,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)E_(t,i,a,l),i=i.sibling}function E_(t,i,a,l){var h=i.flags;switch(i.tag){case 0:case 11:case 15:wi(t,i,a,l),h&2048&&xl(9,i);break;case 1:wi(t,i,a,l);break;case 3:wi(t,i,a,l),h&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&dl(t)));break;case 12:if(h&2048){wi(t,i,a,l),t=i.stateNode;try{var d=i.memoizedProps,v=d.id,S=d.onPostCommit;typeof S=="function"&&S(v,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(C){it(i,i.return,C)}}else wi(t,i,a,l);break;case 13:wi(t,i,a,l);break;case 23:break;case 22:d=i.stateNode,v=i.alternate,i.memoizedState!==null?d._visibility&2?wi(t,i,a,l):Cl(t,i):d._visibility&2?wi(t,i,a,l):(d._visibility|=2,Wa(t,i,a,l,(i.subtreeFlags&10256)!==0)),h&2048&&Nd(v,i);break;case 24:wi(t,i,a,l),h&2048&&Dd(i.alternate,i);break;default:wi(t,i,a,l)}}function Wa(t,i,a,l,h){for(h=h&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var d=t,v=i,S=a,C=l,H=v.flags;switch(v.tag){case 0:case 11:case 15:Wa(d,v,S,C,h),xl(8,v);break;case 23:break;case 22:var W=v.stateNode;v.memoizedState!==null?W._visibility&2?Wa(d,v,S,C,h):Cl(d,v):(W._visibility|=2,Wa(d,v,S,C,h)),h&&H&2048&&Nd(v.alternate,v);break;case 24:Wa(d,v,S,C,h),h&&H&2048&&Dd(v.alternate,v);break;default:Wa(d,v,S,C,h)}i=i.sibling}}function Cl(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=t,l=i,h=l.flags;switch(l.tag){case 22:Cl(a,l),h&2048&&Nd(l.alternate,l);break;case 24:Cl(a,l),h&2048&&Dd(l.alternate,l);break;default:Cl(a,l)}i=i.sibling}}var Nl=8192;function Ja(t){if(t.subtreeFlags&Nl)for(t=t.child;t!==null;)T_(t),t=t.sibling}function T_(t){switch(t.tag){case 26:Ja(t),t.flags&Nl&&t.memoizedState!==null&&Fb(ti,t.memoizedState,t.memoizedProps);break;case 5:Ja(t);break;case 3:case 4:var i=ti;ti=Qc(t.stateNode.containerInfo),Ja(t),ti=i;break;case 22:t.memoizedState===null&&(i=t.alternate,i!==null&&i.memoizedState!==null?(i=Nl,Nl=16777216,Ja(t),Nl=i):Ja(t));break;default:Ja(t)}}function S_(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function Dl(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];zt=l,b_(l,t)}S_(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)A_(t),t=t.sibling}function A_(t){switch(t.tag){case 0:case 11:case 15:Dl(t),t.flags&2048&&Mr(9,t,t.return);break;case 3:Dl(t);break;case 12:Dl(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,Vc(t)):Dl(t);break;default:Dl(t)}}function Vc(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];zt=l,b_(l,t)}S_(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:Mr(8,i,i.return),Vc(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,Vc(i));break;default:Vc(i)}t=t.sibling}}function b_(t,i){for(;zt!==null;){var a=zt;switch(a.tag){case 0:case 11:case 15:Mr(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:dl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,zt=l;else e:for(a=t;zt!==null;){l=zt;var h=l.sibling,d=l.return;if(p_(l),l===a){zt=null;break e}if(h!==null){h.return=d,zt=h;break e}zt=d}}}var ab={getCacheForType:function(t){var i=Jt(Vt),a=i.data.get(t);return a===void 0&&(a=t(),i.data.set(t,a)),a}},ob=typeof WeakMap=="function"?WeakMap:Map,Xe=0,st=null,Ve=null,qe=0,We=0,An=null,kr=!1,Za=!1,Od=!1,ur=0,mt=0,Lr=0,Js=0,Md=0,jn=0,eo=0,Ol=null,dn=null,Vd=!1,Pd=0,Pc=1/0,kc=null,Ur=null,Qt=0,jr=null,to=null,no=0,kd=0,Ld=null,w_=null,Ml=0,Ud=null;function bn(){if((Xe&2)!==0&&qe!==0)return qe&-qe;if(G.T!==null){var t=Ha;return t!==0?t:Gd()}return Er()}function R_(){jn===0&&(jn=(qe&536870912)===0||Qe?qo():536870912);var t=Un.current;return t!==null&&(t.flags|=32),jn}function wn(t,i,a){(t===st&&(We===2||We===9)||t.cancelPendingCommit!==null)&&(io(t,0),zr(t,qe,jn,!1)),Bi(t,a),((Xe&2)===0||t!==st)&&(t===st&&((Xe&2)===0&&(Js|=a),mt===4&&zr(t,qe,jn,!1)),Ri(t))}function x_(t,i,a){if((Xe&6)!==0)throw Error(s(327));var l=!a&&(i&124)===0&&(i&t.expiredLanes)===0||bs(t,i),h=l?cb(t,i):Bd(t,i,!0),d=l;do{if(h===0){Za&&!l&&zr(t,i,0,!1);break}else{if(a=t.current.alternate,d&&!lb(a)){h=Bd(t,i,!1),d=!1;continue}if(h===2){if(d=i,t.errorRecoveryDisabledLanes&d)var v=0;else v=t.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){i=v;e:{var S=t;h=Ol;var C=S.current.memoizedState.isDehydrated;if(C&&(io(S,v).flags|=256),v=Bd(S,v,!1),v!==2){if(Od&&!C){S.errorRecoveryDisabledLanes|=d,Js|=d,h=4;break e}d=dn,dn=h,d!==null&&(dn===null?dn=d:dn.push.apply(dn,d))}h=v}if(d=!1,h!==2)continue}}if(h===1){io(t,0),zr(t,i,0,!0);break}e:{switch(l=t,d=h,d){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:zr(l,i,jn,!kr);break e;case 2:dn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(h=Pd+300-In(),10<h)){if(zr(l,i,jn,!kr),Ea(l,0,!0)!==0)break e;l.timeoutHandle=nv(I_.bind(null,l,a,dn,kc,Vd,i,jn,Js,eo,kr,d,2,-0,0),h);break e}I_(l,a,dn,kc,Vd,i,jn,Js,eo,kr,d,0,-0,0)}}break}while(!0);Ri(t)}function I_(t,i,a,l,h,d,v,S,C,H,W,te,Q,Y){if(t.timeoutHandle=-1,te=i.subtreeFlags,(te&8192||(te&16785408)===16785408)&&(zl={stylesheets:null,count:0,unsuspend:Hb},T_(i),te=Gb(),te!==null)){t.cancelPendingCommit=te(P_.bind(null,t,i,d,a,l,h,v,S,C,W,1,Q,Y)),zr(t,d,v,!H);return}P_(t,i,d,a,l,h,v,S,C)}function lb(t){for(var i=t;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],d=h.getSnapshot;h=h.value;try{if(!vn(d(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function zr(t,i,a,l){i&=~Md,i&=~Js,t.suspendedLanes|=i,t.pingedLanes&=~i,l&&(t.warmLanes|=i),l=t.expirationTimes;for(var h=i;0<h;){var d=31-Wt(h),v=1<<d;l[d]=-1,h&=~v}a!==0&&hi(t,a,i)}function Lc(){return(Xe&6)===0?(Vl(0),!1):!0}function jd(){if(Ve!==null){if(We===0)var t=Ve.return;else t=Ve,tr=Qs=null,nd(t),$a=null,bl=0,t=Ve;for(;t!==null;)o_(t.alternate,t),t=t.return;Ve=null}}function io(t,i){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,Rb(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),jd(),st=t,Ve=a=Ji(t.current,null),qe=i,We=0,An=null,kr=!1,Za=bs(t,i),Od=!1,eo=jn=Md=Js=Lr=mt=0,dn=Ol=null,Vd=!1,(i&8)!==0&&(i|=i&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=i;0<l;){var h=31-Wt(l),d=1<<h;i|=t[h],l&=~d}return ur=i,sc(),a}function C_(t,i){Oe=null,G.H=bc,i===pl||i===mc?(i=Qg(),We=3):i===Hg?(i=Qg(),We=4):We=i===Yy?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,An=i,Ve===null&&(mt=1,Cc(t,Vn(i,t.current)))}function N_(){var t=G.H;return G.H=bc,t===null?bc:t}function D_(){var t=G.A;return G.A=ab,t}function zd(){mt=4,kr||(qe&4194048)!==qe&&Un.current!==null||(Za=!0),(Lr&134217727)===0&&(Js&134217727)===0||st===null||zr(st,qe,jn,!1)}function Bd(t,i,a){var l=Xe;Xe|=2;var h=N_(),d=D_();(st!==t||qe!==i)&&(kc=null,io(t,i)),i=!1;var v=mt;e:do try{if(We!==0&&Ve!==null){var S=Ve,C=An;switch(We){case 8:jd(),v=6;break e;case 3:case 2:case 9:case 6:Un.current===null&&(i=!0);var H=We;if(We=0,An=null,ro(t,S,C,H),a&&Za){v=0;break e}break;default:H=We,We=0,An=null,ro(t,S,C,H)}}ub(),v=mt;break}catch(W){C_(t,W)}while(!0);return i&&t.shellSuspendCounter++,tr=Qs=null,Xe=l,G.H=h,G.A=d,Ve===null&&(st=null,qe=0,sc()),v}function ub(){for(;Ve!==null;)O_(Ve)}function cb(t,i){var a=Xe;Xe|=2;var l=N_(),h=D_();st!==t||qe!==i?(kc=null,Pc=In()+500,io(t,i)):Za=bs(t,i);e:do try{if(We!==0&&Ve!==null){i=Ve;var d=An;t:switch(We){case 1:We=0,An=null,ro(t,i,d,1);break;case 2:case 9:if(Fg(d)){We=0,An=null,M_(i);break}i=function(){We!==2&&We!==9||st!==t||(We=7),Ri(t)},d.then(i,i);break e;case 3:We=7;break e;case 4:We=5;break e;case 7:Fg(d)?(We=0,An=null,M_(i)):(We=0,An=null,ro(t,i,d,7));break;case 5:var v=null;switch(Ve.tag){case 26:v=Ve.memoizedState;case 5:case 27:var S=Ve;if(!v||mv(v)){We=0,An=null;var C=S.sibling;if(C!==null)Ve=C;else{var H=S.return;H!==null?(Ve=H,Uc(H)):Ve=null}break t}}We=0,An=null,ro(t,i,d,5);break;case 6:We=0,An=null,ro(t,i,d,6);break;case 8:jd(),mt=6;break e;default:throw Error(s(462))}}hb();break}catch(W){C_(t,W)}while(!0);return tr=Qs=null,G.H=l,G.A=h,Xe=a,Ve!==null?0:(st=null,qe=0,sc(),mt)}function hb(){for(;Ve!==null&&!Uo();)O_(Ve)}function O_(t){var i=s_(t.alternate,t,ur);t.memoizedProps=t.pendingProps,i===null?Uc(t):Ve=i}function M_(t){var i=t,a=i.alternate;switch(i.tag){case 15:case 0:i=Zy(a,i,i.pendingProps,i.type,void 0,qe);break;case 11:i=Zy(a,i,i.pendingProps,i.type.render,i.ref,qe);break;case 5:nd(i);default:o_(a,i),i=Ve=Vg(i,ur),i=s_(a,i,ur)}t.memoizedProps=t.pendingProps,i===null?Uc(t):Ve=i}function ro(t,i,a,l){tr=Qs=null,nd(i),$a=null,bl=0;var h=i.return;try{if(eb(t,h,i,a,qe)){mt=1,Cc(t,Vn(a,t.current)),Ve=null;return}}catch(d){if(h!==null)throw Ve=h,d;mt=1,Cc(t,Vn(a,t.current)),Ve=null;return}i.flags&32768?(Qe||l===1?t=!0:Za||(qe&536870912)!==0?t=!1:(kr=t=!0,(l===2||l===9||l===3||l===6)&&(l=Un.current,l!==null&&l.tag===13&&(l.flags|=16384))),V_(i,t)):Uc(i)}function Uc(t){var i=t;do{if((i.flags&32768)!==0){V_(i,kr);return}t=i.return;var a=nb(i.alternate,i,ur);if(a!==null){Ve=a;return}if(i=i.sibling,i!==null){Ve=i;return}Ve=i=t}while(i!==null);mt===0&&(mt=5)}function V_(t,i){do{var a=ib(t.alternate,t);if(a!==null){a.flags&=32767,Ve=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(t=t.sibling,t!==null)){Ve=t;return}Ve=t=a}while(t!==null);mt=6,Ve=null}function P_(t,i,a,l,h,d,v,S,C){t.cancelPendingCommit=null;do jc();while(Qt!==0);if((Xe&6)!==0)throw Error(s(327));if(i!==null){if(i===t.current)throw Error(s(177));if(d=i.lanes|i.childLanes,d|=Df,Fo(t,a,d,v,S,C),t===st&&(Ve=st=null,qe=0),to=i,jr=t,no=a,kd=d,Ld=h,w_=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,pb(Es,function(){return z_(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=G.T,G.T=null,h=X.p,X.p=2,v=Xe,Xe|=4;try{rb(t,i,a)}finally{Xe=v,X.p=h,G.T=l}}Qt=1,k_(),L_(),U_()}}function k_(){if(Qt===1){Qt=0;var t=jr,i=to,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=G.T,G.T=null;var l=X.p;X.p=2;var h=Xe;Xe|=4;try{__(i,t);var d=Zd,v=bg(t.containerInfo),S=d.focusedElem,C=d.selectionRange;if(v!==S&&S&&S.ownerDocument&&Ag(S.ownerDocument.documentElement,S)){if(C!==null&&Rf(S)){var H=C.start,W=C.end;if(W===void 0&&(W=H),"selectionStart"in S)S.selectionStart=H,S.selectionEnd=Math.min(W,S.value.length);else{var te=S.ownerDocument||document,Q=te&&te.defaultView||window;if(Q.getSelection){var Y=Q.getSelection(),we=S.textContent.length,Te=Math.min(C.start,we),tt=C.end===void 0?Te:Math.min(C.end,we);!Y.extend&&Te>tt&&(v=tt,tt=Te,Te=v);var j=Sg(S,Te),P=Sg(S,tt);if(j&&P&&(Y.rangeCount!==1||Y.anchorNode!==j.node||Y.anchorOffset!==j.offset||Y.focusNode!==P.node||Y.focusOffset!==P.offset)){var q=te.createRange();q.setStart(j.node,j.offset),Y.removeAllRanges(),Te>tt?(Y.addRange(q),Y.extend(P.node,P.offset)):(q.setEnd(P.node,P.offset),Y.addRange(q))}}}}for(te=[],Y=S;Y=Y.parentNode;)Y.nodeType===1&&te.push({element:Y,left:Y.scrollLeft,top:Y.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<te.length;S++){var J=te[S];J.element.scrollLeft=J.left,J.element.scrollTop=J.top}}Wc=!!Jd,Zd=Jd=null}finally{Xe=h,X.p=l,G.T=a}}t.current=i,Qt=2}}function L_(){if(Qt===2){Qt=0;var t=jr,i=to,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=G.T,G.T=null;var l=X.p;X.p=2;var h=Xe;Xe|=4;try{m_(t,i.alternate,i)}finally{Xe=h,X.p=l,G.T=a}}Qt=3}}function U_(){if(Qt===4||Qt===3){Qt=0,Vu();var t=jr,i=to,a=no,l=w_;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Qt=5:(Qt=0,to=jr=null,j_(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(Ur=null),Ta(a),i=i.stateNode,$e&&typeof $e.onCommitFiberRoot=="function")try{$e.onCommitFiberRoot(ft,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=G.T,h=X.p,X.p=2,G.T=null;try{for(var d=t.onRecoverableError,v=0;v<l.length;v++){var S=l[v];d(S.value,{componentStack:S.stack})}}finally{G.T=i,X.p=h}}(no&3)!==0&&jc(),Ri(t),h=t.pendingLanes,(a&4194090)!==0&&(h&42)!==0?t===Ud?Ml++:(Ml=0,Ud=t):Ml=0,Vl(0)}}function j_(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,dl(i)))}function jc(t){return k_(),L_(),U_(),z_()}function z_(){if(Qt!==5)return!1;var t=jr,i=kd;kd=0;var a=Ta(no),l=G.T,h=X.p;try{X.p=32>a?32:a,G.T=null,a=Ld,Ld=null;var d=jr,v=no;if(Qt=0,to=jr=null,no=0,(Xe&6)!==0)throw Error(s(331));var S=Xe;if(Xe|=4,A_(d.current),E_(d,d.current,v,a),Xe=S,Vl(0,!1),$e&&typeof $e.onPostCommitFiberRoot=="function")try{$e.onPostCommitFiberRoot(ft,d)}catch{}return!0}finally{X.p=h,G.T=l,j_(t,i)}}function B_(t,i,a){i=Vn(a,i),i=gd(t.stateNode,i,2),t=Cr(t,i,2),t!==null&&(Bi(t,2),Ri(t))}function it(t,i,a){if(t.tag===3)B_(t,t,a);else for(;i!==null;){if(i.tag===3){B_(i,t,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Ur===null||!Ur.has(l))){t=Vn(a,t),a=Gy(2),l=Cr(i,a,2),l!==null&&(Qy(a,l,i,t),Bi(l,2),Ri(l));break}}i=i.return}}function qd(t,i,a){var l=t.pingCache;if(l===null){l=t.pingCache=new ob;var h=new Set;l.set(i,h)}else h=l.get(i),h===void 0&&(h=new Set,l.set(i,h));h.has(a)||(Od=!0,h.add(a),t=fb.bind(null,t,i,a),i.then(t,t))}function fb(t,i,a){var l=t.pingCache;l!==null&&l.delete(i),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,st===t&&(qe&a)===a&&(mt===4||mt===3&&(qe&62914560)===qe&&300>In()-Pd?(Xe&2)===0&&io(t,0):Md|=a,eo===qe&&(eo=0)),Ri(t)}function q_(t,i){i===0&&(i=Ho()),t=ja(t,i),t!==null&&(Bi(t,i),Ri(t))}function db(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),q_(t,a)}function mb(t,i){var a=0;switch(t.tag){case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(i),q_(t,a)}function pb(t,i){return _s(t,i)}var zc=null,so=null,Hd=!1,Bc=!1,Fd=!1,Zs=0;function Ri(t){t!==so&&t.next===null&&(so===null?zc=so=t:so=so.next=t),Bc=!0,Hd||(Hd=!0,yb())}function Vl(t,i){if(!Fd&&Bc){Fd=!0;do for(var a=!1,l=zc;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var d=0;else{var v=l.suspendedLanes,S=l.pingedLanes;d=(1<<31-Wt(42|t)+1)-1,d&=h&~(v&~S),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,Q_(l,d))}else d=qe,d=Ea(l,l===st?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||bs(l,d)||(a=!0,Q_(l,d));l=l.next}while(a);Fd=!1}}function gb(){H_()}function H_(){Bc=Hd=!1;var t=0;Zs!==0&&(wb()&&(t=Zs),Zs=0);for(var i=In(),a=null,l=zc;l!==null;){var h=l.next,d=F_(l,i);d===0?(l.next=null,a===null?zc=h:a.next=h,h===null&&(so=a)):(a=l,(t!==0||(d&3)!==0)&&(Bc=!0)),l=h}Vl(t)}function F_(t,i){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var v=31-Wt(d),S=1<<v,C=h[v];C===-1?((S&a)===0||(S&l)!==0)&&(h[v]=Bo(S,i)):C<=i&&(t.expiredLanes|=S),d&=~S}if(i=st,a=qe,a=Ea(t,t===i?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===i&&(We===2||We===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&vs(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||bs(t,a)){if(i=a&-a,i===t.callbackPriority)return i;switch(l!==null&&vs(l),Ta(a)){case 2:case 8:a=_a;break;case 32:a=Es;break;case 268435456:a=va;break;default:a=Es}return l=G_.bind(null,t),a=_s(a,l),t.callbackPriority=i,t.callbackNode=a,i}return l!==null&&l!==null&&vs(l),t.callbackPriority=2,t.callbackNode=null,2}function G_(t,i){if(Qt!==0&&Qt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(jc()&&t.callbackNode!==a)return null;var l=qe;return l=Ea(t,t===st?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(x_(t,l,i),F_(t,In()),t.callbackNode!=null&&t.callbackNode===a?G_.bind(null,t):null)}function Q_(t,i){if(jc())return null;x_(t,i,!0)}function yb(){xb(function(){(Xe&6)!==0?_s(jo,gb):H_()})}function Gd(){return Zs===0&&(Zs=qo()),Zs}function Y_(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:xa(""+t)}function K_(t,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,t.id&&a.setAttribute("form",t.id),i.parentNode.insertBefore(a,i),t=new FormData(t),a.parentNode.removeChild(a),t}function _b(t,i,a,l,h){if(i==="submit"&&a&&a.stateNode===h){var d=Y_((h[At]||null).action),v=l.submitter;v&&(i=(i=v[At]||null)?Y_(i.formAction):v.getAttribute("formAction"),i!==null&&(d=i,v=null));var S=new Ia("action","action",null,l,h);t.push({event:S,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Zs!==0){var C=v?K_(h,v):new FormData(h);hd(a,{pending:!0,data:C,method:h.method,action:d},null,C)}}else typeof d=="function"&&(S.preventDefault(),C=v?K_(h,v):new FormData(h),hd(a,{pending:!0,data:C,method:h.method,action:d},d,C))},currentTarget:h}]})}}for(var Qd=0;Qd<Nf.length;Qd++){var Yd=Nf[Qd],vb=Yd.toLowerCase(),Eb=Yd[0].toUpperCase()+Yd.slice(1);ei(vb,"on"+Eb)}ei(xg,"onAnimationEnd"),ei(Ig,"onAnimationIteration"),ei(Cg,"onAnimationStart"),ei("dblclick","onDoubleClick"),ei("focusin","onFocus"),ei("focusout","onBlur"),ei(LA,"onTransitionRun"),ei(UA,"onTransitionStart"),ei(jA,"onTransitionCancel"),ei(Ng,"onTransitionEnd"),Hi("onMouseEnter",["mouseout","mouseover"]),Hi("onMouseLeave",["mouseout","mouseover"]),Hi("onPointerEnter",["pointerout","pointerover"]),Hi("onPointerLeave",["pointerout","pointerover"]),Jn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Jn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Jn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Jn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Jn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Jn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Tb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Pl));function $_(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var d=void 0;if(i)for(var v=l.length-1;0<=v;v--){var S=l[v],C=S.instance,H=S.currentTarget;if(S=S.listener,C!==d&&h.isPropagationStopped())break e;d=S,h.currentTarget=H;try{d(h)}catch(W){Ic(W)}h.currentTarget=null,d=C}else for(v=0;v<l.length;v++){if(S=l[v],C=S.instance,H=S.currentTarget,S=S.listener,C!==d&&h.isPropagationStopped())break e;d=S,h.currentTarget=H;try{d(h)}catch(W){Ic(W)}h.currentTarget=null,d=C}}}}function Pe(t,i){var a=i[Qo];a===void 0&&(a=i[Qo]=new Set);var l=t+"__bubble";a.has(l)||(X_(i,t,2,!1),a.add(l))}function Kd(t,i,a){var l=0;i&&(l|=4),X_(a,t,l,i)}var qc="_reactListening"+Math.random().toString(36).slice(2);function $d(t){if(!t[qc]){t[qc]=!0,Yo.forEach(function(a){a!=="selectionchange"&&(Tb.has(a)||Kd(a,!1,t),Kd(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[qc]||(i[qc]=!0,Kd("selectionchange",!1,i))}}function X_(t,i,a,l){switch(Ev(i)){case 2:var h=Kb;break;case 8:h=$b;break;default:h=um}a=h.bind(null,i,a,t),h=void 0,!On||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(i,a,{capture:!0,passive:h}):t.addEventListener(i,a,!0):h!==void 0?t.addEventListener(i,a,{passive:h}):t.addEventListener(i,a,!1)}function Xd(t,i,a,l,h){var d=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var v=l.tag;if(v===3||v===4){var S=l.stateNode.containerInfo;if(S===h)break;if(v===4)for(v=l.return;v!==null;){var C=v.tag;if((C===3||C===4)&&v.stateNode.containerInfo===h)return;v=v.return}for(;S!==null;){if(v=qi(S),v===null)return;if(C=v.tag,C===5||C===6||C===26||C===27){l=d=v;continue e}S=S.parentNode}}l=l.return}Fu(function(){var H=d,W=Dn(a),te=[];e:{var Q=Dg.get(t);if(Q!==void 0){var Y=Ia,we=t;switch(t){case"keypress":if(yi(a)===0)break e;case"keydown":case"keyup":Y=Va;break;case"focusin":we="focus",Y=Da;break;case"focusout":we="blur",Y=Da;break;case"beforeblur":case"afterblur":Y=Da;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=Mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=Sf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=Ju;break;case xg:case Ig:case Cg:Y=Oa;break;case Ng:Y=ec;break;case"scroll":case"scrollend":Y=Gu;break;case"wheel":Y=Pa;break;case"copy":case"cut":case"paste":Y=Ma;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=sl;break;case"toggle":case"beforetoggle":Y=nc}var Te=(i&4)!==0,tt=!Te&&(t==="scroll"||t==="scrollend"),j=Te?Q!==null?Q+"Capture":null:Q;Te=[];for(var P=H,q;P!==null;){var J=P;if(q=J.stateNode,J=J.tag,J!==5&&J!==26&&J!==27||q===null||j===null||(J=Os(P,j),J!=null&&Te.push(kl(P,J,q))),tt)break;P=P.return}0<Te.length&&(Q=new Y(Q,we,null,a,W),te.push({event:Q,listeners:Te}))}}if((i&7)===0){e:{if(Q=t==="mouseover"||t==="pointerover",Y=t==="mouseout"||t==="pointerout",Q&&a!==Qi&&(we=a.relatedTarget||a.fromElement)&&(qi(we)||we[Cn]))break e;if((Y||Q)&&(Q=W.window===W?W:(Q=W.ownerDocument)?Q.defaultView||Q.parentWindow:window,Y?(we=a.relatedTarget||a.toElement,Y=H,we=we?qi(we):null,we!==null&&(tt=u(we),Te=we.tag,we!==tt||Te!==5&&Te!==27&&Te!==6)&&(we=null)):(Y=null,we=H),Y!==we)){if(Te=Mn,J="onMouseLeave",j="onMouseEnter",P="mouse",(t==="pointerout"||t==="pointerover")&&(Te=sl,J="onPointerLeave",j="onPointerEnter",P="pointer"),tt=Y==null?Q:di(Y),q=we==null?Q:di(we),Q=new Te(J,P+"leave",Y,a,W),Q.target=tt,Q.relatedTarget=q,J=null,qi(W)===H&&(Te=new Te(j,P+"enter",we,a,W),Te.target=q,Te.relatedTarget=tt,J=Te),tt=J,Y&&we)t:{for(Te=Y,j=we,P=0,q=Te;q;q=ao(q))P++;for(q=0,J=j;J;J=ao(J))q++;for(;0<P-q;)Te=ao(Te),P--;for(;0<q-P;)j=ao(j),q--;for(;P--;){if(Te===j||j!==null&&Te===j.alternate)break t;Te=ao(Te),j=ao(j)}Te=null}else Te=null;Y!==null&&W_(te,Q,Y,Te,!1),we!==null&&tt!==null&&W_(te,tt,we,Te,!0)}}e:{if(Q=H?di(H):window,Y=Q.nodeName&&Q.nodeName.toLowerCase(),Y==="select"||Y==="input"&&Q.type==="file")var ge=gg;else if(Mt(Q))if(yg)ge=VA;else{ge=OA;var Me=DA}else Y=Q.nodeName,!Y||Y.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?H&&Jo(H.elementType)&&(ge=gg):ge=MA;if(ge&&(ge=ge(t,H))){Wi(te,ge,a,W);break e}Me&&Me(t,Q,H),t==="focusout"&&H&&Q.type==="number"&&H.memoizedProps.value!=null&&br(Q,"number",Q.value)}switch(Me=H?di(H):window,t){case"focusin":(Mt(Me)||Me.contentEditable==="true")&&(ka=Me,xf=H,ll=null);break;case"focusout":ll=xf=ka=null;break;case"mousedown":If=!0;break;case"contextmenu":case"mouseup":case"dragend":If=!1,wg(te,a,W);break;case"selectionchange":if(kA)break;case"keydown":case"keyup":wg(te,a,W)}var _e;if(Ei)e:{switch(t){case"compositionstart":var Se="onCompositionStart";break e;case"compositionend":Se="onCompositionEnd";break e;case"compositionupdate":Se="onCompositionUpdate";break e}Se=void 0}else ze?K(t,a)&&(Se="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Se="onCompositionStart");Se&&(_&&a.locale!=="ko"&&(ze||Se!=="onCompositionStart"?Se==="onCompositionEnd"&&ze&&(_e=el()):(gi=W,wr="value"in gi?gi.value:gi.textContent,ze=!0)),Me=Hc(H,Se),0<Me.length&&(Se=new il(Se,t,null,a,W),te.push({event:Se,listeners:Me}),_e?Se.data=_e:(_e=oe(a),_e!==null&&(Se.data=_e)))),(_e=g?Ot(t,a):Be(t,a))&&(Se=Hc(H,"onBeforeInput"),0<Se.length&&(Me=new il("onBeforeInput","beforeinput",null,a,W),te.push({event:Me,listeners:Se}),Me.data=_e)),_b(te,t,H,a,W)}$_(te,i)})}function kl(t,i,a){return{instance:t,listener:i,currentTarget:a}}function Hc(t,i){for(var a=i+"Capture",l=[];t!==null;){var h=t,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=Os(t,a),h!=null&&l.unshift(kl(t,h,d)),h=Os(t,i),h!=null&&l.push(kl(t,h,d))),t.tag===3)return l;t=t.return}return[]}function ao(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function W_(t,i,a,l,h){for(var d=i._reactName,v=[];a!==null&&a!==l;){var S=a,C=S.alternate,H=S.stateNode;if(S=S.tag,C!==null&&C===l)break;S!==5&&S!==26&&S!==27||H===null||(C=H,h?(H=Os(a,d),H!=null&&v.unshift(kl(a,H,C))):h||(H=Os(a,d),H!=null&&v.push(kl(a,H,C)))),a=a.return}v.length!==0&&t.push({event:i,listeners:v})}var Sb=/\r\n?/g,Ab=/\u0000|\uFFFD/g;function J_(t){return(typeof t=="string"?t:""+t).replace(Sb,`
`).replace(Ab,"")}function Z_(t,i){return i=J_(i),J_(t)===i}function Fc(){}function et(t,i,a,l,h,d){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||Nn(t,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&Nn(t,""+l);break;case"className":mi(t,"class",l);break;case"tabIndex":mi(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":mi(t,a,l);break;case"style":Wo(t,l,d);break;case"data":if(i!=="object"){mi(t,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=xa(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&et(t,i,"name",h.name,h,null),et(t,i,"formEncType",h.formEncType,h,null),et(t,i,"formMethod",h.formMethod,h,null),et(t,i,"formTarget",h.formTarget,h,null)):(et(t,i,"encType",h.encType,h,null),et(t,i,"method",h.method,h,null),et(t,i,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=xa(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=Fc);break;case"onScroll":l!=null&&Pe("scroll",t);break;case"onScrollEnd":l!=null&&Pe("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=xa(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":Pe("beforetoggle",t),Pe("toggle",t),Ar(t,"popover",l);break;case"xlinkActuate":Ht(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Ht(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Ht(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Ht(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Ht(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Ht(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Ht(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Ht(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Ht(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Ar(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Ef.get(a)||a,Ar(t,a,l))}}function Wd(t,i,a,l,h,d){switch(a){case"style":Wo(t,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof l=="string"?Nn(t,l):(typeof l=="number"||typeof l=="bigint")&&Nn(t,""+l);break;case"onScroll":l!=null&&Pe("scroll",t);break;case"onScrollEnd":l!=null&&Pe("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Fc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Sa.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),d=t[At]||null,d=d!=null?d[a]:null,typeof d=="function"&&t.removeEventListener(i,d,h),typeof l=="function")){typeof d!="function"&&d!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(i,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):Ar(t,a,l)}}}function Yt(t,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Pe("error",t),Pe("load",t);var l=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var v=a[d];if(v!=null)switch(d){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:et(t,i,d,v,a,null)}}h&&et(t,i,"srcSet",a.srcSet,a,null),l&&et(t,i,"src",a.src,a,null);return;case"input":Pe("invalid",t);var S=d=v=h=null,C=null,H=null;for(l in a)if(a.hasOwnProperty(l)){var W=a[l];if(W!=null)switch(l){case"name":h=W;break;case"type":v=W;break;case"checked":C=W;break;case"defaultChecked":H=W;break;case"value":d=W;break;case"defaultValue":S=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(s(137,i));break;default:et(t,i,l,W,a,null)}}Cs(t,d,S,C,H,v,h,!1),Ra(t);return;case"select":Pe("invalid",t),l=v=d=null;for(h in a)if(a.hasOwnProperty(h)&&(S=a[h],S!=null))switch(h){case"value":d=S;break;case"defaultValue":v=S;break;case"multiple":l=S;default:et(t,i,h,S,a,null)}i=d,a=v,t.multiple=!!l,i!=null?Gi(t,!!l,i,!1):a!=null&&Gi(t,!!l,a,!0);return;case"textarea":Pe("invalid",t),d=h=l=null;for(v in a)if(a.hasOwnProperty(v)&&(S=a[v],S!=null))switch(v){case"value":l=S;break;case"defaultValue":h=S;break;case"children":d=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(s(91));break;default:et(t,i,v,S,a,null)}Ns(t,l,h,d),Ra(t);return;case"option":for(C in a)if(a.hasOwnProperty(C)&&(l=a[C],l!=null))switch(C){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:et(t,i,C,l,a,null)}return;case"dialog":Pe("beforetoggle",t),Pe("toggle",t),Pe("cancel",t),Pe("close",t);break;case"iframe":case"object":Pe("load",t);break;case"video":case"audio":for(l=0;l<Pl.length;l++)Pe(Pl[l],t);break;case"image":Pe("error",t),Pe("load",t);break;case"details":Pe("toggle",t);break;case"embed":case"source":case"link":Pe("error",t),Pe("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in a)if(a.hasOwnProperty(H)&&(l=a[H],l!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:et(t,i,H,l,a,null)}return;default:if(Jo(i)){for(W in a)a.hasOwnProperty(W)&&(l=a[W],l!==void 0&&Wd(t,i,W,l,a,void 0));return}}for(S in a)a.hasOwnProperty(S)&&(l=a[S],l!=null&&et(t,i,S,l,a,null))}function bb(t,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,v=null,S=null,C=null,H=null,W=null;for(Y in a){var te=a[Y];if(a.hasOwnProperty(Y)&&te!=null)switch(Y){case"checked":break;case"value":break;case"defaultValue":C=te;default:l.hasOwnProperty(Y)||et(t,i,Y,null,l,te)}}for(var Q in l){var Y=l[Q];if(te=a[Q],l.hasOwnProperty(Q)&&(Y!=null||te!=null))switch(Q){case"type":d=Y;break;case"name":h=Y;break;case"checked":H=Y;break;case"defaultChecked":W=Y;break;case"value":v=Y;break;case"defaultValue":S=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(s(137,i));break;default:Y!==te&&et(t,i,Q,Y,l,te)}}_n(t,v,S,C,H,W,d,h);return;case"select":Y=v=S=Q=null;for(d in a)if(C=a[d],a.hasOwnProperty(d)&&C!=null)switch(d){case"value":break;case"multiple":Y=C;default:l.hasOwnProperty(d)||et(t,i,d,null,l,C)}for(h in l)if(d=l[h],C=a[h],l.hasOwnProperty(h)&&(d!=null||C!=null))switch(h){case"value":Q=d;break;case"defaultValue":S=d;break;case"multiple":v=d;default:d!==C&&et(t,i,h,d,l,C)}i=S,a=v,l=Y,Q!=null?Gi(t,!!a,Q,!1):!!l!=!!a&&(i!=null?Gi(t,!!a,i,!0):Gi(t,!!a,a?[]:"",!1));return;case"textarea":Y=Q=null;for(S in a)if(h=a[S],a.hasOwnProperty(S)&&h!=null&&!l.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:et(t,i,S,null,l,h)}for(v in l)if(h=l[v],d=a[v],l.hasOwnProperty(v)&&(h!=null||d!=null))switch(v){case"value":Q=h;break;case"defaultValue":Y=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==d&&et(t,i,v,h,l,d)}Je(t,Q,Y);return;case"option":for(var we in a)if(Q=a[we],a.hasOwnProperty(we)&&Q!=null&&!l.hasOwnProperty(we))switch(we){case"selected":t.selected=!1;break;default:et(t,i,we,null,l,Q)}for(C in l)if(Q=l[C],Y=a[C],l.hasOwnProperty(C)&&Q!==Y&&(Q!=null||Y!=null))switch(C){case"selected":t.selected=Q&&typeof Q!="function"&&typeof Q!="symbol";break;default:et(t,i,C,Q,l,Y)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Te in a)Q=a[Te],a.hasOwnProperty(Te)&&Q!=null&&!l.hasOwnProperty(Te)&&et(t,i,Te,null,l,Q);for(H in l)if(Q=l[H],Y=a[H],l.hasOwnProperty(H)&&Q!==Y&&(Q!=null||Y!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(s(137,i));break;default:et(t,i,H,Q,l,Y)}return;default:if(Jo(i)){for(var tt in a)Q=a[tt],a.hasOwnProperty(tt)&&Q!==void 0&&!l.hasOwnProperty(tt)&&Wd(t,i,tt,void 0,l,Q);for(W in l)Q=l[W],Y=a[W],!l.hasOwnProperty(W)||Q===Y||Q===void 0&&Y===void 0||Wd(t,i,W,Q,l,Y);return}}for(var j in a)Q=a[j],a.hasOwnProperty(j)&&Q!=null&&!l.hasOwnProperty(j)&&et(t,i,j,null,l,Q);for(te in l)Q=l[te],Y=a[te],!l.hasOwnProperty(te)||Q===Y||Q==null&&Y==null||et(t,i,te,Q,l,Y)}var Jd=null,Zd=null;function Gc(t){return t.nodeType===9?t:t.ownerDocument}function ev(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function tv(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function em(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var tm=null;function wb(){var t=window.event;return t&&t.type==="popstate"?t===tm?!1:(tm=t,!0):(tm=null,!1)}var nv=typeof setTimeout=="function"?setTimeout:void 0,Rb=typeof clearTimeout=="function"?clearTimeout:void 0,iv=typeof Promise=="function"?Promise:void 0,xb=typeof queueMicrotask=="function"?queueMicrotask:typeof iv<"u"?function(t){return iv.resolve(null).then(t).catch(Ib)}:nv;function Ib(t){setTimeout(function(){throw t})}function Br(t){return t==="head"}function rv(t,i){var a=i,l=0,h=0;do{var d=a.nextSibling;if(t.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(0<l&&8>l){a=l;var v=t.ownerDocument;if(a&1&&Ll(v.documentElement),a&2&&Ll(v.body),a&4)for(a=v.head,Ll(a),v=a.firstChild;v;){var S=v.nextSibling,C=v.nodeName;v[ws]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=S}}if(h===0){t.removeChild(d),Gl(i);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:l=a.charCodeAt(0)-48;else l=0;a=d}while(a);Gl(i)}function nm(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":nm(a),Sr(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function Cb(t,i,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[ws])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=ni(t.nextSibling),t===null)break}return null}function Nb(t,i,a){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=ni(t.nextSibling),t===null))return null;return t}function im(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function Db(t,i){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function ni(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return t}var rm=null;function sv(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return t;i--}else a==="/$"&&i++}t=t.previousSibling}return null}function av(t,i,a){switch(i=Gc(a),t){case"html":if(t=i.documentElement,!t)throw Error(s(452));return t;case"head":if(t=i.head,!t)throw Error(s(453));return t;case"body":if(t=i.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function Ll(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);Sr(t)}var zn=new Map,ov=new Set;function Qc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var cr=X.d;X.d={f:Ob,r:Mb,D:Vb,C:Pb,L:kb,m:Lb,X:jb,S:Ub,M:zb};function Ob(){var t=cr.f(),i=Lc();return t||i}function Mb(t){var i=fi(t);i!==null&&i.tag===5&&i.type==="form"?xy(i):cr.r(t)}var oo=typeof document>"u"?null:document;function lv(t,i,a){var l=oo;if(l&&typeof i=="string"&&i){var h=bt(i);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),ov.has(h)||(ov.add(h),t={rel:t,crossOrigin:a,href:i},l.querySelector(h)===null&&(i=l.createElement("link"),Yt(i,"link",t),pt(i),l.head.appendChild(i)))}}function Vb(t){cr.D(t),lv("dns-prefetch",t,null)}function Pb(t,i){cr.C(t,i),lv("preconnect",t,i)}function kb(t,i,a){cr.L(t,i,a);var l=oo;if(l&&t&&i){var h='link[rel="preload"][as="'+bt(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+bt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+bt(a.imageSizes)+'"]')):h+='[href="'+bt(t)+'"]';var d=h;switch(i){case"style":d=lo(t);break;case"script":d=uo(t)}zn.has(d)||(t=T({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:t,as:i},a),zn.set(d,t),l.querySelector(h)!==null||i==="style"&&l.querySelector(Ul(d))||i==="script"&&l.querySelector(jl(d))||(i=l.createElement("link"),Yt(i,"link",t),pt(i),l.head.appendChild(i)))}}function Lb(t,i){cr.m(t,i);var a=oo;if(a&&t){var l=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+bt(l)+'"][href="'+bt(t)+'"]',d=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=uo(t)}if(!zn.has(d)&&(t=T({rel:"modulepreload",href:t},i),zn.set(d,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(jl(d)))return}l=a.createElement("link"),Yt(l,"link",t),pt(l),a.head.appendChild(l)}}}function Ub(t,i,a){cr.S(t,i,a);var l=oo;if(l&&t){var h=on(l).hoistableStyles,d=lo(t);i=i||"default";var v=h.get(d);if(!v){var S={loading:0,preload:null};if(v=l.querySelector(Ul(d)))S.loading=5;else{t=T({rel:"stylesheet",href:t,"data-precedence":i},a),(a=zn.get(d))&&sm(t,a);var C=v=l.createElement("link");pt(C),Yt(C,"link",t),C._p=new Promise(function(H,W){C.onload=H,C.onerror=W}),C.addEventListener("load",function(){S.loading|=1}),C.addEventListener("error",function(){S.loading|=2}),S.loading|=4,Yc(v,i,l)}v={type:"stylesheet",instance:v,count:1,state:S},h.set(d,v)}}}function jb(t,i){cr.X(t,i);var a=oo;if(a&&t){var l=on(a).hoistableScripts,h=uo(t),d=l.get(h);d||(d=a.querySelector(jl(h)),d||(t=T({src:t,async:!0},i),(i=zn.get(h))&&am(t,i),d=a.createElement("script"),pt(d),Yt(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function zb(t,i){cr.M(t,i);var a=oo;if(a&&t){var l=on(a).hoistableScripts,h=uo(t),d=l.get(h);d||(d=a.querySelector(jl(h)),d||(t=T({src:t,async:!0,type:"module"},i),(i=zn.get(h))&&am(t,i),d=a.createElement("script"),pt(d),Yt(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function uv(t,i,a,l){var h=(h=ue.current)?Qc(h):null;if(!h)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=lo(a.href),a=on(h).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=lo(a.href);var d=on(h).hoistableStyles,v=d.get(t);if(v||(h=h.ownerDocument||h,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,v),(d=h.querySelector(Ul(t)))&&!d._p&&(v.instance=d,v.state.loading=5),zn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},zn.set(t,a),d||Bb(h,t,a,v.state))),i&&l===null)throw Error(s(528,""));return v}if(i&&l!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=uo(a),a=on(h).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function lo(t){return'href="'+bt(t)+'"'}function Ul(t){return'link[rel="stylesheet"]['+t+"]"}function cv(t){return T({},t,{"data-precedence":t.precedence,precedence:null})}function Bb(t,i,a,l){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=t.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),Yt(i,"link",a),pt(i),t.head.appendChild(i))}function uo(t){return'[src="'+bt(t)+'"]'}function jl(t){return"script[async]"+t}function hv(t,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=t.querySelector('style[data-href~="'+bt(a.href)+'"]');if(l)return i.instance=l,pt(l),l;var h=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),pt(l),Yt(l,"style",h),Yc(l,a.precedence,t),i.instance=l;case"stylesheet":h=lo(a.href);var d=t.querySelector(Ul(h));if(d)return i.state.loading|=4,i.instance=d,pt(d),d;l=cv(a),(h=zn.get(h))&&sm(l,h),d=(t.ownerDocument||t).createElement("link"),pt(d);var v=d;return v._p=new Promise(function(S,C){v.onload=S,v.onerror=C}),Yt(d,"link",l),i.state.loading|=4,Yc(d,a.precedence,t),i.instance=d;case"script":return d=uo(a.src),(h=t.querySelector(jl(d)))?(i.instance=h,pt(h),h):(l=a,(h=zn.get(d))&&(l=T({},a),am(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),pt(h),Yt(h,"link",l),t.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,Yc(l,a.precedence,t));return i.instance}function Yc(t,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,d=h,v=0;v<l.length;v++){var S=l[v];if(S.dataset.precedence===i)d=S;else if(d!==h)break}d?d.parentNode.insertBefore(t,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(t,i.firstChild))}function sm(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function am(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var Kc=null;function fv(t,i,a){if(Kc===null){var l=new Map,h=Kc=new Map;h.set(a,l)}else h=Kc,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var d=a[h];if(!(d[ws]||d[Dt]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var v=d.getAttribute(i)||"";v=t+v;var S=l.get(v);S?S.push(d):l.set(v,[d])}}return l}function dv(t,i,a){t=t.ownerDocument||t,t.head.insertBefore(a,i==="title"?t.querySelector("head > title"):null)}function qb(t,i,a){if(a===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function mv(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var zl=null;function Hb(){}function Fb(t,i,a){if(zl===null)throw Error(s(475));var l=zl;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var h=lo(a.href),d=t.querySelector(Ul(h));if(d){t=d._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=$c.bind(l),t.then(l,l)),i.state.loading|=4,i.instance=d,pt(d);return}d=t.ownerDocument||t,a=cv(a),(h=zn.get(h))&&sm(a,h),d=d.createElement("link"),pt(d);var v=d;v._p=new Promise(function(S,C){v.onload=S,v.onerror=C}),Yt(d,"link",a),i.instance=d}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(i,t),(t=i.state.preload)&&(i.state.loading&3)===0&&(l.count++,i=$c.bind(l),t.addEventListener("load",i),t.addEventListener("error",i))}}function Gb(){if(zl===null)throw Error(s(475));var t=zl;return t.stylesheets&&t.count===0&&om(t,t.stylesheets),0<t.count?function(i){var a=setTimeout(function(){if(t.stylesheets&&om(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=i,function(){t.unsuspend=null,clearTimeout(a)}}:null}function $c(){if(this.count--,this.count===0){if(this.stylesheets)om(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Xc=null;function om(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Xc=new Map,i.forEach(Qb,t),Xc=null,$c.call(t))}function Qb(t,i){if(!(i.state.loading&4)){var a=Xc.get(t);if(a)var l=a.get(null);else{a=new Map,Xc.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var v=h[d];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),l=v)}l&&a.set(null,l)}h=i.instance,v=h.getAttribute("data-precedence"),d=a.get(v)||l,d===l&&a.set(null,h),a.set(v,h),this.count++,l=$c.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),d?d.parentNode.insertBefore(h,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),i.state.loading|=4}}var Bl={$$typeof:re,Provider:null,Consumer:null,_currentValue:ce,_currentValue2:ce,_threadCount:0};function Yb(t,i,a,l,h,d,v,S){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=zi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zi(0),this.hiddenUpdates=zi(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=S,this.incompleteTransitions=new Map}function pv(t,i,a,l,h,d,v,S,C,H,W,te){return t=new Yb(t,i,a,v,S,C,H,te),i=1,d===!0&&(i|=24),d=En(3,null,null,i),t.current=d,d.stateNode=t,i=qf(),i.refCount++,t.pooledCache=i,i.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:i},Qf(d),t}function gv(t){return t?(t=za,t):za}function yv(t,i,a,l,h,d){h=gv(h),l.context===null?l.context=h:l.pendingContext=h,l=Ir(i),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=Cr(t,l,i),a!==null&&(wn(a,t,i),yl(a,t,i))}function _v(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function lm(t,i){_v(t,i),(t=t.alternate)&&_v(t,i)}function vv(t){if(t.tag===13){var i=ja(t,67108864);i!==null&&wn(i,t,67108864),lm(t,67108864)}}var Wc=!0;function Kb(t,i,a,l){var h=G.T;G.T=null;var d=X.p;try{X.p=2,um(t,i,a,l)}finally{X.p=d,G.T=h}}function $b(t,i,a,l){var h=G.T;G.T=null;var d=X.p;try{X.p=8,um(t,i,a,l)}finally{X.p=d,G.T=h}}function um(t,i,a,l){if(Wc){var h=cm(l);if(h===null)Xd(t,i,l,Jc,a),Tv(t,l);else if(Wb(h,t,i,a,l))l.stopPropagation();else if(Tv(t,l),i&4&&-1<Xb.indexOf(t)){for(;h!==null;){var d=fi(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var v=Wn(d.pendingLanes);if(v!==0){var S=d;for(S.pendingLanes|=2,S.entangledLanes|=2;v;){var C=1<<31-Wt(v);S.entanglements[1]|=C,v&=~C}Ri(d),(Xe&6)===0&&(Pc=In()+500,Vl(0))}}break;case 13:S=ja(d,2),S!==null&&wn(S,d,2),Lc(),lm(d,2)}if(d=cm(l),d===null&&Xd(t,i,l,Jc,a),d===h)break;h=d}h!==null&&l.stopPropagation()}else Xd(t,i,l,null,a)}}function cm(t){return t=Dn(t),hm(t)}var Jc=null;function hm(t){if(Jc=null,t=qi(t),t!==null){var i=u(t);if(i===null)t=null;else{var a=i.tag;if(a===13){if(t=f(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return Jc=t,null}function Ev(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(mf()){case jo:return 2;case _a:return 8;case Es:case pf:return 32;case va:return 268435456;default:return 32}default:return 32}}var fm=!1,qr=null,Hr=null,Fr=null,ql=new Map,Hl=new Map,Gr=[],Xb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Tv(t,i){switch(t){case"focusin":case"focusout":qr=null;break;case"dragenter":case"dragleave":Hr=null;break;case"mouseover":case"mouseout":Fr=null;break;case"pointerover":case"pointerout":ql.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hl.delete(i.pointerId)}}function Fl(t,i,a,l,h,d){return t===null||t.nativeEvent!==d?(t={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[h]},i!==null&&(i=fi(i),i!==null&&vv(i)),t):(t.eventSystemFlags|=l,i=t.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),t)}function Wb(t,i,a,l,h){switch(i){case"focusin":return qr=Fl(qr,t,i,a,l,h),!0;case"dragenter":return Hr=Fl(Hr,t,i,a,l,h),!0;case"mouseover":return Fr=Fl(Fr,t,i,a,l,h),!0;case"pointerover":var d=h.pointerId;return ql.set(d,Fl(ql.get(d)||null,t,i,a,l,h)),!0;case"gotpointercapture":return d=h.pointerId,Hl.set(d,Fl(Hl.get(d)||null,t,i,a,l,h)),!0}return!1}function Sv(t){var i=qi(t.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=f(a),i!==null){t.blockedOn=i,Lu(t.priority,function(){if(a.tag===13){var l=bn();l=vr(l);var h=ja(a,l);h!==null&&wn(h,a,l),lm(a,l)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Zc(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=cm(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Qi=l,a.target.dispatchEvent(l),Qi=null}else return i=fi(a),i!==null&&vv(i),t.blockedOn=a,!1;i.shift()}return!0}function Av(t,i,a){Zc(t)&&a.delete(i)}function Jb(){fm=!1,qr!==null&&Zc(qr)&&(qr=null),Hr!==null&&Zc(Hr)&&(Hr=null),Fr!==null&&Zc(Fr)&&(Fr=null),ql.forEach(Av),Hl.forEach(Av)}function eh(t,i){t.blockedOn===i&&(t.blockedOn=null,fm||(fm=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Jb)))}var th=null;function bv(t){th!==t&&(th=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){th===t&&(th=null);for(var i=0;i<t.length;i+=3){var a=t[i],l=t[i+1],h=t[i+2];if(typeof l!="function"){if(hm(l||a)===null)continue;break}var d=fi(a);d!==null&&(t.splice(i,3),i-=3,hd(d,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function Gl(t){function i(C){return eh(C,t)}qr!==null&&eh(qr,t),Hr!==null&&eh(Hr,t),Fr!==null&&eh(Fr,t),ql.forEach(i),Hl.forEach(i);for(var a=0;a<Gr.length;a++){var l=Gr[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Gr.length&&(a=Gr[0],a.blockedOn===null);)Sv(a),a.blockedOn===null&&Gr.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],d=a[l+1],v=h[At]||null;if(typeof d=="function")v||bv(a);else if(v){var S=null;if(d&&d.hasAttribute("formAction")){if(h=d,v=d[At]||null)S=v.formAction;else if(hm(h)!==null)continue}else S=v.action;typeof S=="function"?a[l+1]=S:(a.splice(l,3),l-=3),bv(a)}}}function dm(t){this._internalRoot=t}nh.prototype.render=dm.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,l=bn();yv(a,l,t,i,null,null)},nh.prototype.unmount=dm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;yv(t.current,2,null,t,null,null),Lc(),i[Cn]=null}};function nh(t){this._internalRoot=t}nh.prototype.unstable_scheduleHydration=function(t){if(t){var i=Er();t={blockedOn:null,target:t,priority:i};for(var a=0;a<Gr.length&&i!==0&&i<Gr[a].priority;a++);Gr.splice(a,0,t),a===0&&Sv(t)}};var wv=e.version;if(wv!=="19.1.1")throw Error(s(527,wv,"19.1.1"));X.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=m(i),t=t!==null?y(t):null,t=t===null?null:t.stateNode,t};var Zb={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ih=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ih.isDisabled&&ih.supportsFiber)try{ft=ih.inject(Zb),$e=ih}catch{}}return Yl.createRoot=function(t,i){if(!o(t))throw Error(s(299));var a=!1,l="",h=By,d=qy,v=Hy,S=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(S=i.unstable_transitionCallbacks)),i=pv(t,1,!1,null,null,a,l,h,d,v,S,null),t[Cn]=i.current,$d(t),new dm(i)},Yl.hydrateRoot=function(t,i,a){if(!o(t))throw Error(s(299));var l=!1,h="",d=By,v=qy,S=Hy,C=null,H=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(S=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(C=a.unstable_transitionCallbacks),a.formState!==void 0&&(H=a.formState)),i=pv(t,1,!0,i,a??null,l,h,d,v,S,C,H),i.context=gv(null),a=i.current,l=bn(),l=vr(l),h=Ir(l),h.callback=null,Cr(a,h,l),a=l,i.current.lanes=a,Bi(i,a),Ri(i),t[Cn]=i.current,$d(t),new nh(i)},Yl.version="19.1.1",Yl}var Pv;function cw(){if(Pv)return gm.exports;Pv=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),gm.exports=uw(),gm.exports}var hw=cw();const fw=I0(hw);N0();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function uu(){return uu=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])}return r},uu.apply(this,arguments)}var Zr;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(Zr||(Zr={}));const kv="popstate";function dw(r){r===void 0&&(r={});function e(s,o){let{pathname:u,search:f,hash:p}=s.location;return Lm("",{pathname:u,search:f,hash:p},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(s,o){return typeof o=="string"?o:Ah(o)}return pw(e,n,null,r)}function Et(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function D0(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function mw(){return Math.random().toString(36).substr(2,8)}function Lv(r,e){return{usr:r.state,key:r.key,idx:e}}function Lm(r,e,n,s){return n===void 0&&(n=null),uu({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?Co(e):e,{state:n,key:e&&e.key||s||mw()})}function Ah(r){let{pathname:e="/",search:n="",hash:s=""}=r;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function Co(r){let e={};if(r){let n=r.indexOf("#");n>=0&&(e.hash=r.substr(n),r=r.substr(0,n));let s=r.indexOf("?");s>=0&&(e.search=r.substr(s),r=r.substr(0,s)),r&&(e.pathname=r)}return e}function pw(r,e,n,s){s===void 0&&(s={});let{window:o=document.defaultView,v5Compat:u=!1}=s,f=o.history,p=Zr.Pop,m=null,y=T();y==null&&(y=0,f.replaceState(uu({},f.state,{idx:y}),""));function T(){return(f.state||{idx:null}).idx}function A(){p=Zr.Pop;let L=T(),se=L==null?null:L-y;y=L,m&&m({action:p,location:$.location,delta:se})}function R(L,se){p=Zr.Push;let ae=Lm($.location,L,se);y=T()+1;let re=Lv(ae,y),fe=$.createHref(ae);try{f.pushState(re,"",fe)}catch(le){if(le instanceof DOMException&&le.name==="DataCloneError")throw le;o.location.assign(fe)}u&&m&&m({action:p,location:$.location,delta:1})}function N(L,se){p=Zr.Replace;let ae=Lm($.location,L,se);y=T();let re=Lv(ae,y),fe=$.createHref(ae);f.replaceState(re,"",fe),u&&m&&m({action:p,location:$.location,delta:0})}function B(L){let se=o.location.origin!=="null"?o.location.origin:o.location.href,ae=typeof L=="string"?L:Ah(L);return ae=ae.replace(/ $/,"%20"),Et(se,"No window.location.(origin|href) available to create URL for href: "+ae),new URL(ae,se)}let $={get action(){return p},get location(){return r(o,f)},listen(L){if(m)throw new Error("A history only accepts one active listener");return o.addEventListener(kv,A),m=L,()=>{o.removeEventListener(kv,A),m=null}},createHref(L){return e(o,L)},createURL:B,encodeLocation(L){let se=B(L);return{pathname:se.pathname,search:se.search,hash:se.hash}},push:R,replace:N,go(L){return f.go(L)}};return $}var Uv;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(Uv||(Uv={}));function gw(r,e,n){return n===void 0&&(n="/"),yw(r,e,n)}function yw(r,e,n,s){let o=typeof e=="string"?Co(e):e,u=mp(o.pathname||"/",n);if(u==null)return null;let f=O0(r);_w(f);let p=null;for(let m=0;p==null&&m<f.length;++m){let y=Nw(u);p=xw(f[m],y)}return p}function O0(r,e,n,s){e===void 0&&(e=[]),n===void 0&&(n=[]),s===void 0&&(s="");let o=(u,f,p)=>{let m={relativePath:p===void 0?u.path||"":p,caseSensitive:u.caseSensitive===!0,childrenIndex:f,route:u};m.relativePath.startsWith("/")&&(Et(m.relativePath.startsWith(s),'Absolute route path "'+m.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),m.relativePath=m.relativePath.slice(s.length));let y=ts([s,m.relativePath]),T=n.concat(m);u.children&&u.children.length>0&&(Et(u.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+y+'".')),O0(u.children,e,T,y)),!(u.path==null&&!u.index)&&e.push({path:y,score:ww(y,u.index),routesMeta:T})};return r.forEach((u,f)=>{var p;if(u.path===""||!((p=u.path)!=null&&p.includes("?")))o(u,f);else for(let m of M0(u.path))o(u,f,m)}),e}function M0(r){let e=r.split("/");if(e.length===0)return[];let[n,...s]=e,o=n.endsWith("?"),u=n.replace(/\?$/,"");if(s.length===0)return o?[u,""]:[u];let f=M0(s.join("/")),p=[];return p.push(...f.map(m=>m===""?u:[u,m].join("/"))),o&&p.push(...f),p.map(m=>r.startsWith("/")&&m===""?"/":m)}function _w(r){r.sort((e,n)=>e.score!==n.score?n.score-e.score:Rw(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}const vw=/^:[\w-]+$/,Ew=3,Tw=2,Sw=1,Aw=10,bw=-2,jv=r=>r==="*";function ww(r,e){let n=r.split("/"),s=n.length;return n.some(jv)&&(s+=bw),e&&(s+=Tw),n.filter(o=>!jv(o)).reduce((o,u)=>o+(vw.test(u)?Ew:u===""?Sw:Aw),s)}function Rw(r,e){return r.length===e.length&&r.slice(0,-1).every((s,o)=>s===e[o])?r[r.length-1]-e[e.length-1]:0}function xw(r,e,n){let{routesMeta:s}=r,o={},u="/",f=[];for(let p=0;p<s.length;++p){let m=s[p],y=p===s.length-1,T=u==="/"?e:e.slice(u.length)||"/",A=Iw({path:m.relativePath,caseSensitive:m.caseSensitive,end:y},T),R=m.route;if(!A)return null;Object.assign(o,A.params),f.push({params:o,pathname:ts([u,A.pathname]),pathnameBase:Vw(ts([u,A.pathnameBase])),route:R}),A.pathnameBase!=="/"&&(u=ts([u,A.pathnameBase]))}return f}function Iw(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[n,s]=Cw(r.path,r.caseSensitive,r.end),o=e.match(n);if(!o)return null;let u=o[0],f=u.replace(/(.)\/+$/,"$1"),p=o.slice(1);return{params:s.reduce((y,T,A)=>{let{paramName:R,isOptional:N}=T;if(R==="*"){let $=p[A]||"";f=u.slice(0,u.length-$.length).replace(/(.)\/+$/,"$1")}const B=p[A];return N&&!B?y[R]=void 0:y[R]=(B||"").replace(/%2F/g,"/"),y},{}),pathname:u,pathnameBase:f,pattern:r}}function Cw(r,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),D0(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let s=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,p,m)=>(s.push({paramName:p,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(s.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function Nw(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return D0(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function mp(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=r.charAt(n);return s&&s!=="/"?null:r.slice(n)||"/"}function Dw(r,e){e===void 0&&(e="/");let{pathname:n,search:s="",hash:o=""}=typeof r=="string"?Co(r):r;return{pathname:n?n.startsWith("/")?n:Ow(n,e):e,search:Pw(s),hash:kw(o)}}function Ow(r,e){let n=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function Em(r,e,n,s){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Mw(r){return r.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function pp(r,e){let n=Mw(r);return e?n.map((s,o)=>o===n.length-1?s.pathname:s.pathnameBase):n.map(s=>s.pathnameBase)}function gp(r,e,n,s){s===void 0&&(s=!1);let o;typeof r=="string"?o=Co(r):(o=uu({},r),Et(!o.pathname||!o.pathname.includes("?"),Em("?","pathname","search",o)),Et(!o.pathname||!o.pathname.includes("#"),Em("#","pathname","hash",o)),Et(!o.search||!o.search.includes("#"),Em("#","search","hash",o)));let u=r===""||o.pathname==="",f=u?"/":o.pathname,p;if(f==null)p=n;else{let A=e.length-1;if(!s&&f.startsWith("..")){let R=f.split("/");for(;R[0]==="..";)R.shift(),A-=1;o.pathname=R.join("/")}p=A>=0?e[A]:"/"}let m=Dw(o,p),y=f&&f!=="/"&&f.endsWith("/"),T=(u||f===".")&&n.endsWith("/");return!m.pathname.endsWith("/")&&(y||T)&&(m.pathname+="/"),m}const ts=r=>r.join("/").replace(/\/\/+/g,"/"),Vw=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),Pw=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,kw=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function Lw(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const V0=["post","put","patch","delete"];new Set(V0);const Uw=["get",...V0];new Set(Uw);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cu(){return cu=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])}return r},cu.apply(this,arguments)}const yp=U.createContext(null),jw=U.createContext(null),ps=U.createContext(null),Gh=U.createContext(null),yr=U.createContext({outlet:null,matches:[],isDataRoute:!1}),P0=U.createContext(null);function zw(r,e){let{relative:n}=e===void 0?{}:e;No()||Et(!1);let{basename:s,navigator:o}=U.useContext(ps),{hash:u,pathname:f,search:p}=L0(r,{relative:n}),m=f;return s!=="/"&&(m=f==="/"?s:ts([s,f])),o.createHref({pathname:m,search:p,hash:u})}function No(){return U.useContext(Gh)!=null}function gs(){return No()||Et(!1),U.useContext(Gh).location}function k0(r){U.useContext(ps).static||U.useLayoutEffect(r)}function ui(){let{isDataRoute:r}=U.useContext(yr);return r?e1():Bw()}function Bw(){No()||Et(!1);let r=U.useContext(yp),{basename:e,future:n,navigator:s}=U.useContext(ps),{matches:o}=U.useContext(yr),{pathname:u}=gs(),f=JSON.stringify(pp(o,n.v7_relativeSplatPath)),p=U.useRef(!1);return k0(()=>{p.current=!0}),U.useCallback(function(y,T){if(T===void 0&&(T={}),!p.current)return;if(typeof y=="number"){s.go(y);return}let A=gp(y,JSON.parse(f),u,T.relative==="path");r==null&&e!=="/"&&(A.pathname=A.pathname==="/"?e:ts([e,A.pathname])),(T.replace?s.replace:s.push)(A,T.state,T)},[e,s,f,u,r])}function qw(){let{matches:r}=U.useContext(yr),e=r[r.length-1];return e?e.params:{}}function L0(r,e){let{relative:n}=e===void 0?{}:e,{future:s}=U.useContext(ps),{matches:o}=U.useContext(yr),{pathname:u}=gs(),f=JSON.stringify(pp(o,s.v7_relativeSplatPath));return U.useMemo(()=>gp(r,JSON.parse(f),u,n==="path"),[r,f,u,n])}function Hw(r,e){return Fw(r,e)}function Fw(r,e,n,s){No()||Et(!1);let{navigator:o}=U.useContext(ps),{matches:u}=U.useContext(yr),f=u[u.length-1],p=f?f.params:{};f&&f.pathname;let m=f?f.pathnameBase:"/";f&&f.route;let y=gs(),T;if(e){var A;let L=typeof e=="string"?Co(e):e;m==="/"||(A=L.pathname)!=null&&A.startsWith(m)||Et(!1),T=L}else T=y;let R=T.pathname||"/",N=R;if(m!=="/"){let L=m.replace(/^\//,"").split("/");N="/"+R.replace(/^\//,"").split("/").slice(L.length).join("/")}let B=gw(r,{pathname:N}),$=$w(B&&B.map(L=>Object.assign({},L,{params:Object.assign({},p,L.params),pathname:ts([m,o.encodeLocation?o.encodeLocation(L.pathname).pathname:L.pathname]),pathnameBase:L.pathnameBase==="/"?m:ts([m,o.encodeLocation?o.encodeLocation(L.pathnameBase).pathname:L.pathnameBase])})),u,n,s);return e&&$?U.createElement(Gh.Provider,{value:{location:cu({pathname:"/",search:"",hash:"",state:null,key:"default"},T),navigationType:Zr.Pop}},$):$}function Gw(){let r=Zw(),e=Lw(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),n=r instanceof Error?r.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return U.createElement(U.Fragment,null,U.createElement("h2",null,"Unexpected Application Error!"),U.createElement("h3",{style:{fontStyle:"italic"}},e),n?U.createElement("pre",{style:o},n):null,null)}const Qw=U.createElement(Gw,null);class Yw extends U.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?U.createElement(yr.Provider,{value:this.props.routeContext},U.createElement(P0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Kw(r){let{routeContext:e,match:n,children:s}=r,o=U.useContext(yp);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),U.createElement(yr.Provider,{value:e},s)}function $w(r,e,n,s){var o;if(e===void 0&&(e=[]),n===void 0&&(n=null),s===void 0&&(s=null),r==null){var u;if(!n)return null;if(n.errors)r=n.matches;else if((u=s)!=null&&u.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)r=n.matches;else return null}let f=r,p=(o=n)==null?void 0:o.errors;if(p!=null){let T=f.findIndex(A=>A.route.id&&p?.[A.route.id]!==void 0);T>=0||Et(!1),f=f.slice(0,Math.min(f.length,T+1))}let m=!1,y=-1;if(n&&s&&s.v7_partialHydration)for(let T=0;T<f.length;T++){let A=f[T];if((A.route.HydrateFallback||A.route.hydrateFallbackElement)&&(y=T),A.route.id){let{loaderData:R,errors:N}=n,B=A.route.loader&&R[A.route.id]===void 0&&(!N||N[A.route.id]===void 0);if(A.route.lazy||B){m=!0,y>=0?f=f.slice(0,y+1):f=[f[0]];break}}}return f.reduceRight((T,A,R)=>{let N,B=!1,$=null,L=null;n&&(N=p&&A.route.id?p[A.route.id]:void 0,$=A.route.errorElement||Qw,m&&(y<0&&R===0?(t1("route-fallback"),B=!0,L=null):y===R&&(B=!0,L=A.route.hydrateFallbackElement||null)));let se=e.concat(f.slice(0,R+1)),ae=()=>{let re;return N?re=$:B?re=L:A.route.Component?re=U.createElement(A.route.Component,null):A.route.element?re=A.route.element:re=T,U.createElement(Kw,{match:A,routeContext:{outlet:T,matches:se,isDataRoute:n!=null},children:re})};return n&&(A.route.ErrorBoundary||A.route.errorElement||R===0)?U.createElement(Yw,{location:n.location,revalidation:n.revalidation,component:$,error:N,children:ae(),routeContext:{outlet:null,matches:se,isDataRoute:!0}}):ae()},null)}var U0=(function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r})(U0||{}),j0=(function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r})(j0||{});function Xw(r){let e=U.useContext(yp);return e||Et(!1),e}function Ww(r){let e=U.useContext(jw);return e||Et(!1),e}function Jw(r){let e=U.useContext(yr);return e||Et(!1),e}function z0(r){let e=Jw(),n=e.matches[e.matches.length-1];return n.route.id||Et(!1),n.route.id}function Zw(){var r;let e=U.useContext(P0),n=Ww(),s=z0();return e!==void 0?e:(r=n.errors)==null?void 0:r[s]}function e1(){let{router:r}=Xw(U0.UseNavigateStable),e=z0(j0.UseNavigateStable),n=U.useRef(!1);return k0(()=>{n.current=!0}),U.useCallback(function(o,u){u===void 0&&(u={}),n.current&&(typeof o=="number"?r.navigate(o):r.navigate(o,cu({fromRouteId:e},u)))},[r,e])}const zv={};function t1(r,e,n){zv[r]||(zv[r]=!0)}function n1(r,e){r?.v7_startTransition,r?.v7_relativeSplatPath}function bh(r){let{to:e,replace:n,state:s,relative:o}=r;No()||Et(!1);let{future:u,static:f}=U.useContext(ps),{matches:p}=U.useContext(yr),{pathname:m}=gs(),y=ui(),T=gp(e,pp(p,u.v7_relativeSplatPath),m,o==="path"),A=JSON.stringify(T);return U.useEffect(()=>y(JSON.parse(A),{replace:n,state:s,relative:o}),[y,A,o,n,s]),null}function Bn(r){Et(!1)}function i1(r){let{basename:e="/",children:n=null,location:s,navigationType:o=Zr.Pop,navigator:u,static:f=!1,future:p}=r;No()&&Et(!1);let m=e.replace(/^\/*/,"/"),y=U.useMemo(()=>({basename:m,navigator:u,static:f,future:cu({v7_relativeSplatPath:!1},p)}),[m,p,u,f]);typeof s=="string"&&(s=Co(s));let{pathname:T="/",search:A="",hash:R="",state:N=null,key:B="default"}=s,$=U.useMemo(()=>{let L=mp(T,m);return L==null?null:{location:{pathname:L,search:A,hash:R,state:N,key:B},navigationType:o}},[m,T,A,R,N,B,o]);return $==null?null:U.createElement(ps.Provider,{value:y},U.createElement(Gh.Provider,{children:n,value:$}))}function r1(r){let{children:e,location:n}=r;return Hw(Um(e),n)}new Promise(()=>{});function Um(r,e){e===void 0&&(e=[]);let n=[];return U.Children.forEach(r,(s,o)=>{if(!U.isValidElement(s))return;let u=[...e,o];if(s.type===U.Fragment){n.push.apply(n,Um(s.props.children,u));return}s.type!==Bn&&Et(!1),!s.props.index||!s.props.children||Et(!1);let f={id:s.props.id||u.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(f.children=Um(s.props.children,u)),n.push(f)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function jm(){return jm=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])}return r},jm.apply(this,arguments)}function s1(r,e){if(r==null)return{};var n={},s=Object.keys(r),o,u;for(u=0;u<s.length;u++)o=s[u],!(e.indexOf(o)>=0)&&(n[o]=r[o]);return n}function a1(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function o1(r,e){return r.button===0&&(!e||e==="_self")&&!a1(r)}function zm(r){return r===void 0&&(r=""),new URLSearchParams(typeof r=="string"||Array.isArray(r)||r instanceof URLSearchParams?r:Object.keys(r).reduce((e,n)=>{let s=r[n];return e.concat(Array.isArray(s)?s.map(o=>[n,o]):[[n,s]])},[]))}function l1(r,e){let n=zm(r);return e&&e.forEach((s,o)=>{n.has(o)||e.getAll(o).forEach(u=>{n.append(o,u)})}),n}const u1=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],c1="6";try{window.__reactRouterVersion=c1}catch{}const h1="startTransition",Bv=sw[h1];function f1(r){let{basename:e,children:n,future:s,window:o}=r,u=U.useRef();u.current==null&&(u.current=dw({window:o,v5Compat:!0}));let f=u.current,[p,m]=U.useState({action:f.action,location:f.location}),{v7_startTransition:y}=s||{},T=U.useCallback(A=>{y&&Bv?Bv(()=>m(A)):m(A)},[m,y]);return U.useLayoutEffect(()=>f.listen(T),[f,T]),U.useEffect(()=>n1(s),[s]),U.createElement(i1,{basename:e,children:n,location:p.location,navigationType:p.action,navigator:f,future:s})}const d1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",m1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rh=U.forwardRef(function(e,n){let{onClick:s,relative:o,reloadDocument:u,replace:f,state:p,target:m,to:y,preventScrollReset:T,viewTransition:A}=e,R=s1(e,u1),{basename:N}=U.useContext(ps),B,$=!1;if(typeof y=="string"&&m1.test(y)&&(B=y,d1))try{let re=new URL(window.location.href),fe=y.startsWith("//")?new URL(re.protocol+y):new URL(y),le=mp(fe.pathname,N);fe.origin===re.origin&&le!=null?y=le+fe.search+fe.hash:$=!0}catch{}let L=zw(y,{relative:o}),se=p1(y,{replace:f,state:p,target:m,preventScrollReset:T,relative:o,viewTransition:A});function ae(re){s&&s(re),re.defaultPrevented||se(re)}return U.createElement("a",jm({},R,{href:B||L,onClick:$||u?s:ae,ref:n,target:m}))});var qv;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(qv||(qv={}));var Hv;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(Hv||(Hv={}));function p1(r,e){let{target:n,replace:s,state:o,preventScrollReset:u,relative:f,viewTransition:p}=e===void 0?{}:e,m=ui(),y=gs(),T=L0(r,{relative:f});return U.useCallback(A=>{if(o1(A,n)){A.preventDefault();let R=s!==void 0?s:Ah(y)===Ah(T);m(r,{replace:R,state:o,preventScrollReset:u,relative:f,viewTransition:p})}},[y,m,T,s,o,n,r,u,f,p])}function g1(r){let e=U.useRef(zm(r)),n=U.useRef(!1),s=gs(),o=U.useMemo(()=>l1(s.search,n.current?null:e.current),[s.search]),u=ui(),f=U.useCallback((p,m)=>{const y=zm(typeof p=="function"?p(o):p);n.current=!0,u("?"+y,m)},[u,o]);return[o,f]}const y1=()=>{};var Fv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B0=function(r){const e=[];let n=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},_1=function(r){const e=[];let n=0,s=0;for(;n<r.length;){const o=r[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=r[n++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=r[n++],f=r[n++],p=r[n++],m=((o&7)<<18|(u&63)<<12|(f&63)<<6|p&63)-65536;e[s++]=String.fromCharCode(55296+(m>>10)),e[s++]=String.fromCharCode(56320+(m&1023))}else{const u=r[n++],f=r[n++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|f&63)}}return e.join("")},q0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const u=r[o],f=o+1<r.length,p=f?r[o+1]:0,m=o+2<r.length,y=m?r[o+2]:0,T=u>>2,A=(u&3)<<4|p>>4;let R=(p&15)<<2|y>>6,N=y&63;m||(N=64,f||(R=64)),s.push(n[T],n[A],n[R],n[N])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(B0(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):_1(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const u=n[r.charAt(o++)],p=o<r.length?n[r.charAt(o)]:0;++o;const y=o<r.length?n[r.charAt(o)]:64;++o;const A=o<r.length?n[r.charAt(o)]:64;if(++o,u==null||p==null||y==null||A==null)throw new v1;const R=u<<2|p>>4;if(s.push(R),y!==64){const N=p<<4&240|y>>2;if(s.push(N),A!==64){const B=y<<6&192|A;s.push(B)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class v1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const E1=function(r){const e=B0(r);return q0.encodeByteArray(e,!0)},wh=function(r){return E1(r).replace(/\./g,"")},H0=function(r){try{return q0.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S1=()=>T1().__FIREBASE_DEFAULTS__,A1=()=>{if(typeof process>"u"||typeof Fv>"u")return;const r=Fv.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},b1=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&H0(r[1]);return e&&JSON.parse(e)},Qh=()=>{try{return y1()||S1()||A1()||b1()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},F0=r=>Qh()?.emulatorHosts?.[r],w1=r=>{const e=F0(r);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},G0=()=>Qh()?.config,Q0=r=>Qh()?.[`_${r}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Do(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Y0(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x1(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,u=r.sub||r.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...r};return[wh(JSON.stringify(n)),wh(JSON.stringify(f)),""].join(".")}const iu={};function I1(){const r={prod:[],emulator:[]};for(const e of Object.keys(iu))iu[e]?r.emulator.push(e):r.prod.push(e);return r}function C1(r){let e=document.getElementById(r),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),n=!0),{created:n,element:e}}let Gv=!1;function K0(r,e){if(typeof window>"u"||typeof document>"u"||!Do(window.location.host)||iu[r]===e||iu[r]||Gv)return;iu[r]=e;function n(R){return`__firebase__banner__${R}`}const s="__firebase__banner",u=I1().prod.length>0;function f(){const R=document.getElementById(s);R&&R.remove()}function p(R){R.style.display="flex",R.style.background="#7faaf0",R.style.position="fixed",R.style.bottom="5px",R.style.left="5px",R.style.padding=".5em",R.style.borderRadius="5px",R.style.alignItems="center"}function m(R,N){R.setAttribute("width","24"),R.setAttribute("id",N),R.setAttribute("height","24"),R.setAttribute("viewBox","0 0 24 24"),R.setAttribute("fill","none"),R.style.marginLeft="-6px"}function y(){const R=document.createElement("span");return R.style.cursor="pointer",R.style.marginLeft="16px",R.style.fontSize="24px",R.innerHTML=" &times;",R.onclick=()=>{Gv=!0,f()},R}function T(R,N){R.setAttribute("id",N),R.innerText="Learn more",R.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",R.setAttribute("target","__blank"),R.style.paddingLeft="5px",R.style.textDecoration="underline"}function A(){const R=C1(s),N=n("text"),B=document.getElementById(N)||document.createElement("span"),$=n("learnmore"),L=document.getElementById($)||document.createElement("a"),se=n("preprendIcon"),ae=document.getElementById(se)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(R.created){const re=R.element;p(re),T(L,$);const fe=y();m(ae,se),re.append(ae,B,L,fe),document.body.appendChild(re)}u?(B.innerText="Preview backend disconnected.",ae.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ae.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,B.innerText="Preview backend running in this workspace."),B.setAttribute("id",N)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",A):A()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function N1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(sn())}function D1(){const r=Qh()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function O1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function M1(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function V1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function P1(){const r=sn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function k1(){return!D1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function L1(){try{return typeof indexedDB=="object"}catch{return!1}}function U1(){return new Promise((r,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j1="FirebaseError";class _r extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=j1,Object.setPrototypeOf(this,_r.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Au.prototype.create)}}class Au{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],f=u?z1(u,s):"Error",p=`${this.serviceName}: ${f} (${o}).`;return new _r(o,p,s)}}function z1(r,e){return r.replace(B1,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const B1=/\{\$([^}]+)}/g;function q1(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function sa(r,e){if(r===e)return!0;const n=Object.keys(r),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const u=r[o],f=e[o];if(Qv(u)&&Qv(f)){if(!sa(u,f))return!1}else if(u!==f)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function Qv(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bu(r){const e=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Xl(r){const e={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,u]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function Wl(r){const e=r.indexOf("?");if(!e)return"";const n=r.indexOf("#",e);return r.substring(e,n>0?n:void 0)}function H1(r,e){const n=new F1(r,e);return n.subscribe.bind(n)}class F1{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");G1(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=Tm),o.error===void 0&&(o.error=Tm),o.complete===void 0&&(o.complete=Tm);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function G1(r,e){if(typeof r!="object"||r===null)return!1;for(const n of e)if(n in r&&typeof r[n]=="function")return!0;return!1}function Tm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tt(r){return r&&r._delegate?r._delegate:r}class aa{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ta="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new R1;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(K1(e))try{this.getOrInitializeService({instanceIdentifier:ta})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=ta){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ta){return this.instances.has(e)}getOptions(e=ta){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,f]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(u);s===p&&f.resolve(o)}return o}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const u=this.instances.get(s);return u&&e(u,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:Y1(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=ta){return this.component?this.component.multipleInstances?e:ta:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Y1(r){return r===ta?void 0:r}function K1(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Q1(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ke;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(ke||(ke={}));const X1={debug:ke.DEBUG,verbose:ke.VERBOSE,info:ke.INFO,warn:ke.WARN,error:ke.ERROR,silent:ke.SILENT},W1=ke.INFO,J1={[ke.DEBUG]:"log",[ke.VERBOSE]:"log",[ke.INFO]:"info",[ke.WARN]:"warn",[ke.ERROR]:"error"},Z1=(r,e,...n)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=J1[e];if(o)console[o](`[${s}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class _p{constructor(e){this.name=e,this._logLevel=W1,this._logHandler=Z1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?X1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ke.DEBUG,...e),this._logHandler(this,ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ke.VERBOSE,...e),this._logHandler(this,ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ke.INFO,...e),this._logHandler(this,ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ke.WARN,...e),this._logHandler(this,ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ke.ERROR,...e),this._logHandler(this,ke.ERROR,...e)}}const eR=(r,e)=>e.some(n=>r instanceof n);let Yv,Kv;function tR(){return Yv||(Yv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function nR(){return Kv||(Kv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const $0=new WeakMap,Bm=new WeakMap,X0=new WeakMap,Sm=new WeakMap,vp=new WeakMap;function iR(r){const e=new Promise((n,s)=>{const o=()=>{r.removeEventListener("success",u),r.removeEventListener("error",f)},u=()=>{n(ns(r.result)),o()},f=()=>{s(r.error),o()};r.addEventListener("success",u),r.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&$0.set(n,r)}).catch(()=>{}),vp.set(e,r),e}function rR(r){if(Bm.has(r))return;const e=new Promise((n,s)=>{const o=()=>{r.removeEventListener("complete",u),r.removeEventListener("error",f),r.removeEventListener("abort",f)},u=()=>{n(),o()},f=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",u),r.addEventListener("error",f),r.addEventListener("abort",f)});Bm.set(r,e)}let qm={get(r,e,n){if(r instanceof IDBTransaction){if(e==="done")return Bm.get(r);if(e==="objectStoreNames")return r.objectStoreNames||X0.get(r);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ns(r[e])},set(r,e,n){return r[e]=n,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function sR(r){qm=r(qm)}function aR(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=r.call(Am(this),e,...n);return X0.set(s,e.sort?e.sort():[e]),ns(s)}:nR().includes(r)?function(...e){return r.apply(Am(this),e),ns($0.get(this))}:function(...e){return ns(r.apply(Am(this),e))}}function oR(r){return typeof r=="function"?aR(r):(r instanceof IDBTransaction&&rR(r),eR(r,tR())?new Proxy(r,qm):r)}function ns(r){if(r instanceof IDBRequest)return iR(r);if(Sm.has(r))return Sm.get(r);const e=oR(r);return e!==r&&(Sm.set(r,e),vp.set(e,r)),e}const Am=r=>vp.get(r);function lR(r,e,{blocked:n,upgrade:s,blocking:o,terminated:u}={}){const f=indexedDB.open(r,e),p=ns(f);return s&&f.addEventListener("upgradeneeded",m=>{s(ns(f.result),m.oldVersion,m.newVersion,ns(f.transaction),m)}),n&&f.addEventListener("blocked",m=>n(m.oldVersion,m.newVersion,m)),p.then(m=>{u&&m.addEventListener("close",()=>u()),o&&m.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),p}const uR=["get","getKey","getAll","getAllKeys","count"],cR=["put","add","delete","clear"],bm=new Map;function $v(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(bm.get(e))return bm.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=cR.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||uR.includes(n)))return;const u=async function(f,...p){const m=this.transaction(f,o?"readwrite":"readonly");let y=m.store;return s&&(y=y.index(p.shift())),(await Promise.all([y[n](...p),o&&m.done]))[0]};return bm.set(e,u),u}sR(r=>({...r,get:(e,n,s)=>$v(e,n)||r.get(e,n,s),has:(e,n)=>!!$v(e,n)||r.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(fR(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function fR(r){return r.getComponent()?.type==="VERSION"}const Hm="@firebase/app",Xv="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dr=new _p("@firebase/app"),dR="@firebase/app-compat",mR="@firebase/analytics-compat",pR="@firebase/analytics",gR="@firebase/app-check-compat",yR="@firebase/app-check",_R="@firebase/auth",vR="@firebase/auth-compat",ER="@firebase/database",TR="@firebase/data-connect",SR="@firebase/database-compat",AR="@firebase/functions",bR="@firebase/functions-compat",wR="@firebase/installations",RR="@firebase/installations-compat",xR="@firebase/messaging",IR="@firebase/messaging-compat",CR="@firebase/performance",NR="@firebase/performance-compat",DR="@firebase/remote-config",OR="@firebase/remote-config-compat",MR="@firebase/storage",VR="@firebase/storage-compat",PR="@firebase/firestore",kR="@firebase/ai",LR="@firebase/firestore-compat",UR="firebase",jR="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fm="[DEFAULT]",zR={[Hm]:"fire-core",[dR]:"fire-core-compat",[pR]:"fire-analytics",[mR]:"fire-analytics-compat",[yR]:"fire-app-check",[gR]:"fire-app-check-compat",[_R]:"fire-auth",[vR]:"fire-auth-compat",[ER]:"fire-rtdb",[TR]:"fire-data-connect",[SR]:"fire-rtdb-compat",[AR]:"fire-fn",[bR]:"fire-fn-compat",[wR]:"fire-iid",[RR]:"fire-iid-compat",[xR]:"fire-fcm",[IR]:"fire-fcm-compat",[CR]:"fire-perf",[NR]:"fire-perf-compat",[DR]:"fire-rc",[OR]:"fire-rc-compat",[MR]:"fire-gcs",[VR]:"fire-gcs-compat",[PR]:"fire-fst",[LR]:"fire-fst-compat",[kR]:"fire-vertex","fire-js":"fire-js",[UR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hu=new Map,BR=new Map,Gm=new Map;function Wv(r,e){try{r.container.addComponent(e)}catch(n){dr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,n)}}function To(r){const e=r.name;if(Gm.has(e))return dr.debug(`There were multiple attempts to register component ${e}.`),!1;Gm.set(e,r);for(const n of hu.values())Wv(n,r);for(const n of BR.values())Wv(n,r);return!0}function Ep(r,e){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(e)}function Rn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},is=new Au("app","Firebase",qR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new aa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw is.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oo=jR;function W0(r,e={}){let n=r;typeof e!="object"&&(e={name:e});const s={name:Fm,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw is.create("bad-app-name",{appName:String(o)});if(n||(n=G0()),!n)throw is.create("no-options");const u=hu.get(o);if(u){if(sa(n,u.options)&&sa(s,u.config))return u;throw is.create("duplicate-app",{appName:o})}const f=new $1(o);for(const m of Gm.values())f.addComponent(m);const p=new HR(n,s,f);return hu.set(o,p),p}function Tp(r=Fm){const e=hu.get(r);if(!e&&r===Fm&&G0())return W0();if(!e)throw is.create("no-app",{appName:r});return e}function FR(){return Array.from(hu.values())}function rs(r,e,n){let s=zR[r]??r;n&&(s+=`-${n}`);const o=s.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const f=[`Unable to register library "${s}" with version "${e}":`];o&&f.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&u&&f.push("and"),u&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),dr.warn(f.join(" "));return}To(new aa(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GR="firebase-heartbeat-database",QR=1,fu="firebase-heartbeat-store";let wm=null;function J0(){return wm||(wm=lR(GR,QR,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(fu)}catch(n){console.warn(n)}}}}).catch(r=>{throw is.create("idb-open",{originalErrorMessage:r.message})})),wm}async function YR(r){try{const n=(await J0()).transaction(fu),s=await n.objectStore(fu).get(Z0(r));return await n.done,s}catch(e){if(e instanceof _r)dr.warn(e.message);else{const n=is.create("idb-get",{originalErrorMessage:e?.message});dr.warn(n.message)}}}async function Jv(r,e){try{const s=(await J0()).transaction(fu,"readwrite");await s.objectStore(fu).put(e,Z0(r)),await s.done}catch(n){if(n instanceof _r)dr.warn(n.message);else{const s=is.create("idb-set",{originalErrorMessage:n?.message});dr.warn(s.message)}}}function Z0(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KR=1024,$R=30;class XR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new JR(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Zv();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>$R){const o=ZR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){dr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Zv(),{heartbeatsToSend:n,unsentEntries:s}=WR(this._heartbeatsCache.heartbeats),o=wh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return dr.warn(e),""}}}function Zv(){return new Date().toISOString().substring(0,10)}function WR(r,e=KR){const n=[];let s=r.slice();for(const o of r){const u=n.find(f=>f.agent===o.agent);if(u){if(u.dates.push(o.date),eE(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),eE(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class JR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return L1()?U1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await YR(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Jv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Jv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function eE(r){return wh(JSON.stringify({version:2,heartbeats:r})).length}function ZR(r){if(r.length===0)return-1;let e=0,n=r[0].date;for(let s=1;s<r.length;s++)r[s].date<n&&(n=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ex(r){To(new aa("platform-logger",e=>new hR(e),"PRIVATE")),To(new aa("heartbeat",e=>new XR(e),"PRIVATE")),rs(Hm,Xv,r),rs(Hm,Xv,"esm2020"),rs("fire-js","")}ex("");function eT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const tx=eT,tT=new Au("auth","Firebase",eT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rh=new _p("@firebase/auth");function nx(r,...e){Rh.logLevel<=ke.WARN&&Rh.warn(`Auth (${Oo}): ${r}`,...e)}function dh(r,...e){Rh.logLevel<=ke.ERROR&&Rh.error(`Auth (${Oo}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $n(r,...e){throw Sp(r,...e)}function Ci(r,...e){return Sp(r,...e)}function nT(r,e,n){const s={...tx(),[e]:n};return new Au("auth","Firebase",s).create(e,{appName:r.name})}function Ni(r){return nT(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Sp(r,...e){if(typeof r!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return tT.create(r,...e)}function ye(r,e,...n){if(!r)throw Sp(e,...n)}function hr(r){const e="INTERNAL ASSERTION FAILED: "+r;throw dh(e),new Error(e)}function mr(r,e){r||hr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xh(){return typeof self<"u"&&self.location?.href||""}function ix(){return tE()==="http:"||tE()==="https:"}function tE(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rx(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ix()||M1()||"connection"in navigator)?navigator.onLine:!0}function sx(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(e,n){this.shortDelay=e,this.longDelay=n,mr(n>e,"Short delay should be less than long delay!"),this.isMobile=N1()||V1()}get(){return rx()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ap(r,e){mr(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;hr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;hr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;hr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ax={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ox=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],lx=new wu(3e4,6e4);function Ui(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function ci(r,e,n,s,o={}){return rT(r,o,async()=>{let u={},f={};s&&(e==="GET"?f=s:u={body:JSON.stringify(s)});const p=bu({key:r.config.apiKey,...f}).slice(1),m=await r._getAdditionalHeaders();m["Content-Type"]="application/json",r.languageCode&&(m["X-Firebase-Locale"]=r.languageCode);const y={method:e,headers:m,...u};return O1()||(y.referrerPolicy="no-referrer"),r.emulatorConfig&&Do(r.emulatorConfig.host)&&(y.credentials="include"),iT.fetch()(await sT(r,r.config.apiHost,n,p),y)})}async function rT(r,e,n){r._canInitEmulator=!1;const s={...ax,...e};try{const o=new cx(r),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const f=await u.json();if("needConfirmation"in f)throw sh(r,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{const p=u.ok?f.errorMessage:f.error.message,[m,y]=p.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw sh(r,"credential-already-in-use",f);if(m==="EMAIL_EXISTS")throw sh(r,"email-already-in-use",f);if(m==="USER_DISABLED")throw sh(r,"user-disabled",f);const T=s[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw nT(r,T,y);$n(r,T)}}catch(o){if(o instanceof _r)throw o;$n(r,"network-request-failed",{message:String(o)})}}async function Ru(r,e,n,s,o={}){const u=await ci(r,e,n,s,o);return"mfaPendingCredential"in u&&$n(r,"multi-factor-auth-required",{_serverResponse:u}),u}async function sT(r,e,n,s){const o=`${e}${n}?${s}`,u=r,f=u.config.emulator?Ap(r.config,o):`${r.config.apiScheme}://${o}`;return ox.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(f).toString():f}function ux(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class cx{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Ci(this.auth,"network-request-failed")),lx.get())})}}function sh(r,e,n){const s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=Ci(r,e,s);return o.customData._tokenResponse=n,o}function nE(r){return r!==void 0&&r.enterprise!==void 0}class hx{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return ux(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function fx(r,e){return ci(r,"GET","/v2/recaptchaConfig",Ui(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dx(r,e){return ci(r,"POST","/v1/accounts:delete",e)}async function Ih(r,e){return ci(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ru(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function mx(r,e=!1){const n=Tt(r),s=await n.getIdToken(e),o=bp(s);ye(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,f=u?.sign_in_provider;return{claims:o,token:s,authTime:ru(Rm(o.auth_time)),issuedAtTime:ru(Rm(o.iat)),expirationTime:ru(Rm(o.exp)),signInProvider:f||null,signInSecondFactor:u?.sign_in_second_factor||null}}function Rm(r){return Number(r)*1e3}function bp(r){const[e,n,s]=r.split(".");if(e===void 0||n===void 0||s===void 0)return dh("JWT malformed, contained fewer than 3 sections"),null;try{const o=H0(n);return o?JSON.parse(o):(dh("Failed to decode base64 JWT payload"),null)}catch(o){return dh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function iE(r){const e=bp(r);return ye(e,"internal-error"),ye(typeof e.exp<"u","internal-error"),ye(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function So(r,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof _r&&px(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function px({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ru(this.lastLoginAt),this.creationTime=ru(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ch(r){const e=r.auth,n=await r.getIdToken(),s=await So(r,Ih(e,{idToken:n}));ye(s?.users.length,e,"internal-error");const o=s.users[0];r._notifyReloadListener(o);const u=o.providerUserInfo?.length?aT(o.providerUserInfo):[],f=_x(r.providerData,u),p=r.isAnonymous,m=!(r.email&&o.passwordHash)&&!f?.length,y=p?m:!1,T={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:f,metadata:new Qm(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(r,T)}async function yx(r){const e=Tt(r);await Ch(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function _x(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function aT(r){return r.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vx(r,e){const n=await rT(r,{},async()=>{const s=bu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=r.config,f=await sT(r,o,"/v1/token",`key=${u}`),p=await r._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:p,body:s};return r.emulatorConfig&&Do(r.emulatorConfig.host)&&(m.credentials="include"),iT.fetch()(f,m)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Ex(r,e){return ci(r,"POST","/v2/accounts:revokeToken",Ui(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ye(e.idToken,"internal-error"),ye(typeof e.idToken<"u","internal-error"),ye(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):iE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ye(e.length!==0,"internal-error");const n=iE(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ye(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:u}=await vx(e,n);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:u}=n,f=new go;return s&&(ye(typeof s=="string","internal-error",{appName:e}),f.refreshToken=s),o&&(ye(typeof o=="string","internal-error",{appName:e}),f.accessToken=o),u&&(ye(typeof u=="number","internal-error",{appName:e}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new go,this.toJSON())}_performRefresh(){return hr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yr(r,e){ye(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class ii{constructor({uid:e,auth:n,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new gx(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Qm(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await So(this,this.stsTokenManager.getToken(this.auth,e));return ye(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return mx(this,e)}reload(){return yx(this)}_assign(e){this!==e&&(ye(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ii({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ye(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Ch(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Rn(this.auth.app))return Promise.reject(Ni(this.auth));const e=await this.getIdToken();return await So(this,dx(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,o=n.email??void 0,u=n.phoneNumber??void 0,f=n.photoURL??void 0,p=n.tenantId??void 0,m=n._redirectEventId??void 0,y=n.createdAt??void 0,T=n.lastLoginAt??void 0,{uid:A,emailVerified:R,isAnonymous:N,providerData:B,stsTokenManager:$}=n;ye(A&&$,e,"internal-error");const L=go.fromJSON(this.name,$);ye(typeof A=="string",e,"internal-error"),Yr(s,e.name),Yr(o,e.name),ye(typeof R=="boolean",e,"internal-error"),ye(typeof N=="boolean",e,"internal-error"),Yr(u,e.name),Yr(f,e.name),Yr(p,e.name),Yr(m,e.name),Yr(y,e.name),Yr(T,e.name);const se=new ii({uid:A,auth:e,email:o,emailVerified:R,displayName:s,isAnonymous:N,photoURL:f,phoneNumber:u,tenantId:p,stsTokenManager:L,createdAt:y,lastLoginAt:T});return B&&Array.isArray(B)&&(se.providerData=B.map(ae=>({...ae}))),m&&(se._redirectEventId=m),se}static async _fromIdTokenResponse(e,n,s=!1){const o=new go;o.updateFromServerResponse(n);const u=new ii({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await Ch(u),u}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];ye(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?aT(o.providerUserInfo):[],f=!(o.email&&o.passwordHash)&&!u?.length,p=new go;p.updateFromIdToken(s);const m=new ii({uid:o.localId,auth:e,stsTokenManager:p,isAnonymous:f}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Qm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(m,y),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rE=new Map;function fr(r){mr(r instanceof Function,"Expected a class definition");let e=rE.get(r);return e?(mr(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,rE.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}oT.type="NONE";const sE=oT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mh(r,e,n){return`firebase:${r}:${e}:${n}`}class yo{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=mh(this.userKey,o.apiKey,u),this.fullPersistenceKey=mh("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Ih(this.auth,{idToken:e}).catch(()=>{});return n?ii._fromGetAccountInfoResponse(this.auth,n,e):null}return ii._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new yo(fr(sE),e,s);const o=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let u=o[0]||fr(sE);const f=mh(s,e.config.apiKey,e.name);let p=null;for(const y of n)try{const T=await y._get(f);if(T){let A;if(typeof T=="string"){const R=await Ih(e,{idToken:T}).catch(()=>{});if(!R)break;A=await ii._fromGetAccountInfoResponse(e,R,T)}else A=ii._fromJSON(e,T);y!==u&&(p=A),u=y;break}}catch{}const m=o.filter(y=>y._shouldAllowMigration);return!u._shouldAllowMigration||!m.length?new yo(u,e,s):(u=m[0],p&&await u._set(f,p.toJSON()),await Promise.all(n.map(async y=>{if(y!==u)try{await y._remove(f)}catch{}})),new yo(u,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aE(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(hT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(lT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(dT(e))return"Blackberry";if(mT(e))return"Webos";if(uT(e))return"Safari";if((e.includes("chrome/")||cT(e))&&!e.includes("edge/"))return"Chrome";if(fT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(n);if(s?.length===2)return s[1]}return"Other"}function lT(r=sn()){return/firefox\//i.test(r)}function uT(r=sn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function cT(r=sn()){return/crios\//i.test(r)}function hT(r=sn()){return/iemobile/i.test(r)}function fT(r=sn()){return/android/i.test(r)}function dT(r=sn()){return/blackberry/i.test(r)}function mT(r=sn()){return/webos/i.test(r)}function wp(r=sn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function Tx(r=sn()){return wp(r)&&!!window.navigator?.standalone}function Sx(){return P1()&&document.documentMode===10}function pT(r=sn()){return wp(r)||fT(r)||mT(r)||dT(r)||/windows phone/i.test(r)||hT(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gT(r,e=[]){let n;switch(r){case"Browser":n=aE(sn());break;case"Worker":n=`${aE(sn())}-${r}`;break;default:n=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Oo}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=u=>new Promise((f,p)=>{try{const m=e(u);f(m)}catch(m){p(m)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bx(r,e={}){return ci(r,"GET","/v2/passwordPolicy",Ui(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wx=6;class Rx{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??wx,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new oE(this),this.idTokenSubscription=new oE(this),this.beforeStateQueue=new Ax(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=tT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=fr(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await yo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Ih(this,{idToken:e}),s=await ii._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Rn(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(f,f))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,f=s?._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===f)&&p?.user&&(s=p.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ye(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ch(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=sx()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Rn(this.app))return Promise.reject(Ni(this));const n=e?Tt(e):null;return n&&ye(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ye(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Rn(this.app)?Promise.reject(Ni(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Rn(this.app)?Promise.reject(Ni(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(fr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await bx(this),n=new Rx(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Au("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await Ex(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&fr(e)||this._popupRedirectResolver;ye(n,this,"argument-error"),this.redirectPersistenceManager=await yo.create(this,[fr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let f=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(ye(p,this,"internal-error"),p.then(()=>{f||u(this.currentUser)}),typeof n=="function"){const m=e.addObserver(n,s,o);return()=>{f=!0,m()}}else{const m=e.addObserver(n);return()=>{f=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ye(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=gT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(Rn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&nx(`Error while retrieving App Check token: ${e.error}`),e?.token}}function ji(r){return Tt(r)}class oE{constructor(e){this.auth=e,this.observer=null,this.addObserver=H1(n=>this.observer=n)}get next(){return ye(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Ix(r){Yh=r}function yT(r){return Yh.loadJS(r)}function Cx(){return Yh.recaptchaEnterpriseScript}function Nx(){return Yh.gapiScript}function Dx(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class Ox{constructor(){this.enterprise=new Mx}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class Mx{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const Vx="recaptcha-enterprise",_T="NO_RECAPTCHA";class Px{constructor(e){this.type=Vx,this.auth=ji(e)}async verify(e="verify",n=!1){async function s(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(f,p)=>{fx(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const y=new hx(m);return u.tenantId==null?u._agentRecaptchaConfig=y:u._tenantRecaptchaConfigs[u.tenantId]=y,f(y.siteKey)}}).catch(m=>{p(m)})})}function o(u,f,p){const m=window.grecaptcha;nE(m)?m.enterprise.ready(()=>{m.enterprise.execute(u,{action:e}).then(y=>{f(y)}).catch(()=>{f(_T)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Ox().execute("siteKey",{action:"verify"}):new Promise((u,f)=>{s(this.auth).then(p=>{if(!n&&nE(window.grecaptcha))o(p,u,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let m=Cx();m.length!==0&&(m+=p),yT(m).then(()=>{o(p,u,f)}).catch(y=>{f(y)})}}).catch(p=>{f(p)})})}}async function lE(r,e,n,s=!1,o=!1){const u=new Px(r);let f;if(o)f=_T;else try{f=await u.verify(n)}catch{f=await u.verify(n,!0)}const p={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const m=p.phoneEnrollmentInfo.phoneNumber,y=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:y,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const m=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return s?Object.assign(p,{captchaResp:f}):Object.assign(p,{captchaResponse:f}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function du(r,e,n,s,o){if(r._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await lE(r,e,n,n==="getOobCode");return s(r,u)}else return s(r,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await lE(r,e,n,n==="getOobCode");return s(r,f)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kx(r,e){const n=Ep(r,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(sa(u,e??{}))return o;$n(o,"already-initialized")}return n.initialize({options:e})}function Lx(r,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(fr);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e?.popupRedirectResolver)}function Ux(r,e,n){const s=ji(r);ye(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,u=vT(e),{host:f,port:p}=jx(e),m=p===null?"":`:${p}`,y={url:`${u}//${f}${m}/`},T=Object.freeze({host:f,port:p,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){ye(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),ye(sa(y,s.config.emulator)&&sa(T,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=y,s.emulatorConfig=T,s.settings.appVerificationDisabledForTesting=!0,Do(f)?(Y0(`${u}//${f}${m}`),K0("Auth",!0)):zx()}function vT(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function jx(r){const e=vT(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:uE(s.substr(u.length+1))}}else{const[u,f]=s.split(":");return{host:u,port:uE(f)}}}function uE(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function zx(){function r(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return hr("not implemented")}_getIdTokenResponse(e){return hr("not implemented")}_linkToIdToken(e,n){return hr("not implemented")}_getReauthenticationResolver(e){return hr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ET(r,e){return ci(r,"POST","/v1/accounts:resetPassword",Ui(r,e))}async function Bx(r,e){return ci(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qx(r,e){return Ru(r,"POST","/v1/accounts:signInWithPassword",Ui(r,e))}async function TT(r,e){return ci(r,"POST","/v1/accounts:sendOobCode",Ui(r,e))}async function Hx(r,e){return TT(r,e)}async function Fx(r,e){return TT(r,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gx(r,e){return Ru(r,"POST","/v1/accounts:signInWithEmailLink",Ui(r,e))}async function Qx(r,e){return Ru(r,"POST","/v1/accounts:signInWithEmailLink",Ui(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu extends Rp{constructor(e,n,s,o=null){super("password",s),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new mu(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new mu(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return du(e,n,"signInWithPassword",qx);case"emailLink":return Gx(e,{email:this._email,oobCode:this._password});default:$n(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return du(e,s,"signUpPassword",Bx);case"emailLink":return Qx(e,{idToken:n,email:this._email,oobCode:this._password});default:$n(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _o(r,e){return Ru(r,"POST","/v1/accounts:signInWithIdp",Ui(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx="http://localhost";class oa extends Rp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new oa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):$n("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...u}=n;if(!s||!o)return null;const f=new oa(s,o);return f.idToken=u.idToken||void 0,f.accessToken=u.accessToken||void 0,f.secret=u.secret,f.nonce=u.nonce,f.pendingToken=u.pendingToken||null,f}_getIdTokenResponse(e){const n=this.buildRequest();return _o(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,_o(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,_o(e,n)}buildRequest(){const e={requestUri:Yx,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=bu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kx(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function $x(r){const e=Xl(Wl(r)).link,n=e?Xl(Wl(e)).deep_link_id:null,s=Xl(Wl(r)).deep_link_id;return(s?Xl(Wl(s)).link:null)||s||n||e||r}class Kh{constructor(e){const n=Xl(Wl(e)),s=n.apiKey??null,o=n.oobCode??null,u=Kx(n.mode??null);ye(s&&o&&u,"argument-error"),this.apiKey=s,this.operation=u,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=$x(e);try{return new Kh(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(){this.providerId=fa.PROVIDER_ID}static credential(e,n){return mu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=Kh.parseLink(n);return ye(s,"argument-error"),mu._fromEmailAndCode(e,s.code,s.tenantId)}}fa.PROVIDER_ID="password";fa.EMAIL_PASSWORD_SIGN_IN_METHOD="password";fa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu extends ST{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr extends xu{constructor(){super("facebook.com")}static credential(e){return oa._fromParams({providerId:Kr.PROVIDER_ID,signInMethod:Kr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Kr.credentialFromTaggedObject(e)}static credentialFromError(e){return Kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Kr.credential(e.oauthAccessToken)}catch{return null}}}Kr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Kr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r extends xu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return oa._fromParams({providerId:$r.PROVIDER_ID,signInMethod:$r.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return $r.credentialFromTaggedObject(e)}static credentialFromError(e){return $r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return $r.credential(n,s)}catch{return null}}}$r.GOOGLE_SIGN_IN_METHOD="google.com";$r.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr extends xu{constructor(){super("github.com")}static credential(e){return oa._fromParams({providerId:Xr.PROVIDER_ID,signInMethod:Xr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xr.credentialFromTaggedObject(e)}static credentialFromError(e){return Xr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Xr.credential(e.oauthAccessToken)}catch{return null}}}Xr.GITHUB_SIGN_IN_METHOD="github.com";Xr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr extends xu{constructor(){super("twitter.com")}static credential(e,n){return oa._fromParams({providerId:Wr.PROVIDER_ID,signInMethod:Wr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Wr.credentialFromTaggedObject(e)}static credentialFromError(e){return Wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Wr.credential(n,s)}catch{return null}}}Wr.TWITTER_SIGN_IN_METHOD="twitter.com";Wr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xx(r,e){return Ru(r,"POST","/v1/accounts:signUp",Ui(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const u=await ii._fromIdTokenResponse(e,s,o),f=cE(s);return new la({user:u,providerId:f,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=cE(s);return new la({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function cE(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh extends _r{constructor(e,n,s,o){super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Nh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new Nh(e,n,s,o)}}function AT(r,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Nh._fromErrorAndOperation(r,u,e,s):u})}async function Wx(r,e,n=!1){const s=await So(r,e._linkToIdToken(r.auth,await r.getIdToken()),n);return la._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jx(r,e,n=!1){const{auth:s}=r;if(Rn(s.app))return Promise.reject(Ni(s));const o="reauthenticate";try{const u=await So(r,AT(s,o,e,r),n);ye(u.idToken,s,"internal-error");const f=bp(u.idToken);ye(f,s,"internal-error");const{sub:p}=f;return ye(r.uid===p,s,"user-mismatch"),la._forOperation(r,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&$n(s,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bT(r,e,n=!1){if(Rn(r.app))return Promise.reject(Ni(r));const s="signIn",o=await AT(r,s,e),u=await la._fromIdTokenResponse(r,s,o);return n||await r._updateCurrentUser(u.user),u}async function wT(r,e){return bT(ji(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?Ip._fromServerResponse(e,n):"totpInfo"in n?Cp._fromServerResponse(e,n):$n(e,"internal-error")}}class Ip extends xp{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new Ip(n)}}class Cp extends xp{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new Cp(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zx(r,e,n){ye(n.url?.length>0,r,"invalid-continue-uri"),ye(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,r,"invalid-dynamic-link-domain"),ye(typeof n.linkDomain>"u"||n.linkDomain.length>0,r,"invalid-hosting-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.linkDomain=n.linkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(ye(n.iOS.bundleId.length>0,r,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(ye(n.android.packageName.length>0,r,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Np(r){const e=ji(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function eI(r,e,n){const s=ji(r);await du(s,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",Hx)}async function tI(r,e,n){await ET(Tt(r),{oobCode:e,newPassword:n}).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&Np(r),s})}async function nI(r,e){const n=Tt(r),s=await ET(n,{oobCode:e}),o=s.requestType;switch(ye(o,n,"internal-error"),o){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ye(s.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ye(s.mfaInfo,n,"internal-error");default:ye(s.email,n,"internal-error")}let u=null;return s.mfaInfo&&(u=xp._fromServerResponse(ji(n),s.mfaInfo)),{data:{email:(s.requestType==="VERIFY_AND_CHANGE_EMAIL"?s.newEmail:s.email)||null,previousEmail:(s.requestType==="VERIFY_AND_CHANGE_EMAIL"?s.email:s.newEmail)||null,multiFactorInfo:u},operation:o}}async function iI(r,e){const{data:n}=await nI(Tt(r),e);return n.email}async function rI(r,e,n){if(Rn(r.app))return Promise.reject(Ni(r));const s=ji(r),f=await du(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Xx).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&Np(r),m}),p=await la._fromIdTokenResponse(s,"signIn",f);return await s._updateCurrentUser(p.user),p}function sI(r,e,n){return Rn(r.app)?Promise.reject(Ni(r)):wT(Tt(r),fa.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&Np(r),s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aI(r,e,n){const s=ji(r),o={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function u(f,p){ye(p.handleCodeInApp,s,"argument-error"),p&&Zx(s,f,p)}u(o,n),await du(s,o,"getOobCode",Fx)}function oI(r,e){return Kh.parseLink(e)?.operation==="EMAIL_SIGNIN"}async function lI(r,e,n){if(Rn(r.app))return Promise.reject(Ni(r));const s=Tt(r),o=fa.credentialWithLink(e,n||xh());return ye(o._tenantId===(s.tenantId||null),s,"tenant-id-mismatch"),wT(s,o)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uI(r,e){return ci(r,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RT(r,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const s=Tt(r),u={idToken:await s.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},f=await So(s,uI(s.auth,u));s.displayName=f.displayName||null,s.photoURL=f.photoUrl||null;const p=s.providerData.find(({providerId:m})=>m==="password");p&&(p.displayName=s.displayName,p.photoURL=s.photoURL),await s._updateTokensIfNecessary(f)}function cI(r,e,n,s){return Tt(r).onIdTokenChanged(e,n,s)}function hI(r,e,n){return Tt(r).beforeAuthStateChanged(e,n)}function fI(r,e,n,s){return Tt(r).onAuthStateChanged(e,n,s)}function dI(r){return Tt(r).signOut()}const Dh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Dh,"1"),this.storage.removeItem(Dh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mI=1e3,pI=10;class IT extends xT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=pT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((f,p,m)=>{this.notifyListeners(f,m)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const f=this.storage.getItem(s);!n&&this.localCache[s]===f||this.notifyListeners(s,f)},u=this.storage.getItem(s);Sx()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,pI):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},mI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}IT.type="LOCAL";const gI=IT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT extends xT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}CT.type="SESSION";const NT=CT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yI(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new $h(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:u}=n.data,f=this.handlersMap[o];if(!f?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const p=Array.from(f).map(async y=>y(n.origin,u)),m=await yI(p);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:m})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}$h.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dp(r="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return r+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,f;return new Promise((p,m)=>{const y=Dp("",20);o.port1.start();const T=setTimeout(()=>{m(new Error("unsupported_event"))},s);f={messageChannel:o,onMessage(A){const R=A;if(R.data.eventId===y)switch(R.data.status){case"ack":clearTimeout(T),u=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),p(R.data.response);break;default:clearTimeout(T),clearTimeout(u),m(new Error("invalid_response"));break}}},this.handlers.add(f),o.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[o.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Di(){return window}function vI(r){Di().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DT(){return typeof Di().WorkerGlobalScope<"u"&&typeof Di().importScripts=="function"}async function EI(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function TI(){return navigator?.serviceWorker?.controller||null}function SI(){return DT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OT="firebaseLocalStorageDb",AI=1,Oh="firebaseLocalStorage",MT="fbase_key";class Iu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Xh(r,e){return r.transaction([Oh],e?"readwrite":"readonly").objectStore(Oh)}function bI(){const r=indexedDB.deleteDatabase(OT);return new Iu(r).toPromise()}function Ym(){const r=indexedDB.open(OT,AI);return new Promise((e,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(Oh,{keyPath:MT})}catch(o){n(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(Oh)?e(s):(s.close(),await bI(),e(await Ym()))})})}async function hE(r,e,n){const s=Xh(r,!0).put({[MT]:e,value:n});return new Iu(s).toPromise()}async function wI(r,e){const n=Xh(r,!1).get(e),s=await new Iu(n).toPromise();return s===void 0?null:s.value}function fE(r,e){const n=Xh(r,!0).delete(e);return new Iu(n).toPromise()}const RI=800,xI=3;class VT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ym(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>xI)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return DT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=$h._getInstance(SI()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await EI(),!this.activeServiceWorker)return;this.sender=new _I(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||TI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ym();return await hE(e,Dh,"1"),await fE(e,Dh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>hE(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>wI(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>fE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=Xh(o,!1).getAll();return new Iu(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),RI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}VT.type="LOCAL";const II=VT;new wu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CI(r,e){return e?fr(e):(ye(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op extends Rp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return _o(e,this._buildIdpRequest())}_linkToIdToken(e,n){return _o(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return _o(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function NI(r){return bT(r.auth,new Op(r),r.bypassAuthState)}function DI(r){const{auth:e,user:n}=r;return ye(n,e,"internal-error"),Jx(n,new Op(r),r.bypassAuthState)}async function OI(r){const{auth:e,user:n}=r;return ye(n,e,"internal-error"),Wx(n,new Op(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(e,n,s,o,u=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:u,error:f,type:p}=e;if(f){this.reject(f);return}const m={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(m))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return NI;case"linkViaPopup":case"linkViaRedirect":return OI;case"reauthViaPopup":case"reauthViaRedirect":return DI;default:$n(this.auth,"internal-error")}}resolve(e){mr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){mr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MI=new wu(2e3,1e4);class po extends PT{constructor(e,n,s,o,u){super(e,n,o,u),this.provider=s,this.authWindow=null,this.pollId=null,po.currentPopupAction&&po.currentPopupAction.cancel(),po.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ye(e,this.auth,"internal-error"),e}async onExecution(){mr(this.filter.length===1,"Popup operations only handle one event");const e=Dp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ci(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ci(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,po.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ci(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,MI.get())};e()}}po.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VI="pendingRedirect",ph=new Map;class PI extends PT{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=ph.get(this.auth._key());if(!e){try{const s=await kI(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}ph.set(this.auth._key(),e)}return this.bypassAuthState||ph.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function kI(r,e){const n=jI(e),s=UI(r);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function LI(r,e){ph.set(r._key(),e)}function UI(r){return fr(r._redirectPersistence)}function jI(r){return mh(VI,r.config.apiKey,r.name)}async function zI(r,e,n=!1){if(Rn(r.app))return Promise.reject(Ni(r));const s=ji(r),o=CI(s,e),f=await new PI(s,o,n).execute();return f&&!n&&(delete f.user._redirectEventId,await s._persistUserIfCurrent(f.user),await s._setRedirectUser(null,e)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BI=600*1e3;class qI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!HI(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!kT(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Ci(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=BI&&this.cachedEventUids.clear(),this.cachedEventUids.has(dE(e))}saveEventToCache(e){this.cachedEventUids.add(dE(e)),this.lastProcessedEventTime=Date.now()}}function dE(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function kT({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function HI(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return kT(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FI(r,e={}){return ci(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,QI=/^https?/;async function YI(r){if(r.config.emulator)return;const{authorizedDomains:e}=await FI(r);for(const n of e)try{if(KI(n))return}catch{}$n(r,"unauthorized-domain")}function KI(r){const e=xh(),{protocol:n,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const f=new URL(r);return f.hostname===""&&s===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===s}if(!QI.test(n))return!1;if(GI.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $I=new wu(3e4,6e4);function mE(){const r=Di().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function XI(r){return new Promise((e,n)=>{function s(){mE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{mE(),n(Ci(r,"network-request-failed"))},timeout:$I.get()})}if(Di().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Di().gapi?.load)s();else{const o=Dx("iframefcb");return Di()[o]=()=>{gapi.load?s():n(Ci(r,"network-request-failed"))},yT(`${Nx()}?onload=${o}`).catch(u=>n(u))}}).catch(e=>{throw gh=null,e})}let gh=null;function WI(r){return gh=gh||XI(r),gh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JI=new wu(5e3,15e3),ZI="__/auth/iframe",eC="emulator/auth/iframe",tC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},nC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function iC(r){const e=r.config;ye(e.authDomain,r,"auth-domain-config-required");const n=e.emulator?Ap(e,eC):`https://${r.config.authDomain}/${ZI}`,s={apiKey:e.apiKey,appName:r.name,v:Oo},o=nC.get(r.config.apiHost);o&&(s.eid=o);const u=r._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${bu(s).slice(1)}`}async function rC(r){const e=await WI(r),n=Di().gapi;return ye(n,r,"internal-error"),e.open({where:document.body,url:iC(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:tC,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const f=Ci(r,"network-request-failed"),p=Di().setTimeout(()=>{u(f)},JI.get());function m(){Di().clearTimeout(p),o(s)}s.ping(m).then(m,()=>{u(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},aC=500,oC=600,lC="_blank",uC="http://localhost";class pE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function cC(r,e,n,s=aC,o=oC){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),f=Math.max((window.screen.availWidth-s)/2,0).toString();let p="";const m={...sC,width:s.toString(),height:o.toString(),top:u,left:f},y=sn().toLowerCase();n&&(p=cT(y)?lC:n),lT(y)&&(e=e||uC,m.scrollbars="yes");const T=Object.entries(m).reduce((R,[N,B])=>`${R}${N}=${B},`,"");if(Tx(y)&&p!=="_self")return hC(e||"",p),new pE(null);const A=window.open(e||"",p,T);ye(A,r,"popup-blocked");try{A.focus()}catch{}return new pE(A)}function hC(r,e){const n=document.createElement("a");n.href=r,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC="__/auth/handler",dC="emulator/auth/handler",mC=encodeURIComponent("fac");async function gE(r,e,n,s,o,u){ye(r.config.authDomain,r,"auth-domain-config-required"),ye(r.config.apiKey,r,"invalid-api-key");const f={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:s,v:Oo,eventId:o};if(e instanceof ST){e.setDefaultLanguage(r.languageCode),f.providerId=e.providerId||"",q1(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[T,A]of Object.entries({}))f[T]=A}if(e instanceof xu){const T=e.getScopes().filter(A=>A!=="");T.length>0&&(f.scopes=T.join(","))}r.tenantId&&(f.tid=r.tenantId);const p=f;for(const T of Object.keys(p))p[T]===void 0&&delete p[T];const m=await r._getAppCheckToken(),y=m?`#${mC}=${encodeURIComponent(m)}`:"";return`${pC(r)}?${bu(p).slice(1)}${y}`}function pC({config:r}){return r.emulator?Ap(r,dC):`https://${r.authDomain}/${fC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xm="webStorageSupport";class gC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=NT,this._completeRedirectFn=zI,this._overrideRedirectResult=LI}async _openPopup(e,n,s,o){mr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await gE(e,n,s,xh(),o);return cC(e,u,Dp())}async _openRedirect(e,n,s,o){await this._originValidation(e);const u=await gE(e,n,s,xh(),o);return vI(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(mr(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await rC(e),s=new qI(e);return n.register("authEvent",o=>(ye(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(xm,{type:xm},o=>{const u=o?.[0]?.[xm];u!==void 0&&n(!!u),$n(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=YI(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return pT()||uT()||wp()}}const yC=gC;var yE="@firebase/auth",_E="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ye(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vC(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function EC(r){To(new aa("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:f,authDomain:p}=s.options;ye(f&&!f.includes(":"),"invalid-api-key",{appName:s.name});const m={apiKey:f,authDomain:p,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:gT(r)},y=new xx(s,o,u,m);return Lx(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),To(new aa("auth-internal",e=>{const n=ji(e.getProvider("auth").getImmediate());return(s=>new _C(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),rs(yE,_E,vC(r)),rs(yE,_E,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TC=300,SC=Q0("authIdTokenMaxAge")||TC;let vE=null;const AC=r=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>SC)return;const o=n?.token;vE!==o&&(vE=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function bC(r=Tp()){const e=Ep(r,"auth");if(e.isInitialized())return e.getImmediate();const n=kx(r,{popupRedirectResolver:yC,persistence:[II,gI,NT]}),s=Q0("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const f=AC(u.toString());hI(n,f,()=>f(n.currentUser)),cI(n,p=>f(p))}}const o=F0("auth");return o&&Ux(n,`http://${o}`),n}function wC(){return document.getElementsByTagName("head")?.[0]??document}Ix({loadJS(r){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const u=Ci("internal-error");u.customData=o,n(u)},s.type="text/javascript",s.charset="UTF-8",wC().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});EC("Browser");var EE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ss,LT;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(M,x){function w(){}w.prototype=x.prototype,M.D=x.prototype,M.prototype=new w,M.prototype.constructor=M,M.C=function(O,V,k){for(var I=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)I[Ae-2]=arguments[Ae];return x.prototype[V].apply(O,I)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(M,x,w){w||(w=0);var O=Array(16);if(typeof x=="string")for(var V=0;16>V;++V)O[V]=x.charCodeAt(w++)|x.charCodeAt(w++)<<8|x.charCodeAt(w++)<<16|x.charCodeAt(w++)<<24;else for(V=0;16>V;++V)O[V]=x[w++]|x[w++]<<8|x[w++]<<16|x[w++]<<24;x=M.g[0],w=M.g[1],V=M.g[2];var k=M.g[3],I=x+(k^w&(V^k))+O[0]+3614090360&4294967295;x=w+(I<<7&4294967295|I>>>25),I=k+(V^x&(w^V))+O[1]+3905402710&4294967295,k=x+(I<<12&4294967295|I>>>20),I=V+(w^k&(x^w))+O[2]+606105819&4294967295,V=k+(I<<17&4294967295|I>>>15),I=w+(x^V&(k^x))+O[3]+3250441966&4294967295,w=V+(I<<22&4294967295|I>>>10),I=x+(k^w&(V^k))+O[4]+4118548399&4294967295,x=w+(I<<7&4294967295|I>>>25),I=k+(V^x&(w^V))+O[5]+1200080426&4294967295,k=x+(I<<12&4294967295|I>>>20),I=V+(w^k&(x^w))+O[6]+2821735955&4294967295,V=k+(I<<17&4294967295|I>>>15),I=w+(x^V&(k^x))+O[7]+4249261313&4294967295,w=V+(I<<22&4294967295|I>>>10),I=x+(k^w&(V^k))+O[8]+1770035416&4294967295,x=w+(I<<7&4294967295|I>>>25),I=k+(V^x&(w^V))+O[9]+2336552879&4294967295,k=x+(I<<12&4294967295|I>>>20),I=V+(w^k&(x^w))+O[10]+4294925233&4294967295,V=k+(I<<17&4294967295|I>>>15),I=w+(x^V&(k^x))+O[11]+2304563134&4294967295,w=V+(I<<22&4294967295|I>>>10),I=x+(k^w&(V^k))+O[12]+1804603682&4294967295,x=w+(I<<7&4294967295|I>>>25),I=k+(V^x&(w^V))+O[13]+4254626195&4294967295,k=x+(I<<12&4294967295|I>>>20),I=V+(w^k&(x^w))+O[14]+2792965006&4294967295,V=k+(I<<17&4294967295|I>>>15),I=w+(x^V&(k^x))+O[15]+1236535329&4294967295,w=V+(I<<22&4294967295|I>>>10),I=x+(V^k&(w^V))+O[1]+4129170786&4294967295,x=w+(I<<5&4294967295|I>>>27),I=k+(w^V&(x^w))+O[6]+3225465664&4294967295,k=x+(I<<9&4294967295|I>>>23),I=V+(x^w&(k^x))+O[11]+643717713&4294967295,V=k+(I<<14&4294967295|I>>>18),I=w+(k^x&(V^k))+O[0]+3921069994&4294967295,w=V+(I<<20&4294967295|I>>>12),I=x+(V^k&(w^V))+O[5]+3593408605&4294967295,x=w+(I<<5&4294967295|I>>>27),I=k+(w^V&(x^w))+O[10]+38016083&4294967295,k=x+(I<<9&4294967295|I>>>23),I=V+(x^w&(k^x))+O[15]+3634488961&4294967295,V=k+(I<<14&4294967295|I>>>18),I=w+(k^x&(V^k))+O[4]+3889429448&4294967295,w=V+(I<<20&4294967295|I>>>12),I=x+(V^k&(w^V))+O[9]+568446438&4294967295,x=w+(I<<5&4294967295|I>>>27),I=k+(w^V&(x^w))+O[14]+3275163606&4294967295,k=x+(I<<9&4294967295|I>>>23),I=V+(x^w&(k^x))+O[3]+4107603335&4294967295,V=k+(I<<14&4294967295|I>>>18),I=w+(k^x&(V^k))+O[8]+1163531501&4294967295,w=V+(I<<20&4294967295|I>>>12),I=x+(V^k&(w^V))+O[13]+2850285829&4294967295,x=w+(I<<5&4294967295|I>>>27),I=k+(w^V&(x^w))+O[2]+4243563512&4294967295,k=x+(I<<9&4294967295|I>>>23),I=V+(x^w&(k^x))+O[7]+1735328473&4294967295,V=k+(I<<14&4294967295|I>>>18),I=w+(k^x&(V^k))+O[12]+2368359562&4294967295,w=V+(I<<20&4294967295|I>>>12),I=x+(w^V^k)+O[5]+4294588738&4294967295,x=w+(I<<4&4294967295|I>>>28),I=k+(x^w^V)+O[8]+2272392833&4294967295,k=x+(I<<11&4294967295|I>>>21),I=V+(k^x^w)+O[11]+1839030562&4294967295,V=k+(I<<16&4294967295|I>>>16),I=w+(V^k^x)+O[14]+4259657740&4294967295,w=V+(I<<23&4294967295|I>>>9),I=x+(w^V^k)+O[1]+2763975236&4294967295,x=w+(I<<4&4294967295|I>>>28),I=k+(x^w^V)+O[4]+1272893353&4294967295,k=x+(I<<11&4294967295|I>>>21),I=V+(k^x^w)+O[7]+4139469664&4294967295,V=k+(I<<16&4294967295|I>>>16),I=w+(V^k^x)+O[10]+3200236656&4294967295,w=V+(I<<23&4294967295|I>>>9),I=x+(w^V^k)+O[13]+681279174&4294967295,x=w+(I<<4&4294967295|I>>>28),I=k+(x^w^V)+O[0]+3936430074&4294967295,k=x+(I<<11&4294967295|I>>>21),I=V+(k^x^w)+O[3]+3572445317&4294967295,V=k+(I<<16&4294967295|I>>>16),I=w+(V^k^x)+O[6]+76029189&4294967295,w=V+(I<<23&4294967295|I>>>9),I=x+(w^V^k)+O[9]+3654602809&4294967295,x=w+(I<<4&4294967295|I>>>28),I=k+(x^w^V)+O[12]+3873151461&4294967295,k=x+(I<<11&4294967295|I>>>21),I=V+(k^x^w)+O[15]+530742520&4294967295,V=k+(I<<16&4294967295|I>>>16),I=w+(V^k^x)+O[2]+3299628645&4294967295,w=V+(I<<23&4294967295|I>>>9),I=x+(V^(w|~k))+O[0]+4096336452&4294967295,x=w+(I<<6&4294967295|I>>>26),I=k+(w^(x|~V))+O[7]+1126891415&4294967295,k=x+(I<<10&4294967295|I>>>22),I=V+(x^(k|~w))+O[14]+2878612391&4294967295,V=k+(I<<15&4294967295|I>>>17),I=w+(k^(V|~x))+O[5]+4237533241&4294967295,w=V+(I<<21&4294967295|I>>>11),I=x+(V^(w|~k))+O[12]+1700485571&4294967295,x=w+(I<<6&4294967295|I>>>26),I=k+(w^(x|~V))+O[3]+2399980690&4294967295,k=x+(I<<10&4294967295|I>>>22),I=V+(x^(k|~w))+O[10]+4293915773&4294967295,V=k+(I<<15&4294967295|I>>>17),I=w+(k^(V|~x))+O[1]+2240044497&4294967295,w=V+(I<<21&4294967295|I>>>11),I=x+(V^(w|~k))+O[8]+1873313359&4294967295,x=w+(I<<6&4294967295|I>>>26),I=k+(w^(x|~V))+O[15]+4264355552&4294967295,k=x+(I<<10&4294967295|I>>>22),I=V+(x^(k|~w))+O[6]+2734768916&4294967295,V=k+(I<<15&4294967295|I>>>17),I=w+(k^(V|~x))+O[13]+1309151649&4294967295,w=V+(I<<21&4294967295|I>>>11),I=x+(V^(w|~k))+O[4]+4149444226&4294967295,x=w+(I<<6&4294967295|I>>>26),I=k+(w^(x|~V))+O[11]+3174756917&4294967295,k=x+(I<<10&4294967295|I>>>22),I=V+(x^(k|~w))+O[2]+718787259&4294967295,V=k+(I<<15&4294967295|I>>>17),I=w+(k^(V|~x))+O[9]+3951481745&4294967295,M.g[0]=M.g[0]+x&4294967295,M.g[1]=M.g[1]+(V+(I<<21&4294967295|I>>>11))&4294967295,M.g[2]=M.g[2]+V&4294967295,M.g[3]=M.g[3]+k&4294967295}s.prototype.u=function(M,x){x===void 0&&(x=M.length);for(var w=x-this.blockSize,O=this.B,V=this.h,k=0;k<x;){if(V==0)for(;k<=w;)o(this,M,k),k+=this.blockSize;if(typeof M=="string"){for(;k<x;)if(O[V++]=M.charCodeAt(k++),V==this.blockSize){o(this,O),V=0;break}}else for(;k<x;)if(O[V++]=M[k++],V==this.blockSize){o(this,O),V=0;break}}this.h=V,this.o+=x},s.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var x=1;x<M.length-8;++x)M[x]=0;var w=8*this.o;for(x=M.length-8;x<M.length;++x)M[x]=w&255,w/=256;for(this.u(M),M=Array(16),x=w=0;4>x;++x)for(var O=0;32>O;O+=8)M[w++]=this.g[x]>>>O&255;return M};function u(M,x){var w=p;return Object.prototype.hasOwnProperty.call(w,M)?w[M]:w[M]=x(M)}function f(M,x){this.h=x;for(var w=[],O=!0,V=M.length-1;0<=V;V--){var k=M[V]|0;O&&k==x||(w[V]=k,O=!1)}this.g=w}var p={};function m(M){return-128<=M&&128>M?u(M,function(x){return new f([x|0],0>x?-1:0)}):new f([M|0],0>M?-1:0)}function y(M){if(isNaN(M)||!isFinite(M))return A;if(0>M)return L(y(-M));for(var x=[],w=1,O=0;M>=w;O++)x[O]=M/w|0,w*=4294967296;return new f(x,0)}function T(M,x){if(M.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(M.charAt(0)=="-")return L(T(M.substring(1),x));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=y(Math.pow(x,8)),O=A,V=0;V<M.length;V+=8){var k=Math.min(8,M.length-V),I=parseInt(M.substring(V,V+k),x);8>k?(k=y(Math.pow(x,k)),O=O.j(k).add(y(I))):(O=O.j(w),O=O.add(y(I)))}return O}var A=m(0),R=m(1),N=m(16777216);r=f.prototype,r.m=function(){if($(this))return-L(this).m();for(var M=0,x=1,w=0;w<this.g.length;w++){var O=this.i(w);M+=(0<=O?O:4294967296+O)*x,x*=4294967296}return M},r.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(B(this))return"0";if($(this))return"-"+L(this).toString(M);for(var x=y(Math.pow(M,6)),w=this,O="";;){var V=fe(w,x).g;w=se(w,V.j(x));var k=((0<w.g.length?w.g[0]:w.h)>>>0).toString(M);if(w=V,B(w))return k+O;for(;6>k.length;)k="0"+k;O=k+O}},r.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function B(M){if(M.h!=0)return!1;for(var x=0;x<M.g.length;x++)if(M.g[x]!=0)return!1;return!0}function $(M){return M.h==-1}r.l=function(M){return M=se(this,M),$(M)?-1:B(M)?0:1};function L(M){for(var x=M.g.length,w=[],O=0;O<x;O++)w[O]=~M.g[O];return new f(w,~M.h).add(R)}r.abs=function(){return $(this)?L(this):this},r.add=function(M){for(var x=Math.max(this.g.length,M.g.length),w=[],O=0,V=0;V<=x;V++){var k=O+(this.i(V)&65535)+(M.i(V)&65535),I=(k>>>16)+(this.i(V)>>>16)+(M.i(V)>>>16);O=I>>>16,k&=65535,I&=65535,w[V]=I<<16|k}return new f(w,w[w.length-1]&-2147483648?-1:0)};function se(M,x){return M.add(L(x))}r.j=function(M){if(B(this)||B(M))return A;if($(this))return $(M)?L(this).j(L(M)):L(L(this).j(M));if($(M))return L(this.j(L(M)));if(0>this.l(N)&&0>M.l(N))return y(this.m()*M.m());for(var x=this.g.length+M.g.length,w=[],O=0;O<2*x;O++)w[O]=0;for(O=0;O<this.g.length;O++)for(var V=0;V<M.g.length;V++){var k=this.i(O)>>>16,I=this.i(O)&65535,Ae=M.i(V)>>>16,Ee=M.i(V)&65535;w[2*O+2*V]+=I*Ee,ae(w,2*O+2*V),w[2*O+2*V+1]+=k*Ee,ae(w,2*O+2*V+1),w[2*O+2*V+1]+=I*Ae,ae(w,2*O+2*V+1),w[2*O+2*V+2]+=k*Ae,ae(w,2*O+2*V+2)}for(O=0;O<x;O++)w[O]=w[2*O+1]<<16|w[2*O];for(O=x;O<2*x;O++)w[O]=0;return new f(w,0)};function ae(M,x){for(;(M[x]&65535)!=M[x];)M[x+1]+=M[x]>>>16,M[x]&=65535,x++}function re(M,x){this.g=M,this.h=x}function fe(M,x){if(B(x))throw Error("division by zero");if(B(M))return new re(A,A);if($(M))return x=fe(L(M),x),new re(L(x.g),L(x.h));if($(x))return x=fe(M,L(x)),new re(L(x.g),x.h);if(30<M.g.length){if($(M)||$(x))throw Error("slowDivide_ only works with positive integers.");for(var w=R,O=x;0>=O.l(M);)w=le(w),O=le(O);var V=pe(w,1),k=pe(O,1);for(O=pe(O,2),w=pe(w,2);!B(O);){var I=k.add(O);0>=I.l(M)&&(V=V.add(w),k=I),O=pe(O,1),w=pe(w,1)}return x=se(M,V.j(x)),new re(V,x)}for(V=A;0<=M.l(x);){for(w=Math.max(1,Math.floor(M.m()/x.m())),O=Math.ceil(Math.log(w)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),k=y(w),I=k.j(x);$(I)||0<I.l(M);)w-=O,k=y(w),I=k.j(x);B(k)&&(k=R),V=V.add(k),M=se(M,I)}return new re(V,M)}r.A=function(M){return fe(this,M).h},r.and=function(M){for(var x=Math.max(this.g.length,M.g.length),w=[],O=0;O<x;O++)w[O]=this.i(O)&M.i(O);return new f(w,this.h&M.h)},r.or=function(M){for(var x=Math.max(this.g.length,M.g.length),w=[],O=0;O<x;O++)w[O]=this.i(O)|M.i(O);return new f(w,this.h|M.h)},r.xor=function(M){for(var x=Math.max(this.g.length,M.g.length),w=[],O=0;O<x;O++)w[O]=this.i(O)^M.i(O);return new f(w,this.h^M.h)};function le(M){for(var x=M.g.length+1,w=[],O=0;O<x;O++)w[O]=M.i(O)<<1|M.i(O-1)>>>31;return new f(w,M.h)}function pe(M,x){var w=x>>5;x%=32;for(var O=M.g.length-w,V=[],k=0;k<O;k++)V[k]=0<x?M.i(k+w)>>>x|M.i(k+w+1)<<32-x:M.i(k+w);return new f(V,M.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,LT=s,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.A,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=y,f.fromString=T,ss=f}).apply(typeof EE<"u"?EE:typeof self<"u"?self:typeof window<"u"?window:{});var ah=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var UT,Jl,jT,yh,Km,zT,BT,qT;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,g,_){return c==Array.prototype||c==Object.prototype||(c[g]=_.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof ah=="object"&&ah];for(var g=0;g<c.length;++g){var _=c[g];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=n(this);function o(c,g){if(g)e:{var _=s;c=c.split(".");for(var b=0;b<c.length-1;b++){var z=c[b];if(!(z in _))break e;_=_[z]}c=c[c.length-1],b=_[c],g=g(b),g!=b&&g!=null&&e(_,c,{configurable:!0,writable:!0,value:g})}}function u(c,g){c instanceof String&&(c+="");var _=0,b=!1,z={next:function(){if(!b&&_<c.length){var K=_++;return{value:g(K,c[K]),done:!1}}return b=!0,{done:!0,value:void 0}}};return z[Symbol.iterator]=function(){return z},z}o("Array.prototype.values",function(c){return c||function(){return u(this,function(g,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var f=f||{},p=this||self;function m(c){var g=typeof c;return g=g!="object"?g:c?Array.isArray(c)?"array":g:"null",g=="array"||g=="object"&&typeof c.length=="number"}function y(c){var g=typeof c;return g=="object"&&c!=null||g=="function"}function T(c,g,_){return c.call.apply(c.bind,arguments)}function A(c,g,_){if(!c)throw Error();if(2<arguments.length){var b=Array.prototype.slice.call(arguments,2);return function(){var z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(z,b),c.apply(g,z)}}return function(){return c.apply(g,arguments)}}function R(c,g,_){return R=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?T:A,R.apply(null,arguments)}function N(c,g){var _=Array.prototype.slice.call(arguments,1);return function(){var b=_.slice();return b.push.apply(b,arguments),c.apply(this,b)}}function B(c,g){function _(){}_.prototype=g.prototype,c.aa=g.prototype,c.prototype=new _,c.prototype.constructor=c,c.Qb=function(b,z,K){for(var oe=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)oe[ze-2]=arguments[ze];return g.prototype[z].apply(b,oe)}}function $(c){const g=c.length;if(0<g){const _=Array(g);for(let b=0;b<g;b++)_[b]=c[b];return _}return[]}function L(c,g){for(let _=1;_<arguments.length;_++){const b=arguments[_];if(m(b)){const z=c.length||0,K=b.length||0;c.length=z+K;for(let oe=0;oe<K;oe++)c[z+oe]=b[oe]}else c.push(b)}}class se{constructor(g,_){this.i=g,this.j=_,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function ae(c){return/^[\s\xa0]*$/.test(c)}function re(){var c=p.navigator;return c&&(c=c.userAgent)?c:""}function fe(c){return fe[" "](c),c}fe[" "]=function(){};var le=re().indexOf("Gecko")!=-1&&!(re().toLowerCase().indexOf("webkit")!=-1&&re().indexOf("Edge")==-1)&&!(re().indexOf("Trident")!=-1||re().indexOf("MSIE")!=-1)&&re().indexOf("Edge")==-1;function pe(c,g,_){for(const b in c)g.call(_,c[b],b,c)}function M(c,g){for(const _ in c)g.call(void 0,c[_],_,c)}function x(c){const g={};for(const _ in c)g[_]=c[_];return g}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(c,g){let _,b;for(let z=1;z<arguments.length;z++){b=arguments[z];for(_ in b)c[_]=b[_];for(let K=0;K<w.length;K++)_=w[K],Object.prototype.hasOwnProperty.call(b,_)&&(c[_]=b[_])}}function V(c){var g=1;c=c.split(":");const _=[];for(;0<g&&c.length;)_.push(c.shift()),g--;return c.length&&_.push(c.join(":")),_}function k(c){p.setTimeout(()=>{throw c},0)}function I(){var c=xe;let g=null;return c.g&&(g=c.g,c.g=c.g.next,c.g||(c.h=null),g.next=null),g}class Ae{constructor(){this.h=this.g=null}add(g,_){const b=Ee.get();b.set(g,_),this.h?this.h.next=b:this.g=b,this.h=b}}var Ee=new se(()=>new G,c=>c.reset());class G{constructor(){this.next=this.g=this.h=null}set(g,_){this.h=g,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let X,ce=!1,xe=new Ae,D=()=>{const c=p.Promise.resolve(void 0);X=()=>{c.then(F)}};var F=()=>{for(var c;c=I();){try{c.h.call(c.g)}catch(_){k(_)}var g=Ee;g.j(c),100>g.h&&(g.h++,c.next=g.g,g.g=c)}ce=!1};function ie(){this.s=this.s,this.C=this.C}ie.prototype.s=!1,ie.prototype.ma=function(){this.s||(this.s=!0,this.N())},ie.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ee(c,g){this.type=c,this.g=this.target=g,this.defaultPrevented=!1}ee.prototype.h=function(){this.defaultPrevented=!0};var de=(function(){if(!p.addEventListener||!Object.defineProperty)return!1;var c=!1,g=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const _=()=>{};p.addEventListener("test",_,g),p.removeEventListener("test",_,g)}catch{}return c})();function Re(c,g){if(ee.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var _=this.type=c.type,b=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=g,g=c.relatedTarget){if(le){e:{try{fe(g.nodeName);var z=!0;break e}catch{}z=!1}z||(g=null)}}else _=="mouseover"?g=c.fromElement:_=="mouseout"&&(g=c.toElement);this.relatedTarget=g,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:ue[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Re.aa.h.call(this)}}B(Re,ee);var ue={2:"touch",3:"pen",4:"mouse"};Re.prototype.h=function(){Re.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var je="closure_listenable_"+(1e6*Math.random()|0),Ne=0;function nt(c,g,_,b,z){this.listener=c,this.proxy=null,this.src=g,this.type=_,this.capture=!!b,this.ha=z,this.key=++Ne,this.da=this.fa=!1}function St(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function gn(c){this.src=c,this.g={},this.h=0}gn.prototype.add=function(c,g,_,b,z){var K=c.toString();c=this.g[K],c||(c=this.g[K]=[],this.h++);var oe=_s(c,g,b,z);return-1<oe?(g=c[oe],_||(g.fa=!1)):(g=new nt(g,this.src,K,!!b,z),g.fa=_,c.push(g)),g};function ys(c,g){var _=g.type;if(_ in c.g){var b=c.g[_],z=Array.prototype.indexOf.call(b,g,void 0),K;(K=0<=z)&&Array.prototype.splice.call(b,z,1),K&&(St(g),c.g[_].length==0&&(delete c.g[_],c.h--))}}function _s(c,g,_,b){for(var z=0;z<c.length;++z){var K=c[z];if(!K.da&&K.listener==g&&K.capture==!!_&&K.ha==b)return z}return-1}var vs="closure_lm_"+(1e6*Math.random()|0),Uo={};function Vu(c,g,_,b,z){if(Array.isArray(g)){for(var K=0;K<g.length;K++)Vu(c,g[K],_,b,z);return null}return _=Pu(_),c&&c[je]?c.K(g,_,y(b)?!!b.capture:!1,z):In(c,g,_,!1,b,z)}function In(c,g,_,b,z,K){if(!g)throw Error("Invalid event type");var oe=y(z)?!!z.capture:!!z,ze=va(c);if(ze||(c[vs]=ze=new gn(c)),_=ze.add(g,_,b,oe,K),_.proxy)return _;if(b=mf(),_.proxy=b,b.src=c,b.listener=_,c.addEventListener)de||(z=oe),z===void 0&&(z=!1),c.addEventListener(g.toString(),b,z);else if(c.attachEvent)c.attachEvent(Es(g.toString()),b);else if(c.addListener&&c.removeListener)c.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return _}function mf(){function c(_){return g.call(c.src,c.listener,_)}const g=pf;return c}function jo(c,g,_,b,z){if(Array.isArray(g))for(var K=0;K<g.length;K++)jo(c,g[K],_,b,z);else b=y(b)?!!b.capture:!!b,_=Pu(_),c&&c[je]?(c=c.i,g=String(g).toString(),g in c.g&&(K=c.g[g],_=_s(K,_,b,z),-1<_&&(St(K[_]),Array.prototype.splice.call(K,_,1),K.length==0&&(delete c.g[g],c.h--)))):c&&(c=va(c))&&(g=c.g[g.toString()],c=-1,g&&(c=_s(g,_,b,z)),(_=-1<c?g[c]:null)&&_a(_))}function _a(c){if(typeof c!="number"&&c&&!c.da){var g=c.src;if(g&&g[je])ys(g.i,c);else{var _=c.type,b=c.proxy;g.removeEventListener?g.removeEventListener(_,b,c.capture):g.detachEvent?g.detachEvent(Es(_),b):g.addListener&&g.removeListener&&g.removeListener(b),(_=va(g))?(ys(_,c),_.h==0&&(_.src=null,g[vs]=null)):St(c)}}}function Es(c){return c in Uo?Uo[c]:Uo[c]="on"+c}function pf(c,g){if(c.da)c=!0;else{g=new Re(g,this);var _=c.listener,b=c.ha||c.src;c.fa&&_a(c),c=_.call(b,g)}return c}function va(c){return c=c[vs],c instanceof gn?c:null}var zo="__closure_events_fn_"+(1e9*Math.random()>>>0);function Pu(c){return typeof c=="function"?c:(c[zo]||(c[zo]=function(g){return c.handleEvent(g)}),c[zo])}function ft(){ie.call(this),this.i=new gn(this),this.M=this,this.F=null}B(ft,ie),ft.prototype[je]=!0,ft.prototype.removeEventListener=function(c,g,_,b){jo(this,c,g,_,b)};function $e(c,g){var _,b=c.F;if(b)for(_=[];b;b=b.F)_.push(b);if(c=c.M,b=g.type||g,typeof g=="string")g=new ee(g,c);else if(g instanceof ee)g.target=g.target||c;else{var z=g;g=new ee(b,c),O(g,z)}if(z=!0,_)for(var K=_.length-1;0<=K;K--){var oe=g.g=_[K];z=yn(oe,b,!0,g)&&z}if(oe=g.g=c,z=yn(oe,b,!0,g)&&z,z=yn(oe,b,!1,g)&&z,_)for(K=0;K<_.length;K++)oe=g.g=_[K],z=yn(oe,b,!1,g)&&z}ft.prototype.N=function(){if(ft.aa.N.call(this),this.i){var c=this.i,g;for(g in c.g){for(var _=c.g[g],b=0;b<_.length;b++)St(_[b]);delete c.g[g],c.h--}}this.F=null},ft.prototype.K=function(c,g,_,b){return this.i.add(String(c),g,!1,_,b)},ft.prototype.L=function(c,g,_,b){return this.i.add(String(c),g,!0,_,b)};function yn(c,g,_,b){if(g=c.i.g[String(g)],!g)return!0;g=g.concat();for(var z=!0,K=0;K<g.length;++K){var oe=g[K];if(oe&&!oe.da&&oe.capture==_){var ze=oe.listener,Ot=oe.ha||oe.src;oe.fa&&ys(c.i,oe),z=ze.call(Ot,b)!==!1&&z}}return z&&!b.defaultPrevented}function Wt(c,g,_){if(typeof c=="function")_&&(c=R(c,_));else if(c&&typeof c.handleEvent=="function")c=R(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:p.setTimeout(c,g||0)}function ku(c){c.g=Wt(()=>{c.g=null,c.i&&(c.i=!1,ku(c))},c.l);const g=c.h;c.h=null,c.m.apply(null,g)}class gf extends ie{constructor(g,_){super(),this.m=g,this.l=_,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:ku(this)}N(){super.N(),this.g&&(p.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ts(c){ie.call(this),this.h=c,this.g={}}B(Ts,ie);var Ss=[];function As(c){pe(c.g,function(g,_){this.g.hasOwnProperty(_)&&_a(g)},c),c.g={}}Ts.prototype.N=function(){Ts.aa.N.call(this),As(this)},Ts.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Wn=p.JSON.stringify,Ea=p.JSON.parse,bs=class{stringify(c){return p.JSON.stringify(c,void 0)}parse(c){return p.JSON.parse(c,void 0)}};function Bo(){}Bo.prototype.h=null;function qo(c){return c.h||(c.h=c.i())}function Ho(){}var zi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Bi(){ee.call(this,"d")}B(Bi,ee);function Fo(){ee.call(this,"c")}B(Fo,ee);var hi={},Go=null;function vr(){return Go=Go||new ft}hi.La="serverreachability";function Ta(c){ee.call(this,hi.La,c)}B(Ta,ee);function Er(c){const g=vr();$e(g,new Ta(g))}hi.STAT_EVENT="statevent";function Lu(c,g){ee.call(this,hi.STAT_EVENT,c),this.stat=g}B(Lu,ee);function lt(c){const g=vr();$e(g,new Lu(g,c))}hi.Ma="timingevent";function Dt(c,g){ee.call(this,hi.Ma,c),this.size=g}B(Dt,ee);function At(c,g){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return p.setTimeout(function(){c()},g)}function Cn(){this.g=!0}Cn.prototype.xa=function(){this.g=!1};function Qo(c,g,_,b,z,K){c.info(function(){if(c.g)if(K)for(var oe="",ze=K.split("&"),Ot=0;Ot<ze.length;Ot++){var Be=ze[Ot].split("=");if(1<Be.length){var Ut=Be[0];Be=Be[1];var Mt=Ut.split("_");oe=2<=Mt.length&&Mt[1]=="type"?oe+(Ut+"="+Be+"&"):oe+(Ut+"=redacted&")}}else oe=null;else oe=K;return"XMLHTTP REQ ("+b+") [attempt "+z+"]: "+g+`
`+_+`
`+oe})}function yf(c,g,_,b,z,K,oe){c.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+z+"]: "+g+`
`+_+`
`+K+" "+oe})}function Tr(c,g,_,b){c.info(function(){return"XMLHTTP TEXT ("+g+"): "+ws(c,_)+(b?" "+b:"")})}function Uu(c,g){c.info(function(){return"TIMEOUT: "+g})}Cn.prototype.info=function(){};function ws(c,g){if(!c.g)return g;if(!g)return null;try{var _=JSON.parse(g);if(_){for(c=0;c<_.length;c++)if(Array.isArray(_[c])){var b=_[c];if(!(2>b.length)){var z=b[1];if(Array.isArray(z)&&!(1>z.length)){var K=z[0];if(K!="noop"&&K!="stop"&&K!="close")for(var oe=1;oe<z.length;oe++)z[oe]=""}}}}return Wn(_)}catch{return g}}var Sr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},qi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},fi;function di(){}B(di,Bo),di.prototype.g=function(){return new XMLHttpRequest},di.prototype.i=function(){return{}},fi=new di;function on(c,g,_,b){this.j=c,this.i=g,this.l=_,this.R=b||1,this.U=new Ts(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new pt}function pt(){this.i=null,this.g="",this.h=!1}var Yo={},Sa={};function Jn(c,g,_){c.L=1,c.v=Ns(_n(g)),c.m=_,c.P=!0,Hi(c,null)}function Hi(c,g){c.F=Date.now(),Rs(c),c.A=_n(c.v);var _=c.A,b=c.R;Array.isArray(b)||(b=[String(b)]),Zo(_.i,"t",b),c.C=0,_=c.j.J,c.h=new pt,c.g=ec(c.j,_?g:null,!c.m),0<c.O&&(c.M=new gf(R(c.Y,c,c.g),c.O)),g=c.U,_=c.g,b=c.ca;var z="readystatechange";Array.isArray(z)||(z&&(Ss[0]=z.toString()),z=Ss);for(var K=0;K<z.length;K++){var oe=Vu(_,z[K],b||g.handleEvent,!1,g.h||g);if(!oe)break;g.g[oe.key]=oe}g=c.H?x(c.H):{},c.m?(c.u||(c.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,g)):(c.u="GET",c.g.ea(c.A,c.u,null,g)),Er(),Qo(c.i,c.u,c.A,c.l,c.R,c.m)}on.prototype.ca=function(c){c=c.target;const g=this.M;g&&Mn(c)==3?g.j():this.Y(c)},on.prototype.Y=function(c){try{if(c==this.g)e:{const Mt=Mn(this.g);var g=this.g.Ba();const Wi=this.g.Z();if(!(3>Mt)&&(Mt!=3||this.g&&(this.h.h||this.g.oa()||Qu(this.g)))){this.J||Mt!=4||g==7||(g==8||0>=Wi?Er(3):Er(2)),Ar(this);var _=this.g.Z();this.X=_;t:if(ju(this)){var b=Qu(this.g);c="";var z=b.length,K=Mn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ht(this),mi(this);var oe="";break t}this.h.i=new p.TextDecoder}for(g=0;g<z;g++)this.h.h=!0,c+=this.h.i.decode(b[g],{stream:!(K&&g==z-1)});b.length=0,this.h.g+=c,this.C=0,oe=this.h.g}else oe=this.g.oa();if(this.o=_==200,yf(this.i,this.u,this.A,this.l,this.R,Mt,_),this.o){if(this.T&&!this.K){t:{if(this.g){var ze,Ot=this.g;if((ze=Ot.g?Ot.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ae(ze)){var Be=ze;break t}}Be=null}if(_=Be)Tr(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,xs(this,_);else{this.o=!1,this.s=3,lt(12),Ht(this),mi(this);break e}}if(this.P){_=!0;let Ft;for(;!this.J&&this.C<oe.length;)if(Ft=zu(this,oe),Ft==Sa){Mt==4&&(this.s=4,lt(14),_=!1),Tr(this.i,this.l,null,"[Incomplete Response]");break}else if(Ft==Yo){this.s=4,lt(15),Tr(this.i,this.l,oe,"[Invalid Chunk]"),_=!1;break}else Tr(this.i,this.l,Ft,null),xs(this,Ft);if(ju(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Mt!=4||oe.length!=0||this.h.h||(this.s=1,lt(16),_=!1),this.o=this.o&&_,!_)Tr(this.i,this.l,oe,"[Invalid Chunked Response]"),Ht(this),mi(this);else if(0<oe.length&&!this.W){this.W=!0;var Ut=this.j;Ut.g==this&&Ut.ba&&!Ut.M&&(Ut.j.info("Great, no buffering proxy detected. Bytes received: "+oe.length),Us(Ut),Ut.M=!0,lt(11))}}else Tr(this.i,this.l,oe,null),xs(this,oe);Mt==4&&Ht(this),this.o&&!this.J&&(Mt==4?Wu(this.j,this):(this.o=!1,Rs(this)))}else Sf(this.g),_==400&&0<oe.indexOf("Unknown SID")?(this.s=3,lt(12)):(this.s=0,lt(13)),Ht(this),mi(this)}}}catch{}finally{}};function ju(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function zu(c,g){var _=c.C,b=g.indexOf(`
`,_);return b==-1?Sa:(_=Number(g.substring(_,b)),isNaN(_)?Yo:(b+=1,b+_>g.length?Sa:(g=g.slice(b,b+_),c.C=b+_,g)))}on.prototype.cancel=function(){this.J=!0,Ht(this)};function Rs(c){c.S=Date.now()+c.I,Bu(c,c.I)}function Bu(c,g){if(c.B!=null)throw Error("WatchDog timer not null");c.B=At(R(c.ba,c),g)}function Ar(c){c.B&&(p.clearTimeout(c.B),c.B=null)}on.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(Uu(this.i,this.A),this.L!=2&&(Er(),lt(17)),Ht(this),this.s=2,mi(this)):Bu(this,this.S-c)};function mi(c){c.j.G==0||c.J||Wu(c.j,c)}function Ht(c){Ar(c);var g=c.M;g&&typeof g.ma=="function"&&g.ma(),c.M=null,As(c.U),c.g&&(g=c.g,c.g=null,g.abort(),g.ma())}function xs(c,g){try{var _=c.j;if(_.G!=0&&(_.g==c||Ko(_.h,c))){if(!c.K&&Ko(_.h,c)&&_.G==3){try{var b=_.Da.g.parse(g)}catch{b=null}if(Array.isArray(b)&&b.length==3){var z=b;if(z[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<c.F)Va(_),Oa(_);else break e;rl(_),lt(18)}}else _.za=z[1],0<_.za-_.T&&37500>z[2]&&_.F&&_.v==0&&!_.C&&(_.C=At(R(_.Za,_),6e3));if(1>=ba(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Xi(_,11)}else if((c.K||_.g==c)&&Va(_),!ae(g))for(z=_.Da.g.parse(g),g=0;g<z.length;g++){let Be=z[g];if(_.T=Be[0],Be=Be[1],_.G==2)if(Be[0]=="c"){_.K=Be[1],_.ia=Be[2];const Ut=Be[3];Ut!=null&&(_.la=Ut,_.j.info("VER="+_.la));const Mt=Be[4];Mt!=null&&(_.Aa=Mt,_.j.info("SVER="+_.Aa));const Wi=Be[5];Wi!=null&&typeof Wi=="number"&&0<Wi&&(b=1.5*Wi,_.L=b,_.j.info("backChannelRequestTimeoutMs_="+b)),b=_;const Ft=c.g;if(Ft){const Ti=Ft.g?Ft.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ti){var K=b.h;K.g||Ti.indexOf("spdy")==-1&&Ti.indexOf("quic")==-1&&Ti.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(wa(K,K.h),K.h=null))}if(b.D){const al=Ft.g?Ft.g.getResponseHeader("X-HTTP-Session-Id"):null;al&&(b.ya=al,Je(b.I,b.D,al))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-c.F,_.j.info("Handshake RTT: "+_.R+"ms")),b=_;var oe=c;if(b.qa=Zu(b,b.J?b.ia:null,b.W),oe.K){ln(b.h,oe);var ze=oe,Ot=b.L;Ot&&(ze.I=Ot),ze.B&&(Ar(ze),Rs(ze)),b.g=oe}else $u(b);0<_.i.length&&Ma(_)}else Be[0]!="stop"&&Be[0]!="close"||Xi(_,7);else _.G==3&&(Be[0]=="stop"||Be[0]=="close"?Be[0]=="stop"?Xi(_,7):nl(_):Be[0]!="noop"&&_.l&&_.l.ta(Be),_.v=0)}}Er(4)}catch{}}var qu=class{constructor(c,g){this.g=c,this.map=g}};function Fi(c){this.l=c||10,p.PerformanceNavigationTiming?(c=p.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(p.chrome&&p.chrome.loadTimes&&p.chrome.loadTimes()&&p.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Aa(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function ba(c){return c.h?1:c.g?c.g.size:0}function Ko(c,g){return c.h?c.h==g:c.g?c.g.has(g):!1}function wa(c,g){c.g?c.g.add(g):c.h=g}function ln(c,g){c.h&&c.h==g?c.h=null:c.g&&c.g.has(g)&&c.g.delete(g)}Fi.prototype.cancel=function(){if(this.i=$o(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function $o(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let g=c.i;for(const _ of c.g.values())g=g.concat(_.D);return g}return $(c.i)}function _f(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(m(c)){for(var g=[],_=c.length,b=0;b<_;b++)g.push(c[b]);return g}g=[],_=0;for(b in c)g[_++]=c[b];return g}function Ra(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(m(c)||typeof c=="string"){var g=[];c=c.length;for(var _=0;_<c;_++)g.push(_);return g}g=[],_=0;for(const b in c)g[_++]=b;return g}}}function Xo(c,g){if(c.forEach&&typeof c.forEach=="function")c.forEach(g,void 0);else if(m(c)||typeof c=="string")Array.prototype.forEach.call(c,g,void 0);else for(var _=Ra(c),b=_f(c),z=b.length,K=0;K<z;K++)g.call(void 0,b[K],_&&_[K],c)}var Is=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vf(c,g){if(c){c=c.split("&");for(var _=0;_<c.length;_++){var b=c[_].indexOf("="),z=null;if(0<=b){var K=c[_].substring(0,b);z=c[_].substring(b+1)}else K=c[_];g(K,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function bt(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof bt){this.h=c.h,Cs(this,c.j),this.o=c.o,this.g=c.g,br(this,c.s),this.l=c.l;var g=c.i,_=new Qi;_.i=g.i,g.g&&(_.g=new Map(g.g),_.h=g.h),Gi(this,_),this.m=c.m}else c&&(g=String(c).match(Is))?(this.h=!1,Cs(this,g[1]||"",!0),this.o=Nn(g[2]||""),this.g=Nn(g[3]||"",!0),br(this,g[4]),this.l=Nn(g[5]||"",!0),Gi(this,g[6]||"",!0),this.m=Nn(g[7]||"")):(this.h=!1,this.i=new Qi(null,this.h))}bt.prototype.toString=function(){var c=[],g=this.j;g&&c.push(Ds(g,Wo,!0),":");var _=this.g;return(_||g=="file")&&(c.push("//"),(g=this.o)&&c.push(Ds(g,Wo,!0),"@"),c.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&c.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&c.push("/"),c.push(Ds(_,_.charAt(0)=="/"?Ef:Jo,!0))),(_=this.i.toString())&&c.push("?",_),(_=this.m)&&c.push("#",Ds(_,xa)),c.join("")};function _n(c){return new bt(c)}function Cs(c,g,_){c.j=_?Nn(g,!0):g,c.j&&(c.j=c.j.replace(/:$/,""))}function br(c,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);c.s=g}else c.s=null}function Gi(c,g,_){g instanceof Qi?(c.i=g,Fu(c.i,c.h)):(_||(g=Ds(g,Tf)),c.i=new Qi(g,c.h))}function Je(c,g,_){c.i.set(g,_)}function Ns(c){return Je(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Nn(c,g){return c?g?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Ds(c,g,_){return typeof c=="string"?(c=encodeURI(c).replace(g,Hu),_&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Hu(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Wo=/[#\/\?@]/g,Jo=/[#\?:]/g,Ef=/[#\?]/g,Tf=/[#\?@]/g,xa=/#/g;function Qi(c,g){this.h=this.g=null,this.i=c||null,this.j=!!g}function Dn(c){c.g||(c.g=new Map,c.h=0,c.i&&vf(c.i,function(g,_){c.add(decodeURIComponent(g.replace(/\+/g," ")),_)}))}r=Qi.prototype,r.add=function(c,g){Dn(this),this.i=null,c=pi(this,c);var _=this.g.get(c);return _||this.g.set(c,_=[]),_.push(g),this.h+=1,this};function Yi(c,g){Dn(c),g=pi(c,g),c.g.has(g)&&(c.i=null,c.h-=c.g.get(g).length,c.g.delete(g))}function Ki(c,g){return Dn(c),g=pi(c,g),c.g.has(g)}r.forEach=function(c,g){Dn(this),this.g.forEach(function(_,b){_.forEach(function(z){c.call(g,z,b,this)},this)},this)},r.na=function(){Dn(this);const c=Array.from(this.g.values()),g=Array.from(this.g.keys()),_=[];for(let b=0;b<g.length;b++){const z=c[b];for(let K=0;K<z.length;K++)_.push(g[b])}return _},r.V=function(c){Dn(this);let g=[];if(typeof c=="string")Ki(this,c)&&(g=g.concat(this.g.get(pi(this,c))));else{c=Array.from(this.g.values());for(let _=0;_<c.length;_++)g=g.concat(c[_])}return g},r.set=function(c,g){return Dn(this),this.i=null,c=pi(this,c),Ki(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[g]),this.h+=1,this},r.get=function(c,g){return c?(c=this.V(c),0<c.length?String(c[0]):g):g};function Zo(c,g,_){Yi(c,g),0<_.length&&(c.i=null,c.g.set(pi(c,g),$(_)),c.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],g=Array.from(this.g.keys());for(var _=0;_<g.length;_++){var b=g[_];const K=encodeURIComponent(String(b)),oe=this.V(b);for(b=0;b<oe.length;b++){var z=K;oe[b]!==""&&(z+="="+encodeURIComponent(String(oe[b]))),c.push(z)}}return this.i=c.join("&")};function pi(c,g){return g=String(g),c.j&&(g=g.toLowerCase()),g}function Fu(c,g){g&&!c.j&&(Dn(c),c.i=null,c.g.forEach(function(_,b){var z=b.toLowerCase();b!=z&&(Yi(this,b),Zo(this,z,_))},c)),c.j=g}function Os(c,g){const _=new Cn;if(p.Image){const b=new Image;b.onload=N(On,_,"TestLoadImage: loaded",!0,g,b),b.onerror=N(On,_,"TestLoadImage: error",!1,g,b),b.onabort=N(On,_,"TestLoadImage: abort",!1,g,b),b.ontimeout=N(On,_,"TestLoadImage: timeout",!1,g,b),p.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=c}else g(!1)}function Zn(c,g){const _=new Cn,b=new AbortController,z=setTimeout(()=>{b.abort(),On(_,"TestPingServer: timeout",!1,g)},1e4);fetch(c,{signal:b.signal}).then(K=>{clearTimeout(z),K.ok?On(_,"TestPingServer: ok",!0,g):On(_,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(z),On(_,"TestPingServer: error",!1,g)})}function On(c,g,_,b,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),b(_)}catch{}}function Ms(){this.g=new bs}function gi(c,g,_){const b=_||"";try{Xo(c,function(z,K){let oe=z;y(z)&&(oe=Wn(z)),g.push(b+K+"="+encodeURIComponent(oe))})}catch(z){throw g.push(b+"type="+encodeURIComponent("_badmap")),z}}function wr(c){this.l=c.Ub||null,this.j=c.eb||!1}B(wr,Bo),wr.prototype.g=function(){return new $i(this.l,this.j)},wr.prototype.i=(function(c){return function(){return c}})({});function $i(c,g){ft.call(this),this.D=c,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}B($i,ft),r=$i.prototype,r.open=function(c,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=g,this.readyState=1,_i(this)},r.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(g.body=c),(this.D||p).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,yi(this)),this.readyState=0},r.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,_i(this)),this.g&&(this.readyState=3,_i(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof p.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;el(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function el(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}r.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var g=c.value?c.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!c.done}))&&(this.response=this.responseText+=g)}c.done?yi(this):_i(this),this.readyState==3&&el(this)}},r.Ra=function(c){this.g&&(this.response=this.responseText=c,yi(this))},r.Qa=function(c){this.g&&(this.response=c,yi(this))},r.ga=function(){this.g&&yi(this)};function yi(c){c.readyState=4,c.l=null,c.j=null,c.v=null,_i(c)}r.setRequestHeader=function(c,g){this.u.append(c,g)},r.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],g=this.h.entries();for(var _=g.next();!_.done;)_=_.value,c.push(_[0]+": "+_[1]),_=g.next();return c.join(`\r
`)};function _i(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty($i.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function tl(c){let g="";return pe(c,function(_,b){g+=b,g+=":",g+=_,g+=`\r
`}),g}function Lt(c,g,_){e:{for(b in _){var b=!1;break e}b=!0}b||(_=tl(_),typeof c=="string"?_!=null&&encodeURIComponent(String(_)):Je(c,g,_))}function Ye(c){ft.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}B(Ye,ft);var Ia=/^https?$/i,Vs=["POST","PUT"];r=Ye.prototype,r.Ha=function(c){this.J=c},r.ea=function(c,g,_,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);g=g?g.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():fi.g(),this.v=this.o?qo(this.o):qo(fi),this.g.onreadystatechange=R(this.Ea,this);try{this.B=!0,this.g.open(g,String(c),!0),this.B=!1}catch(K){Gu(this,K);return}if(c=_||"",_=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var z in b)_.set(z,b[z]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const K of b.keys())_.set(K,b.get(K));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(_.keys()).find(K=>K.toLowerCase()=="content-type"),z=p.FormData&&c instanceof p.FormData,!(0<=Array.prototype.indexOf.call(Vs,g,void 0))||b||z||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,oe]of _)this.g.setRequestHeader(K,oe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ps(this),this.u=!0,this.g.send(c),this.u=!1}catch(K){Gu(this,K)}};function Gu(c,g){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=g,c.m=5,Ca(c),vi(c)}function Ca(c){c.A||(c.A=!0,$e(c,"complete"),$e(c,"error"))}r.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,$e(this,"complete"),$e(this,"abort"),vi(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),vi(this,!0)),Ye.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?Na(this):this.bb())},r.bb=function(){Na(this)};function Na(c){if(c.h&&typeof f<"u"&&(!c.v[1]||Mn(c)!=4||c.Z()!=2)){if(c.u&&Mn(c)==4)Wt(c.Ea,0,c);else if($e(c,"readystatechange"),Mn(c)==4){c.h=!1;try{const oe=c.Z();e:switch(oe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var _;if(!(_=g)){var b;if(b=oe===0){var z=String(c.D).match(Is)[1]||null;!z&&p.self&&p.self.location&&(z=p.self.location.protocol.slice(0,-1)),b=!Ia.test(z?z.toLowerCase():"")}_=b}if(_)$e(c,"complete"),$e(c,"success");else{c.m=6;try{var K=2<Mn(c)?c.g.statusText:""}catch{K=""}c.l=K+" ["+c.Z()+"]",Ca(c)}}finally{vi(c)}}}}function vi(c,g){if(c.g){Ps(c);const _=c.g,b=c.v[0]?()=>{}:null;c.g=null,c.v=null,g||$e(c,"ready");try{_.onreadystatechange=b}catch{}}}function Ps(c){c.I&&(p.clearTimeout(c.I),c.I=null)}r.isActive=function(){return!!this.g};function Mn(c){return c.g?c.g.readyState:0}r.Z=function(){try{return 2<Mn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(c){if(this.g){var g=this.g.responseText;return c&&g.indexOf(c)==0&&(g=g.substring(c.length)),Ea(g)}};function Qu(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Sf(c){const g={};c=(c.g&&2<=Mn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<c.length;b++){if(ae(c[b]))continue;var _=V(c[b]);const z=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const K=g[z]||[];g[z]=K,K.push(_)}M(g,function(b){return b.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ks(c,g,_){return _&&_.internalChannelParams&&_.internalChannelParams[c]||g}function Da(c){this.Aa=0,this.i=[],this.j=new Cn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ks("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ks("baseRetryDelayMs",5e3,c),this.cb=ks("retryDelaySeedMs",1e4,c),this.Wa=ks("forwardChannelMaxRetries",2,c),this.wa=ks("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Fi(c&&c.concurrentRequestLimit),this.Da=new Ms,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=Da.prototype,r.la=8,r.G=1,r.connect=function(c,g,_,b){lt(0),this.W=c,this.H=g||{},_&&b!==void 0&&(this.H.OSID=_,this.H.OAID=b),this.F=this.X,this.I=Zu(this,null,this.W),Ma(this)};function nl(c){if(Yu(c),c.G==3){var g=c.U++,_=_n(c.I);if(Je(_,"SID",c.K),Je(_,"RID",g),Je(_,"TYPE","terminate"),Ls(c,_),g=new on(c,c.j,g),g.L=2,g.v=Ns(_n(_)),_=!1,p.navigator&&p.navigator.sendBeacon)try{_=p.navigator.sendBeacon(g.v.toString(),"")}catch{}!_&&p.Image&&(new Image().src=g.v,_=!0),_||(g.g=ec(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Rs(g)}Ju(c)}function Oa(c){c.g&&(Us(c),c.g.cancel(),c.g=null)}function Yu(c){Oa(c),c.u&&(p.clearTimeout(c.u),c.u=null),Va(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&p.clearTimeout(c.s),c.s=null)}function Ma(c){if(!Aa(c.h)&&!c.s){c.s=!0;var g=c.Ga;X||D(),ce||(X(),ce=!0),xe.add(g,c),c.B=0}}function Af(c,g){return ba(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=g.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=At(R(c.Ga,c,g),sl(c,c.B)),c.B++,!0)}r.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const z=new on(this,this.j,c);let K=this.o;if(this.S&&(K?(K=x(K),O(K,this.S)):K=this.S),this.m!==null||this.O||(z.H=K,K=null),this.P)e:{for(var g=0,_=0;_<this.i.length;_++){t:{var b=this.i[_];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(g+=b,4096<g){g=_;break e}if(g===4096||_===this.i.length-1){g=_+1;break e}}g=1e3}else g=1e3;g=Ku(this,z,g),_=_n(this.I),Je(_,"RID",c),Je(_,"CVER",22),this.D&&Je(_,"X-HTTP-Session-Id",this.D),Ls(this,_),K&&(this.O?g="headers="+encodeURIComponent(String(tl(K)))+"&"+g:this.m&&Lt(_,this.m,K)),wa(this.h,z),this.Ua&&Je(_,"TYPE","init"),this.P?(Je(_,"$req",g),Je(_,"SID","null"),z.T=!0,Jn(z,_,null)):Jn(z,_,g),this.G=2}}else this.G==3&&(c?il(this,c):this.i.length==0||Aa(this.h)||il(this))};function il(c,g){var _;g?_=g.l:_=c.U++;const b=_n(c.I);Je(b,"SID",c.K),Je(b,"RID",_),Je(b,"AID",c.T),Ls(c,b),c.m&&c.o&&Lt(b,c.m,c.o),_=new on(c,c.j,_,c.B+1),c.m===null&&(_.H=c.o),g&&(c.i=g.D.concat(c.i)),g=Ku(c,_,1e3),_.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),wa(c.h,_),Jn(_,b,g)}function Ls(c,g){c.H&&pe(c.H,function(_,b){Je(g,b,_)}),c.l&&Xo({},function(_,b){Je(g,b,_)})}function Ku(c,g,_){_=Math.min(c.i.length,_);var b=c.l?R(c.l.Na,c.l,c):null;e:{var z=c.i;let K=-1;for(;;){const oe=["count="+_];K==-1?0<_?(K=z[0].g,oe.push("ofs="+K)):K=0:oe.push("ofs="+K);let ze=!0;for(let Ot=0;Ot<_;Ot++){let Be=z[Ot].g;const Ut=z[Ot].map;if(Be-=K,0>Be)K=Math.max(0,z[Ot].g-100),ze=!1;else try{gi(Ut,oe,"req"+Be+"_")}catch{b&&b(Ut)}}if(ze){b=oe.join("&");break e}}}return c=c.i.splice(0,_),g.D=c,b}function $u(c){if(!c.g&&!c.u){c.Y=1;var g=c.Fa;X||D(),ce||(X(),ce=!0),xe.add(g,c),c.v=0}}function rl(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=At(R(c.Fa,c),sl(c,c.v)),c.v++,!0)}r.Fa=function(){if(this.u=null,Xu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=At(R(this.ab,this),c)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,lt(10),Oa(this),Xu(this))};function Us(c){c.A!=null&&(p.clearTimeout(c.A),c.A=null)}function Xu(c){c.g=new on(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var g=_n(c.qa);Je(g,"RID","rpc"),Je(g,"SID",c.K),Je(g,"AID",c.T),Je(g,"CI",c.F?"0":"1"),!c.F&&c.ja&&Je(g,"TO",c.ja),Je(g,"TYPE","xmlhttp"),Ls(c,g),c.m&&c.o&&Lt(g,c.m,c.o),c.L&&(c.g.I=c.L);var _=c.g;c=c.ia,_.L=1,_.v=Ns(_n(g)),_.m=null,_.P=!0,Hi(_,c)}r.Za=function(){this.C!=null&&(this.C=null,Oa(this),rl(this),lt(19))};function Va(c){c.C!=null&&(p.clearTimeout(c.C),c.C=null)}function Wu(c,g){var _=null;if(c.g==g){Va(c),Us(c),c.g=null;var b=2}else if(Ko(c.h,g))_=g.D,ln(c.h,g),b=1;else return;if(c.G!=0){if(g.o)if(b==1){_=g.m?g.m.length:0,g=Date.now()-g.F;var z=c.B;b=vr(),$e(b,new Dt(b,_)),Ma(c)}else $u(c);else if(z=g.s,z==3||z==0&&0<g.X||!(b==1&&Af(c,g)||b==2&&rl(c)))switch(_&&0<_.length&&(g=c.h,g.i=g.i.concat(_)),z){case 1:Xi(c,5);break;case 4:Xi(c,10);break;case 3:Xi(c,6);break;default:Xi(c,2)}}}function sl(c,g){let _=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(_*=2),_*g}function Xi(c,g){if(c.j.info("Error code "+g),g==2){var _=R(c.fb,c),b=c.Xa;const z=!b;b=new bt(b||"//www.google.com/images/cleardot.gif"),p.location&&p.location.protocol=="http"||Cs(b,"https"),Ns(b),z?Os(b.toString(),_):Zn(b.toString(),_)}else lt(2);c.G=0,c.l&&c.l.sa(g),Ju(c),Yu(c)}r.fb=function(c){c?(this.j.info("Successfully pinged google.com"),lt(2)):(this.j.info("Failed to ping google.com"),lt(1))};function Ju(c){if(c.G=0,c.ka=[],c.l){const g=$o(c.h);(g.length!=0||c.i.length!=0)&&(L(c.ka,g),L(c.ka,c.i),c.h.i.length=0,$(c.i),c.i.length=0),c.l.ra()}}function Zu(c,g,_){var b=_ instanceof bt?_n(_):new bt(_);if(b.g!="")g&&(b.g=g+"."+b.g),br(b,b.s);else{var z=p.location;b=z.protocol,g=g?g+"."+z.hostname:z.hostname,z=+z.port;var K=new bt(null);b&&Cs(K,b),g&&(K.g=g),z&&br(K,z),_&&(K.l=_),b=K}return _=c.D,g=c.ya,_&&g&&Je(b,_,g),Je(b,"VER",c.la),Ls(c,b),b}function ec(c,g,_){if(g&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=c.Ca&&!c.pa?new Ye(new wr({eb:_})):new Ye(c.pa),g.Ha(c.J),g}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function tc(){}r=tc.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function Pa(){}Pa.prototype.g=function(c,g){return new un(c,g)};function un(c,g){ft.call(this),this.g=new Da(g),this.l=c,this.h=g&&g.messageUrlParams||null,c=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(c?c["X-WebChannel-Content-Type"]=g.messageContentType:c={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(c?c["X-WebChannel-Client-Profile"]=g.va:c={"X-WebChannel-Client-Profile":g.va}),this.g.S=c,(c=g&&g.Sb)&&!ae(c)&&(this.g.m=c),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!ae(g)&&(this.g.D=g,c=this.h,c!==null&&g in c&&(c=this.h,g in c&&delete c[g])),this.j=new Ei(this)}B(un,ft),un.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},un.prototype.close=function(){nl(this.g)},un.prototype.o=function(c){var g=this.g;if(typeof c=="string"){var _={};_.__data__=c,c=_}else this.u&&(_={},_.__data__=Wn(c),c=_);g.i.push(new qu(g.Ya++,c)),g.G==3&&Ma(g)},un.prototype.N=function(){this.g.l=null,delete this.j,nl(this.g),delete this.g,un.aa.N.call(this)};function nc(c){Bi.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var g=c.__sm__;if(g){e:{for(const _ in g){c=_;break e}c=void 0}(this.i=c)&&(c=this.i,g=g!==null&&c in g?g[c]:void 0),this.data=g}else this.data=c}B(nc,Bi);function ic(){Fo.call(this),this.status=1}B(ic,Fo);function Ei(c){this.g=c}B(Ei,tc),Ei.prototype.ua=function(){$e(this.g,"a")},Ei.prototype.ta=function(c){$e(this.g,new nc(c))},Ei.prototype.sa=function(c){$e(this.g,new ic)},Ei.prototype.ra=function(){$e(this.g,"b")},Pa.prototype.createWebChannel=Pa.prototype.g,un.prototype.send=un.prototype.o,un.prototype.open=un.prototype.m,un.prototype.close=un.prototype.close,qT=function(){return new Pa},BT=function(){return vr()},zT=hi,Km={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Sr.NO_ERROR=0,Sr.TIMEOUT=8,Sr.HTTP_ERROR=6,yh=Sr,qi.COMPLETE="complete",jT=qi,Ho.EventType=zi,zi.OPEN="a",zi.CLOSE="b",zi.ERROR="c",zi.MESSAGE="d",ft.prototype.listen=ft.prototype.K,Jl=Ho,Ye.prototype.listenOnce=Ye.prototype.L,Ye.prototype.getLastError=Ye.prototype.Ka,Ye.prototype.getLastErrorCode=Ye.prototype.Ba,Ye.prototype.getStatus=Ye.prototype.Z,Ye.prototype.getResponseJson=Ye.prototype.Oa,Ye.prototype.getResponseText=Ye.prototype.oa,Ye.prototype.send=Ye.prototype.ea,Ye.prototype.setWithCredentials=Ye.prototype.Ha,UT=Ye}).apply(typeof ah<"u"?ah:typeof self<"u"?self:typeof window<"u"?window:{});const TE="@firebase/firestore",SE="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}tn.UNAUTHENTICATED=new tn(null),tn.GOOGLE_CREDENTIALS=new tn("google-credentials-uid"),tn.FIRST_PARTY=new tn("first-party-uid"),tn.MOCK_USER=new tn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mo="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ua=new _p("@firebase/firestore");function co(){return ua.logLevel}function me(r,...e){if(ua.logLevel<=ke.DEBUG){const n=e.map(Mp);ua.debug(`Firestore (${Mo}): ${r}`,...n)}}function pr(r,...e){if(ua.logLevel<=ke.ERROR){const n=e.map(Mp);ua.error(`Firestore (${Mo}): ${r}`,...n)}}function Ao(r,...e){if(ua.logLevel<=ke.WARN){const n=e.map(Mp);ua.warn(`Firestore (${Mo}): ${r}`,...n)}}function Mp(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function be(r,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,HT(r,s,n)}function HT(r,e,n){let s=`FIRESTORE (${Mo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw pr(s),new Error(s)}function Ke(r,e,n,s){let o="Unexpected state";typeof n=="string"?o=n:s=n,r||HT(e,o,s)}function Ce(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends _r{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class RC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(tn.UNAUTHENTICATED)))}shutdown(){}}class xC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class IC{constructor(e){this.t=e,this.currentUser=tn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ke(this.o===void 0,42304);let s=this.i;const o=m=>this.i!==s?(s=this.i,n(m)):Promise.resolve();let u=new as;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new as,e.enqueueRetryable((()=>o(this.currentUser)))};const f=()=>{const m=u;e.enqueueRetryable((async()=>{await m.promise,await o(this.currentUser)}))},p=m=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((m=>p(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?p(m):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new as)}}),0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ke(typeof s.accessToken=="string",31837,{l:s}),new FT(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ke(e===null||typeof e=="string",2055,{h:e}),new tn(e)}}class CC{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=tn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class NC{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new CC(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(tn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class AE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class DC{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Rn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ke(this.o===void 0,3512);const s=u=>{u.error!=null&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.m;return this.m=u.token,me("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>s(u)))};const o=u=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new AE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Ke(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new AE(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OC(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<r;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=OC(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<n&&(s+=e.charAt(o[u]%62))}return s}}function Le(r,e){return r<e?-1:r>e?1:0}function $m(r,e){const n=Math.min(r.length,e.length);for(let s=0;s<n;s++){const o=r.charAt(s),u=e.charAt(s);if(o!==u)return Im(o)===Im(u)?Le(o,u):Im(o)?1:-1}return Le(r.length,e.length)}const MC=55296,VC=57343;function Im(r){const e=r.charCodeAt(0);return e>=MC&&e<=VC}function bo(r,e,n){return r.length===e.length&&r.every(((s,o)=>n(s,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bE="__name__";class xi{constructor(e,n,s){n===void 0?n=0:n>e.length&&be(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&be(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return xi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof xi?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const u=xi.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return Le(e.length,n.length)}static compareSegments(e,n){const s=xi.isNumericId(e),o=xi.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?xi.extractNumericId(e).compare(xi.extractNumericId(n)):$m(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ss.fromString(e.substring(4,e.length-2))}}class at extends xi{construct(e,n,s){return new at(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new he(Z.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((o=>o.length>0)))}return new at(n)}static emptyPath(){return new at([])}}const PC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $t extends xi{construct(e,n,s){return new $t(e,n,s)}static isValidIdentifier(e){return PC.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$t.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===bE}static keyField(){return new $t([bE])}static fromServerFormat(e){const n=[];let s="",o=0;const u=()=>{if(s.length===0)throw new he(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let f=!1;for(;o<e.length;){const p=e[o];if(p==="\\"){if(o+1===e.length)throw new he(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[o+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new he(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=m,o+=2}else p==="`"?(f=!f,o++):p!=="."||f?(s+=p,o++):(u(),o++)}if(u(),f)throw new he(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new $t(n)}static emptyPath(){return new $t([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.path=e}static fromPath(e){return new ve(at.fromString(e))}static fromName(e){return new ve(at.fromString(e).popFirst(5))}static empty(){return new ve(at.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&at.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return at.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ve(new at(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GT(r,e,n){if(!n)throw new he(Z.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function kC(r,e,n,s){if(e===!0&&s===!0)throw new he(Z.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function wE(r){if(!ve.isDocumentKey(r))throw new he(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function RE(r){if(ve.isDocumentKey(r))throw new he(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function QT(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Wh(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":be(12329,{type:typeof r})}function Oi(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new he(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Wh(r);throw new he(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ct(r,e){const n={typeString:r};return e&&(n.value=e),n}function Cu(r,e){if(!QT(r))throw new he(Z.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const o=e[s].typeString,u="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){n=`JSON missing required field: '${s}'`;break}const f=r[s];if(o&&typeof f!==o){n=`JSON field '${s}' must be a ${o}.`;break}if(u!==void 0&&f!==u.value){n=`Expected '${s}' field to equal '${u.value}'`;break}}if(n)throw new he(Z.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xE=-62135596800,IE=1e6;class ot{static now(){return ot.fromMillis(Date.now())}static fromDate(e){return ot.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*IE);return new ot(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new he(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new he(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<xE)throw new he(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/IE}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ot._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Cu(e,ot._jsonSchema))return new ot(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-xE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ot._jsonSchemaVersion="firestore/timestamp/1.0",ot._jsonSchema={type:Ct("string",ot._jsonSchemaVersion),seconds:Ct("number"),nanoseconds:Ct("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{static fromTimestamp(e){return new Ie(e)}static min(){return new Ie(new ot(0,0))}static max(){return new Ie(new ot(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pu=-1;function LC(r,e){const n=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=Ie.fromTimestamp(s===1e9?new ot(n+1,0):new ot(n,s));return new ls(o,ve.empty(),e)}function UC(r){return new ls(r.readTime,r.key,pu)}class ls{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new ls(Ie.min(),ve.empty(),pu)}static max(){return new ls(Ie.max(),ve.empty(),pu)}}function jC(r,e){let n=r.readTime.compareTo(e.readTime);return n!==0?n:(n=ve.comparator(r.documentKey,e.documentKey),n!==0?n:Le(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class BC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vo(r){if(r.code!==Z.FAILED_PRECONDITION||r.message!==zC)throw r;me("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&be(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ne(((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof ne?n:ne.resolve(n)}catch(n){return ne.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):ne.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):ne.reject(n)}static resolve(e){return new ne(((n,s)=>{n(e)}))}static reject(e){return new ne(((n,s)=>{s(e)}))}static waitFor(e){return new ne(((n,s)=>{let o=0,u=0,f=!1;e.forEach((p=>{++o,p.next((()=>{++u,f&&u===o&&n()}),(m=>s(m)))})),f=!0,u===o&&n()}))}static or(e){let n=ne.resolve(!1);for(const s of e)n=n.next((o=>o?ne.resolve(o):s()));return n}static forEach(e,n){const s=[];return e.forEach(((o,u)=>{s.push(n.call(this,o,u))})),this.waitFor(s)}static mapArray(e,n){return new ne(((s,o)=>{const u=e.length,f=new Array(u);let p=0;for(let m=0;m<u;m++){const y=m;n(e[y]).next((T=>{f[y]=T,++p,p===u&&s(f)}),(T=>o(T)))}}))}static doWhile(e,n){return new ne(((s,o)=>{const u=()=>{e()===!0?n().next((()=>{u()}),o):s()};u()}))}}function qC(r){const e=r.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Po(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Jh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pp=-1;function Zh(r){return r==null}function Mh(r){return r===0&&1/r==-1/0}function HC(r){return typeof r=="number"&&Number.isInteger(r)&&!Mh(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YT="";function FC(r){let e="";for(let n=0;n<r.length;n++)e.length>0&&(e=CE(e)),e=GC(r.get(n),e);return CE(e)}function GC(r,e){let n=e;const s=r.length;for(let o=0;o<s;o++){const u=r.charAt(o);switch(u){case"\0":n+="";break;case YT:n+="";break;default:n+=u}}return n}function CE(r){return r+YT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NE(r){let e=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e++;return e}function da(r,e){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e(n,r[n])}function KT(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e,n){this.comparator=e,this.root=n||Kt.EMPTY}insert(e,n){return new ht(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Kt.BLACK,null,null))}remove(e){return new ht(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Kt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new oh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new oh(this.root,e,this.comparator,!1)}getReverseIterator(){return new oh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new oh(this.root,e,this.comparator,!0)}}class oh{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?s(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Kt{constructor(e,n,s,o,u){this.key=e,this.value=n,this.color=s??Kt.RED,this.left=o??Kt.EMPTY,this.right=u??Kt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,u){return new Kt(e??this.key,n??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,s),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Kt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Kt.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Kt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Kt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw be(43730,{key:this.key,value:this.value});if(this.right.isRed())throw be(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw be(27949);return e+(this.isRed()?0:1)}}Kt.EMPTY=null,Kt.RED=!0,Kt.BLACK=!1;Kt.EMPTY=new class{constructor(){this.size=0}get key(){throw be(57766)}get value(){throw be(16141)}get color(){throw be(16727)}get left(){throw be(29726)}get right(){throw be(36894)}copy(e,n,s,o,u){return this}insert(e,n,s){return new Kt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.comparator=e,this.data=new ht(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new DE(this.data.getIterator())}getIteratorFrom(e){return new DE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof kt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new kt(this.comparator);return n.data=e,n}}class DE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(e){this.fields=e,e.sort($t.comparator)}static empty(){return new ri([])}unionWith(e){let n=new kt($t.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new ri(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return bo(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new $T("Invalid base64 string: "+u):u}})(e);return new Xt(n)}static fromUint8Array(e){const n=(function(o){let u="";for(let f=0;f<o.length;++f)u+=String.fromCharCode(o[f]);return u})(e);return new Xt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Xt.EMPTY_BYTE_STRING=new Xt("");const QC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function us(r){if(Ke(!!r,39018),typeof r=="string"){let e=0;const n=QC.exec(r);if(Ke(!!n,46558,{timestamp:r}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:_t(r.seconds),nanos:_t(r.nanos)}}function _t(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function cs(r){return typeof r=="string"?Xt.fromBase64String(r):Xt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XT="server_timestamp",WT="__type__",JT="__previous_value__",ZT="__local_write_time__";function kp(r){return(r?.mapValue?.fields||{})[WT]?.stringValue===XT}function ef(r){const e=r.mapValue.fields[JT];return kp(e)?ef(e):e}function gu(r){const e=us(r.mapValue.fields[ZT].timestampValue);return new ot(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(e,n,s,o,u,f,p,m,y,T){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=p,this.longPollingOptions=m,this.useFetchStreams=y,this.isUsingEmulator=T}}const Vh="(default)";class yu{constructor(e,n){this.projectId=e,this.database=n||Vh}static empty(){return new yu("","")}get isDefaultDatabase(){return this.database===Vh}isEqual(e){return e instanceof yu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eS="__type__",KC="__max__",lh={mapValue:{}},tS="__vector__",Ph="value";function hs(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?kp(r)?4:XC(r)?9007199254740991:$C(r)?10:11:be(28295,{value:r})}function Li(r,e){if(r===e)return!0;const n=hs(r);if(n!==hs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return gu(r).isEqual(gu(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const f=us(o.timestampValue),p=us(u.timestampValue);return f.seconds===p.seconds&&f.nanos===p.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,u){return cs(o.bytesValue).isEqual(cs(u.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,u){return _t(o.geoPointValue.latitude)===_t(u.geoPointValue.latitude)&&_t(o.geoPointValue.longitude)===_t(u.geoPointValue.longitude)})(r,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return _t(o.integerValue)===_t(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const f=_t(o.doubleValue),p=_t(u.doubleValue);return f===p?Mh(f)===Mh(p):isNaN(f)&&isNaN(p)}return!1})(r,e);case 9:return bo(r.arrayValue.values||[],e.arrayValue.values||[],Li);case 10:case 11:return(function(o,u){const f=o.mapValue.fields||{},p=u.mapValue.fields||{};if(NE(f)!==NE(p))return!1;for(const m in f)if(f.hasOwnProperty(m)&&(p[m]===void 0||!Li(f[m],p[m])))return!1;return!0})(r,e);default:return be(52216,{left:r})}}function _u(r,e){return(r.values||[]).find((n=>Li(n,e)))!==void 0}function wo(r,e){if(r===e)return 0;const n=hs(r),s=hs(e);if(n!==s)return Le(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Le(r.booleanValue,e.booleanValue);case 2:return(function(u,f){const p=_t(u.integerValue||u.doubleValue),m=_t(f.integerValue||f.doubleValue);return p<m?-1:p>m?1:p===m?0:isNaN(p)?isNaN(m)?0:-1:1})(r,e);case 3:return OE(r.timestampValue,e.timestampValue);case 4:return OE(gu(r),gu(e));case 5:return $m(r.stringValue,e.stringValue);case 6:return(function(u,f){const p=cs(u),m=cs(f);return p.compareTo(m)})(r.bytesValue,e.bytesValue);case 7:return(function(u,f){const p=u.split("/"),m=f.split("/");for(let y=0;y<p.length&&y<m.length;y++){const T=Le(p[y],m[y]);if(T!==0)return T}return Le(p.length,m.length)})(r.referenceValue,e.referenceValue);case 8:return(function(u,f){const p=Le(_t(u.latitude),_t(f.latitude));return p!==0?p:Le(_t(u.longitude),_t(f.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return ME(r.arrayValue,e.arrayValue);case 10:return(function(u,f){const p=u.fields||{},m=f.fields||{},y=p[Ph]?.arrayValue,T=m[Ph]?.arrayValue,A=Le(y?.values?.length||0,T?.values?.length||0);return A!==0?A:ME(y,T)})(r.mapValue,e.mapValue);case 11:return(function(u,f){if(u===lh.mapValue&&f===lh.mapValue)return 0;if(u===lh.mapValue)return 1;if(f===lh.mapValue)return-1;const p=u.fields||{},m=Object.keys(p),y=f.fields||{},T=Object.keys(y);m.sort(),T.sort();for(let A=0;A<m.length&&A<T.length;++A){const R=$m(m[A],T[A]);if(R!==0)return R;const N=wo(p[m[A]],y[T[A]]);if(N!==0)return N}return Le(m.length,T.length)})(r.mapValue,e.mapValue);default:throw be(23264,{he:n})}}function OE(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Le(r,e);const n=us(r),s=us(e),o=Le(n.seconds,s.seconds);return o!==0?o:Le(n.nanos,s.nanos)}function ME(r,e){const n=r.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const u=wo(n[o],s[o]);if(u)return u}return Le(n.length,s.length)}function Ro(r){return Xm(r)}function Xm(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(n){const s=us(n);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(n){return cs(n).toBase64()})(r.bytesValue):"referenceValue"in r?(function(n){return ve.fromName(n).toString()})(r.referenceValue):"geoPointValue"in r?(function(n){return`geo(${n.latitude},${n.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(n){let s="[",o=!0;for(const u of n.values||[])o?o=!1:s+=",",s+=Xm(u);return s+"]"})(r.arrayValue):"mapValue"in r?(function(n){const s=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const f of s)u?u=!1:o+=",",o+=`${f}:${Xm(n.fields[f])}`;return o+"}"})(r.mapValue):be(61005,{value:r})}function _h(r){switch(hs(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ef(r);return e?16+_h(e):16;case 5:return 2*r.stringValue.length;case 6:return cs(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,u)=>o+_h(u)),0)})(r.arrayValue);case 10:case 11:return(function(s){let o=0;return da(s.fields,((u,f)=>{o+=u.length+_h(f)})),o})(r.mapValue);default:throw be(13486,{value:r})}}function VE(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Wm(r){return!!r&&"integerValue"in r}function Lp(r){return!!r&&"arrayValue"in r}function PE(r){return!!r&&"nullValue"in r}function kE(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function vh(r){return!!r&&"mapValue"in r}function $C(r){return(r?.mapValue?.fields||{})[eS]?.stringValue===tS}function su(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return da(r.mapValue.fields,((n,s)=>e.mapValue.fields[n]=su(s))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=su(r.arrayValue.values[n]);return e}return{...r}}function XC(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===KC}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e){this.value=e}static empty(){return new Qn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!vh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=su(n)}setAll(e){let n=$t.emptyPath(),s={},o=[];e.forEach(((f,p)=>{if(!n.isImmediateParentOf(p)){const m=this.getFieldsMap(n);this.applyChanges(m,s,o),s={},o=[],n=p.popLast()}f?s[p.lastSegment()]=su(f):o.push(p.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,s,o)}delete(e){const n=this.field(e.popLast());vh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Li(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];vh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){da(n,((o,u)=>e[o]=u));for(const o of s)delete e[o]}clone(){return new Qn(su(this.value))}}function nS(r){const e=[];return da(r.fields,((n,s)=>{const o=new $t([n]);if(vh(s)){const u=nS(s.mapValue).fields;if(u.length===0)e.push(o);else for(const f of u)e.push(o.child(f))}else e.push(o)})),new ri(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e,n,s,o,u,f,p){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=u,this.data=f,this.documentState=p}static newInvalidDocument(e){return new nn(e,0,Ie.min(),Ie.min(),Ie.min(),Qn.empty(),0)}static newFoundDocument(e,n,s,o){return new nn(e,1,n,Ie.min(),s,o,0)}static newNoDocument(e,n){return new nn(e,2,n,Ie.min(),Ie.min(),Qn.empty(),0)}static newUnknownDocument(e,n){return new nn(e,3,n,Ie.min(),Ie.min(),Qn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Qn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Qn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof nn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new nn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(e,n){this.position=e,this.inclusive=n}}function LE(r,e,n){let s=0;for(let o=0;o<r.position.length;o++){const u=e[o],f=r.position[o];if(u.field.isKeyField()?s=ve.comparator(ve.fromName(f.referenceValue),n.key):s=wo(f,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function UE(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!Li(r.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(e,n="asc"){this.field=e,this.dir=n}}function WC(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{}class It extends iS{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new ZC(e,n,s):n==="array-contains"?new nN(e,s):n==="in"?new iN(e,s):n==="not-in"?new rN(e,s):n==="array-contains-any"?new sN(e,s):new It(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new eN(e,s):new tN(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(wo(n,this.value)):n!==null&&hs(this.value)===hs(n)&&this.matchesComparison(wo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return be(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class li extends iS{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new li(e,n)}matches(e){return rS(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function rS(r){return r.op==="and"}function sS(r){return JC(r)&&rS(r)}function JC(r){for(const e of r.filters)if(e instanceof li)return!1;return!0}function Jm(r){if(r instanceof It)return r.field.canonicalString()+r.op.toString()+Ro(r.value);if(sS(r))return r.filters.map((e=>Jm(e))).join(",");{const e=r.filters.map((n=>Jm(n))).join(",");return`${r.op}(${e})`}}function aS(r,e){return r instanceof It?(function(s,o){return o instanceof It&&s.op===o.op&&s.field.isEqual(o.field)&&Li(s.value,o.value)})(r,e):r instanceof li?(function(s,o){return o instanceof li&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((u,f,p)=>u&&aS(f,o.filters[p])),!0):!1})(r,e):void be(19439)}function oS(r){return r instanceof It?(function(n){return`${n.field.canonicalString()} ${n.op} ${Ro(n.value)}`})(r):r instanceof li?(function(n){return n.op.toString()+" {"+n.getFilters().map(oS).join(" ,")+"}"})(r):"Filter"}class ZC extends It{constructor(e,n,s){super(e,n,s),this.key=ve.fromName(s.referenceValue)}matches(e){const n=ve.comparator(e.key,this.key);return this.matchesComparison(n)}}class eN extends It{constructor(e,n){super(e,"in",n),this.keys=lS("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class tN extends It{constructor(e,n){super(e,"not-in",n),this.keys=lS("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function lS(r,e){return(e.arrayValue?.values||[]).map((n=>ve.fromName(n.referenceValue)))}class nN extends It{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Lp(n)&&_u(n.arrayValue,this.value)}}class iN extends It{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&_u(this.value.arrayValue,n)}}class rN extends It{constructor(e,n){super(e,"not-in",n)}matches(e){if(_u(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!_u(this.value.arrayValue,n)}}class sN extends It{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Lp(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>_u(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{constructor(e,n=null,s=[],o=[],u=null,f=null,p=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=f,this.endAt=p,this.Te=null}}function jE(r,e=null,n=[],s=[],o=null,u=null,f=null){return new aN(r,e,n,s,o,u,f)}function Up(r){const e=Ce(r);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>Jm(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(u){return u.field.canonicalString()+u.dir})(s))).join(","),Zh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>Ro(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>Ro(s))).join(",")),e.Te=n}return e.Te}function jp(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!WC(r.orderBy[n],e.orderBy[n]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!aS(r.filters[n],e.filters[n]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!UE(r.startAt,e.startAt)&&UE(r.endAt,e.endAt)}function Zm(r){return ve.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(e,n=null,s=[],o=[],u=null,f="F",p=null,m=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=f,this.startAt=p,this.endAt=m,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function oN(r,e,n,s,o,u,f,p){return new ko(r,e,n,s,o,u,f,p)}function tf(r){return new ko(r)}function zE(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function uS(r){return r.collectionGroup!==null}function au(r){const e=Ce(r);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let p=new kt($t.comparator);return f.filters.forEach((m=>{m.getFlattenedFilters().forEach((y=>{y.isInequality()&&(p=p.add(y.field))}))})),p})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new vu(u,s))})),n.has($t.keyField().canonicalString())||e.Ie.push(new vu($t.keyField(),s))}return e.Ie}function Mi(r){const e=Ce(r);return e.Ee||(e.Ee=lN(e,au(r))),e.Ee}function lN(r,e){if(r.limitType==="F")return jE(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new vu(o.field,u)}));const n=r.endAt?new kh(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new kh(r.startAt.position,r.startAt.inclusive):null;return jE(r.path,r.collectionGroup,e,r.filters,r.limit,n,s)}}function ep(r,e){const n=r.filters.concat([e]);return new ko(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function tp(r,e,n){return new ko(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,n,r.startAt,r.endAt)}function nf(r,e){return jp(Mi(r),Mi(e))&&r.limitType===e.limitType}function cS(r){return`${Up(Mi(r))}|lt:${r.limitType}`}function ho(r){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((o=>oS(o))).join(", ")}]`),Zh(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((o=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(o))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((o=>Ro(o))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((o=>Ro(o))).join(",")),`Target(${s})`})(Mi(r))}; limitType=${r.limitType})`}function rf(r,e){return e.isFoundDocument()&&(function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):ve.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)})(r,e)&&(function(s,o){for(const u of au(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(r,e)&&(function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0})(r,e)&&(function(s,o){return!(s.startAt&&!(function(f,p,m){const y=LE(f,p,m);return f.inclusive?y<=0:y<0})(s.startAt,au(s),o)||s.endAt&&!(function(f,p,m){const y=LE(f,p,m);return f.inclusive?y>=0:y>0})(s.endAt,au(s),o))})(r,e)}function uN(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function hS(r){return(e,n)=>{let s=!1;for(const o of au(r)){const u=cN(o,e,n);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function cN(r,e,n){const s=r.field.isKeyField()?ve.comparator(e.key,n.key):(function(u,f,p){const m=f.data.field(u),y=p.data.field(u);return m!==null&&y!==null?wo(m,y):be(42886)})(r.field,e,n);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return be(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){da(this.inner,((n,s)=>{for(const[o,u]of s)e(o,u)}))}isEmpty(){return KT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hN=new ht(ve.comparator);function gr(){return hN}const fS=new ht(ve.comparator);function Zl(...r){let e=fS;for(const n of r)e=e.insert(n.key,n);return e}function dS(r){let e=fS;return r.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function na(){return ou()}function mS(){return ou()}function ou(){return new ma((r=>r.toString()),((r,e)=>r.isEqual(e)))}const fN=new ht(ve.comparator),dN=new kt(ve.comparator);function Ue(...r){let e=dN;for(const n of r)e=e.add(n);return e}const mN=new kt(Le);function pN(){return mN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zp(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Mh(e)?"-0":e}}function pS(r){return{integerValue:""+r}}function gN(r,e){return HC(e)?pS(e):zp(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(){this._=void 0}}function yN(r,e,n){return r instanceof Eu?(function(o,u){const f={fields:{[WT]:{stringValue:XT},[ZT]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&kp(u)&&(u=ef(u)),u&&(f.fields[JT]=u),{mapValue:f}})(n,e):r instanceof Tu?yS(r,e):r instanceof Su?_S(r,e):(function(o,u){const f=gS(o,u),p=BE(f)+BE(o.Ae);return Wm(f)&&Wm(o.Ae)?pS(p):zp(o.serializer,p)})(r,e)}function _N(r,e,n){return r instanceof Tu?yS(r,e):r instanceof Su?_S(r,e):n}function gS(r,e){return r instanceof Lh?(function(s){return Wm(s)||(function(u){return!!u&&"doubleValue"in u})(s)})(e)?e:{integerValue:0}:null}class Eu extends sf{}class Tu extends sf{constructor(e){super(),this.elements=e}}function yS(r,e){const n=vS(e);for(const s of r.elements)n.some((o=>Li(o,s)))||n.push(s);return{arrayValue:{values:n}}}class Su extends sf{constructor(e){super(),this.elements=e}}function _S(r,e){let n=vS(e);for(const s of r.elements)n=n.filter((o=>!Li(o,s)));return{arrayValue:{values:n}}}class Lh extends sf{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function BE(r){return _t(r.integerValue||r.doubleValue)}function vS(r){return Lp(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{constructor(e,n){this.field=e,this.transform=n}}function EN(r,e){return r.field.isEqual(e.field)&&(function(s,o){return s instanceof Tu&&o instanceof Tu||s instanceof Su&&o instanceof Su?bo(s.elements,o.elements,Li):s instanceof Lh&&o instanceof Lh?Li(s.Ae,o.Ae):s instanceof Eu&&o instanceof Eu})(r.transform,e.transform)}class TN{constructor(e,n){this.version=e,this.transformResults=n}}class ai{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ai}static exists(e){return new ai(void 0,e)}static updateTime(e){return new ai(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Eh(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class af{}function ES(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Bp(r.key,ai.none()):new Nu(r.key,r.data,ai.none());{const n=r.data,s=Qn.empty();let o=new kt($t.comparator);for(let u of e.fields)if(!o.has(u)){let f=n.field(u);f===null&&u.length>1&&(u=u.popLast(),f=n.field(u)),f===null?s.delete(u):s.set(u,f),o=o.add(u)}return new pa(r.key,s,new ri(o.toArray()),ai.none())}}function SN(r,e,n){r instanceof Nu?(function(o,u,f){const p=o.value.clone(),m=HE(o.fieldTransforms,u,f.transformResults);p.setAll(m),u.convertToFoundDocument(f.version,p).setHasCommittedMutations()})(r,e,n):r instanceof pa?(function(o,u,f){if(!Eh(o.precondition,u))return void u.convertToUnknownDocument(f.version);const p=HE(o.fieldTransforms,u,f.transformResults),m=u.data;m.setAll(TS(o)),m.setAll(p),u.convertToFoundDocument(f.version,m).setHasCommittedMutations()})(r,e,n):(function(o,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()})(0,e,n)}function lu(r,e,n,s){return r instanceof Nu?(function(u,f,p,m){if(!Eh(u.precondition,f))return p;const y=u.value.clone(),T=FE(u.fieldTransforms,m,f);return y.setAll(T),f.convertToFoundDocument(f.version,y).setHasLocalMutations(),null})(r,e,n,s):r instanceof pa?(function(u,f,p,m){if(!Eh(u.precondition,f))return p;const y=FE(u.fieldTransforms,m,f),T=f.data;return T.setAll(TS(u)),T.setAll(y),f.convertToFoundDocument(f.version,T).setHasLocalMutations(),p===null?null:p.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((A=>A.field)))})(r,e,n,s):(function(u,f,p){return Eh(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):p})(r,e,n)}function AN(r,e){let n=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),u=gS(s.transform,o||null);u!=null&&(n===null&&(n=Qn.empty()),n.set(s.field,u))}return n||null}function qE(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&bo(s,o,((u,f)=>EN(u,f)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Nu extends af{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class pa extends af{constructor(e,n,s,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function TS(r){const e=new Map;return r.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=r.data.field(n);e.set(n,s)}})),e}function HE(r,e,n){const s=new Map;Ke(r.length===n.length,32656,{Re:n.length,Ve:r.length});for(let o=0;o<n.length;o++){const u=r[o],f=u.transform,p=e.data.field(u.field);s.set(u.field,_N(f,p,n[o]))}return s}function FE(r,e,n){const s=new Map;for(const o of r){const u=o.transform,f=n.data.field(o.field);s.set(o.field,yN(u,f,e))}return s}class Bp extends af{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class bN extends af{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&SN(u,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=lu(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=lu(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=mS();return this.mutations.forEach((o=>{const u=e.get(o.key),f=u.overlayedDocument;let p=this.applyToLocalView(f,u.mutatedFields);p=n.has(o.key)?null:p;const m=ES(f,p);m!==null&&s.set(o.key,m),f.isValidDocument()||f.convertToNoDocument(Ie.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Ue())}isEqual(e){return this.batchId===e.batchId&&bo(this.mutations,e.mutations,((n,s)=>qE(n,s)))&&bo(this.baseMutations,e.baseMutations,((n,s)=>qE(n,s)))}}class qp{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){Ke(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return fN})();const u=e.mutations;for(let f=0;f<u.length;f++)o=o.insert(u[f].key,s[f].version);return new qp(e,n,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xt,He;function IN(r){switch(r){case Z.OK:return be(64938);case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0;default:return be(15467,{code:r})}}function SS(r){if(r===void 0)return pr("GRPC error has no .code"),Z.UNKNOWN;switch(r){case xt.OK:return Z.OK;case xt.CANCELLED:return Z.CANCELLED;case xt.UNKNOWN:return Z.UNKNOWN;case xt.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case xt.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case xt.INTERNAL:return Z.INTERNAL;case xt.UNAVAILABLE:return Z.UNAVAILABLE;case xt.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case xt.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case xt.NOT_FOUND:return Z.NOT_FOUND;case xt.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case xt.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case xt.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case xt.ABORTED:return Z.ABORTED;case xt.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case xt.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case xt.DATA_LOSS:return Z.DATA_LOSS;default:return be(39323,{code:r})}}(He=xt||(xt={}))[He.OK=0]="OK",He[He.CANCELLED=1]="CANCELLED",He[He.UNKNOWN=2]="UNKNOWN",He[He.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",He[He.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",He[He.NOT_FOUND=5]="NOT_FOUND",He[He.ALREADY_EXISTS=6]="ALREADY_EXISTS",He[He.PERMISSION_DENIED=7]="PERMISSION_DENIED",He[He.UNAUTHENTICATED=16]="UNAUTHENTICATED",He[He.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",He[He.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",He[He.ABORTED=10]="ABORTED",He[He.OUT_OF_RANGE=11]="OUT_OF_RANGE",He[He.UNIMPLEMENTED=12]="UNIMPLEMENTED",He[He.INTERNAL=13]="INTERNAL",He[He.UNAVAILABLE=14]="UNAVAILABLE",He[He.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CN(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NN=new ss([4294967295,4294967295],0);function GE(r){const e=CN().encode(r),n=new LT;return n.update(e),new Uint8Array(n.digest())}function QE(r){const e=new DataView(r.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new ss([n,s],0),new ss([o,u],0)]}class Hp{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new eu(`Invalid padding: ${n}`);if(s<0)throw new eu(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new eu(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new eu(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ss.fromNumber(this.ge)}ye(e,n,s){let o=e.add(n.multiply(ss.fromNumber(s)));return o.compare(NN)===1&&(o=new ss([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=GE(e),[s,o]=QE(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(s,o,u);if(!this.we(f))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),f=new Hp(u,o,n);return s.forEach((p=>f.insert(p))),f}insert(e){if(this.ge===0)return;const n=GE(e),[s,o]=QE(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(s,o,u);this.Se(f)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class eu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(e,n,s,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,Du.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new of(Ie.min(),o,new ht(Le),gr(),Ue())}}class Du{constructor(e,n,s,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Du(s,n,Ue(),Ue(),Ue())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(e,n,s,o){this.be=e,this.removedTargetIds=n,this.key=s,this.De=o}}class AS{constructor(e,n){this.targetId=e,this.Ce=n}}class bS{constructor(e,n,s=Xt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class YE{constructor(){this.ve=0,this.Fe=KE(),this.Me=Xt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ue(),n=Ue(),s=Ue();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:be(38017,{changeType:u})}})),new Du(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=KE()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ke(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class DN{constructor(e){this.Ge=e,this.ze=new Map,this.je=gr(),this.Je=uh(),this.He=uh(),this.Ye=new ht(Le)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:be(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,s=e.Ce.count,o=this.ot(n);if(o){const u=o.target;if(Zm(u))if(s===0){const f=new ve(u.path);this.et(n,f,nn.newNoDocument(f,Ie.min()))}else Ke(s===1,20013,{expectedCount:s});else{const f=this._t(n);if(f!==s){const p=this.ut(e),m=p?this.ct(p,e,f):1;if(m!==0){this.it(n);const y=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,y)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=n;let f,p;try{f=cs(s).toUint8Array()}catch(m){if(m instanceof $T)return Ao("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{p=new Hp(f,o,u)}catch(m){return Ao(m instanceof eu?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return p.ge===0?null:p}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let o=0;return s.forEach((u=>{const f=this.Ge.ht(),p=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;e.mightContain(p)||(this.et(n,u,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((u,f)=>{const p=this.ot(f);if(p){if(u.current&&Zm(p.target)){const m=new ve(p.target.path);this.It(m).has(f)||this.Et(f,m)||this.et(f,m,nn.newNoDocument(m,e))}u.Be&&(n.set(f,u.ke()),u.qe())}}));let s=Ue();this.He.forEach(((u,f)=>{let p=!0;f.forEachWhile((m=>{const y=this.ot(m);return!y||y.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(s=s.add(u))})),this.je.forEach(((u,f)=>f.setReadTime(e)));const o=new of(e,n,this.Ye,this.je,s);return this.je=gr(),this.Je=uh(),this.He=uh(),this.Ye=new ht(Le),o}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new YE,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new kt(Le),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new kt(Le),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||me("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new YE),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function uh(){return new ht(ve.comparator)}function KE(){return new ht(ve.comparator)}const ON={asc:"ASCENDING",desc:"DESCENDING"},MN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},VN={and:"AND",or:"OR"};class PN{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function np(r,e){return r.useProto3Json||Zh(e)?e:{value:e}}function Uh(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function wS(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function kN(r,e){return Uh(r,e.toTimestamp())}function Vi(r){return Ke(!!r,49232),Ie.fromTimestamp((function(n){const s=us(n);return new ot(s.seconds,s.nanos)})(r))}function Fp(r,e){return ip(r,e).canonicalString()}function ip(r,e){const n=(function(o){return new at(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?n:n.child(e)}function RS(r){const e=at.fromString(r);return Ke(DS(e),10190,{key:e.toString()}),e}function rp(r,e){return Fp(r.databaseId,e.path)}function Cm(r,e){const n=RS(e);if(n.get(1)!==r.databaseId.projectId)throw new he(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new he(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new ve(IS(n))}function xS(r,e){return Fp(r.databaseId,e)}function LN(r){const e=RS(r);return e.length===4?at.emptyPath():IS(e)}function sp(r){return new at(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function IS(r){return Ke(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function $E(r,e,n){return{name:rp(r,e),fields:n.value.mapValue.fields}}function UN(r,e){let n;if("targetChange"in e){e.targetChange;const s=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:be(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(y,T){return y.useProto3Json?(Ke(T===void 0||typeof T=="string",58123),Xt.fromBase64String(T||"")):(Ke(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),Xt.fromUint8Array(T||new Uint8Array))})(r,e.targetChange.resumeToken),f=e.targetChange.cause,p=f&&(function(y){const T=y.code===void 0?Z.UNKNOWN:SS(y.code);return new he(T,y.message||"")})(f);n=new bS(s,o,u,p||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Cm(r,s.document.name),u=Vi(s.document.updateTime),f=s.document.createTime?Vi(s.document.createTime):Ie.min(),p=new Qn({mapValue:{fields:s.document.fields}}),m=nn.newFoundDocument(o,u,f,p),y=s.targetIds||[],T=s.removedTargetIds||[];n=new Th(y,T,m.key,m)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Cm(r,s.document),u=s.readTime?Vi(s.readTime):Ie.min(),f=nn.newNoDocument(o,u),p=s.removedTargetIds||[];n=new Th([],p,f.key,f)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Cm(r,s.document),u=s.removedTargetIds||[];n=new Th([],u,o,null)}else{if(!("filter"in e))return be(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,f=new xN(o,u),p=s.targetId;n=new AS(p,f)}}return n}function jN(r,e){let n;if(e instanceof Nu)n={update:$E(r,e.key,e.value)};else if(e instanceof Bp)n={delete:rp(r,e.key)};else if(e instanceof pa)n={update:$E(r,e.key,e.data),updateMask:KN(e.fieldMask)};else{if(!(e instanceof bN))return be(16599,{Vt:e.type});n={verify:rp(r,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(u,f){const p=f.transform;if(p instanceof Eu)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof Tu)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof Su)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof Lh)return{fieldPath:f.field.canonicalString(),increment:p.Ae};throw be(20930,{transform:f.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:kN(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:be(27497)})(r,e.precondition)),n}function zN(r,e){return r&&r.length>0?(Ke(e!==void 0,14353),r.map((n=>(function(o,u){let f=o.updateTime?Vi(o.updateTime):Vi(u);return f.isEqual(Ie.min())&&(f=Vi(u)),new TN(f,o.transformResults||[])})(n,e)))):[]}function BN(r,e){return{documents:[xS(r,e.path)]}}function qN(r,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=xS(r,o);const u=(function(y){if(y.length!==0)return NS(li.create(y,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const f=(function(y){if(y.length!==0)return y.map((T=>(function(R){return{field:fo(R.field),direction:GN(R.dir)}})(T)))})(e.orderBy);f&&(n.structuredQuery.orderBy=f);const p=np(r,e.limit);return p!==null&&(n.structuredQuery.limit=p),e.startAt&&(n.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:n,parent:o}}function HN(r){let e=LN(r.parent);const n=r.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){Ke(s===1,65062);const T=n.from[0];T.allDescendants?o=T.collectionId:e=e.child(T.collectionId)}let u=[];n.where&&(u=(function(A){const R=CS(A);return R instanceof li&&sS(R)?R.getFilters():[R]})(n.where));let f=[];n.orderBy&&(f=(function(A){return A.map((R=>(function(B){return new vu(mo(B.field),(function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(B.direction))})(R)))})(n.orderBy));let p=null;n.limit&&(p=(function(A){let R;return R=typeof A=="object"?A.value:A,Zh(R)?null:R})(n.limit));let m=null;n.startAt&&(m=(function(A){const R=!!A.before,N=A.values||[];return new kh(N,R)})(n.startAt));let y=null;return n.endAt&&(y=(function(A){const R=!A.before,N=A.values||[];return new kh(N,R)})(n.endAt)),oN(e,o,f,u,p,"F",m,y)}function FN(r,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return be(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function CS(r){return r.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=mo(n.unaryFilter.field);return It.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=mo(n.unaryFilter.field);return It.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=mo(n.unaryFilter.field);return It.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=mo(n.unaryFilter.field);return It.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return be(61313);default:return be(60726)}})(r):r.fieldFilter!==void 0?(function(n){return It.create(mo(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return be(58110);default:return be(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(n){return li.create(n.compositeFilter.filters.map((s=>CS(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return be(1026)}})(n.compositeFilter.op))})(r):be(30097,{filter:r})}function GN(r){return ON[r]}function QN(r){return MN[r]}function YN(r){return VN[r]}function fo(r){return{fieldPath:r.canonicalString()}}function mo(r){return $t.fromServerFormat(r.fieldPath)}function NS(r){return r instanceof It?(function(n){if(n.op==="=="){if(kE(n.value))return{unaryFilter:{field:fo(n.field),op:"IS_NAN"}};if(PE(n.value))return{unaryFilter:{field:fo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(kE(n.value))return{unaryFilter:{field:fo(n.field),op:"IS_NOT_NAN"}};if(PE(n.value))return{unaryFilter:{field:fo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fo(n.field),op:QN(n.op),value:n.value}}})(r):r instanceof li?(function(n){const s=n.getFilters().map((o=>NS(o)));return s.length===1?s[0]:{compositeFilter:{op:YN(n.op),filters:s}}})(r):be(54877,{filter:r})}function KN(r){const e=[];return r.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function DS(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e,n,s,o,u=Ie.min(),f=Ie.min(),p=Xt.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=p,this.expectedCount=m}withSequenceNumber(e){return new es(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new es(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new es(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new es(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{constructor(e){this.yt=e}}function XN(r){const e=HN({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?tp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(){this.Cn=new JN}addToCollectionParentIndex(e,n){return this.Cn.add(n),ne.resolve()}getCollectionParents(e,n){return ne.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ne.resolve()}deleteFieldIndex(e,n){return ne.resolve()}deleteAllFieldIndexes(e){return ne.resolve()}createTargetIndexes(e,n){return ne.resolve()}getDocumentsMatchingTarget(e,n){return ne.resolve(null)}getIndexType(e,n){return ne.resolve(0)}getFieldIndexes(e,n){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,n){return ne.resolve(ls.min())}getMinOffsetFromCollectionGroup(e,n){return ne.resolve(ls.min())}updateCollectionGroup(e,n,s){return ne.resolve()}updateIndexEntries(e,n){return ne.resolve()}}class JN{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new kt(at.comparator),u=!o.has(s);return this.index[n]=o.add(s),u}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new kt(at.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},OS=41943040;class mn{static withCacheSize(e){return new mn(e,mn.DEFAULT_COLLECTION_PERCENTILE,mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */mn.DEFAULT_COLLECTION_PERCENTILE=10,mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,mn.DEFAULT=new mn(OS,mn.DEFAULT_COLLECTION_PERCENTILE,mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),mn.DISABLED=new mn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new xo(0)}static cr(){return new xo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WE="LruGarbageCollector",ZN=1048576;function JE([r,e],[n,s]){const o=Le(r,n);return o===0?Le(e,s):o}class e2{constructor(e){this.Ir=e,this.buffer=new kt(JE),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();JE(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class t2{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){me(WE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Po(n)?me(WE,"Ignoring IndexedDB error during garbage collection: ",n):await Vo(n)}await this.Vr(3e5)}))}}class n2{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return ne.resolve(Jh.ce);const s=new e2(n);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(me("LruGarbageCollector","Garbage collection skipped; disabled"),ne.resolve(XE)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),XE):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,o,u,f,p,m,y;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((A=>(A>this.params.maximumSequenceNumbersToCollect?(me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),o=this.params.maximumSequenceNumbersToCollect):o=A,f=Date.now(),this.nthSequenceNumber(e,o)))).next((A=>(s=A,p=Date.now(),this.removeTargets(e,s,n)))).next((A=>(u=A,m=Date.now(),this.removeOrphanedDocuments(e,s)))).next((A=>(y=Date.now(),co()<=ke.DEBUG&&me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-T}ms
	Determined least recently used ${o} in `+(p-f)+`ms
	Removed ${u} targets in `+(m-p)+`ms
	Removed ${A} documents in `+(y-m)+`ms
Total Duration: ${y-T}ms`),ne.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:A}))))}}function i2(r,e){return new n2(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(){this.changes=new ma((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,nn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?ne.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(s!==null&&lu(s.mutation,o,ri.empty(),ot.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,Ue()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=Ue()){const o=na();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,s).next((u=>{let f=Zl();return u.forEach(((p,m)=>{f=f.insert(p,m.overlayedDocument)})),f}))))}getOverlayedDocuments(e,n){const s=na();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,Ue())))}populateOverlays(e,n,s){const o=[];return s.forEach((u=>{n.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((f,p)=>{n.set(f,p)}))}))}computeViews(e,n,s,o){let u=gr();const f=ou(),p=(function(){return ou()})();return n.forEach(((m,y)=>{const T=s.get(y.key);o.has(y.key)&&(T===void 0||T.mutation instanceof pa)?u=u.insert(y.key,y):T!==void 0?(f.set(y.key,T.mutation.getFieldMask()),lu(T.mutation,y,T.mutation.getFieldMask(),ot.now())):f.set(y.key,ri.empty())})),this.recalculateAndSaveOverlays(e,u).next((m=>(m.forEach(((y,T)=>f.set(y,T))),n.forEach(((y,T)=>p.set(y,new s2(T,f.get(y)??null)))),p)))}recalculateAndSaveOverlays(e,n){const s=ou();let o=new ht(((f,p)=>f-p)),u=Ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((f=>{for(const p of f)p.keys().forEach((m=>{const y=n.get(m);if(y===null)return;let T=s.get(m)||ri.empty();T=p.applyToLocalView(y,T),s.set(m,T);const A=(o.get(p.batchId)||Ue()).add(m);o=o.insert(p.batchId,A)}))})).next((()=>{const f=[],p=o.getReverseIterator();for(;p.hasNext();){const m=p.getNext(),y=m.key,T=m.value,A=mS();T.forEach((R=>{if(!u.has(R)){const N=ES(n.get(R),s.get(R));N!==null&&A.set(R,N),u=u.add(R)}})),f.push(this.documentOverlayCache.saveOverlays(e,y,A))}return ne.waitFor(f)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,o){return(function(f){return ve.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):uS(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next((u=>{const f=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-u.size):ne.resolve(na());let p=pu,m=u;return f.next((y=>ne.forEach(y,((T,A)=>(p<A.largestBatchId&&(p=A.largestBatchId),u.get(T)?ne.resolve():this.remoteDocumentCache.getEntry(e,T).next((R=>{m=m.insert(T,R)}))))).next((()=>this.populateOverlays(e,y,u))).next((()=>this.computeViews(e,m,y,Ue()))).next((T=>({batchId:p,changes:dS(T)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ve(n)).next((s=>{let o=Zl();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const u=n.collectionGroup;let f=Zl();return this.indexManager.getCollectionParents(e,u).next((p=>ne.forEach(p,(m=>{const y=(function(A,R){return new ko(R,null,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt)})(n,m.child(u));return this.getDocumentsMatchingCollectionQuery(e,y,s,o).next((T=>{T.forEach(((A,R)=>{f=f.insert(A,R)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(e,n,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,u,o)))).next((f=>{u.forEach(((m,y)=>{const T=y.getKey();f.get(T)===null&&(f=f.insert(T,nn.newInvalidDocument(T)))}));let p=Zl();return f.forEach(((m,y)=>{const T=u.get(m);T!==void 0&&lu(T.mutation,y,ri.empty(),ot.now()),rf(n,y)&&(p=p.insert(m,y))})),p}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return ne.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:Vi(o.createTime)}})(n)),ne.resolve()}getNamedQuery(e,n){return ne.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:XN(o.bundledQuery),readTime:Vi(o.readTime)}})(n)),ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(){this.overlays=new ht(ve.comparator),this.qr=new Map}getOverlay(e,n){return ne.resolve(this.overlays.get(n))}getOverlays(e,n){const s=na();return ne.forEach(n,(o=>this.getOverlay(e,o).next((u=>{u!==null&&s.set(o,u)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((o,u)=>{this.St(e,n,u)})),ne.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(s)),ne.resolve()}getOverlaysForCollection(e,n,s){const o=na(),u=n.length+1,f=new ve(n.child("")),p=this.overlays.getIteratorFrom(f);for(;p.hasNext();){const m=p.getNext().value,y=m.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===u&&m.largestBatchId>s&&o.set(m.getKey(),m)}return ne.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let u=new ht(((y,T)=>y-T));const f=this.overlays.getIterator();for(;f.hasNext();){const y=f.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>s){let T=u.get(y.largestBatchId);T===null&&(T=na(),u=u.insert(y.largestBatchId,T)),T.set(y.getKey(),y)}}const p=na(),m=u.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((y,T)=>p.set(y,T))),!(p.size()>=o)););return ne.resolve(p)}St(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const f=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new RN(n,s));let u=this.qr.get(n);u===void 0&&(u=Ue(),this.qr.set(n,u)),this.qr.set(n,u.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(){this.sessionToken=Xt.EMPTY_BYTE_STRING}getSessionToken(e){return ne.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ne.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(){this.Qr=new kt(qt.$r),this.Ur=new kt(qt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new qt(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Gr(new qt(e,n))}zr(e,n){e.forEach((s=>this.removeReference(s,n)))}jr(e){const n=new ve(new at([])),s=new qt(n,e),o=new qt(n,e+1),u=[];return this.Ur.forEachInRange([s,o],(f=>{this.Gr(f),u.push(f.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ve(new at([])),s=new qt(n,e),o=new qt(n,e+1);let u=Ue();return this.Ur.forEachInRange([s,o],(f=>{u=u.add(f.key)})),u}containsKey(e){const n=new qt(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class qt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ve.comparator(e.key,n.key)||Le(e.Yr,n.Yr)}static Kr(e,n){return Le(e.Yr,n.Yr)||ve.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new kt(qt.$r)}checkEmpty(e){return ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new wN(u,n,s,o);this.mutationQueue.push(f);for(const p of o)this.Zr=this.Zr.add(new qt(p.key,u)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return ne.resolve(f)}lookupMutationBatch(e,n){return ne.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.ei(s),u=o<0?0:o;return ne.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(this.mutationQueue.length===0?Pp:this.tr-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new qt(n,0),o=new qt(n,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([s,o],(f=>{const p=this.Xr(f.Yr);u.push(p)})),ne.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new kt(Le);return n.forEach((o=>{const u=new qt(o,0),f=new qt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,f],(p=>{s=s.add(p.Yr)}))})),ne.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let u=s;ve.isDocumentKey(u)||(u=u.child(""));const f=new qt(new ve(u),0);let p=new kt(Le);return this.Zr.forEachWhile((m=>{const y=m.key.path;return!!s.isPrefixOf(y)&&(y.length===o&&(p=p.add(m.Yr)),!0)}),f),ne.resolve(this.ti(p))}ti(e){const n=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){Ke(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return ne.forEach(n.mutations,(o=>{const u=new qt(o.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,n){const s=new qt(n,0),o=this.Zr.firstAfterOrEqual(s);return ne.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ne.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(e){this.ri=e,this.docs=(function(){return new ht(ve.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),u=o?o.size:0,f=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return ne.resolve(s?s.document.mutableCopy():nn.newInvalidDocument(n))}getEntries(e,n){let s=gr();return n.forEach((o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():nn.newInvalidDocument(o))})),ne.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let u=gr();const f=n.path,p=new ve(f.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(p);for(;m.hasNext();){const{key:y,value:{document:T}}=m.getNext();if(!f.isPrefixOf(y.path))break;y.path.length>f.length+1||jC(UC(T),s)<=0||(o.has(T.key)||rf(n,T))&&(u=u.insert(T.key,T.mutableCopy()))}return ne.resolve(u)}getAllFromCollectionGroup(e,n,s,o){be(9500)}ii(e,n){return ne.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new f2(this)}getSize(e){return ne.resolve(this.size)}}class f2 extends r2{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),ne.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(e){this.persistence=e,this.si=new ma((n=>Up(n)),jp),this.lastRemoteSnapshotVersion=Ie.min(),this.highestTargetId=0,this.oi=0,this._i=new Gp,this.targetCount=0,this.ai=xo.ur()}forEachTarget(e,n){return this.si.forEach(((s,o)=>n(o))),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),ne.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new xo(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,ne.resolve()}updateTargetData(e,n){return this.Pr(n),ne.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,n,s){let o=0;const u=[];return this.si.forEach(((f,p)=>{p.sequenceNumber<=n&&s.get(p.targetId)===null&&(this.si.delete(f),u.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)})),ne.waitFor(u).next((()=>o))}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return ne.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),ne.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach((f=>{u.push(o.markPotentiallyOrphaned(e,f))})),ne.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),ne.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return ne.resolve(s)}containsKey(e,n){return ne.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{constructor(e,n){this.ui={},this.overlays={},this.ci=new Jh(0),this.li=!1,this.li=!0,this.hi=new u2,this.referenceDelegate=e(this),this.Pi=new d2(this),this.indexManager=new WN,this.remoteDocumentCache=(function(o){return new h2(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new $N(n),this.Ii=new o2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new l2,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new c2(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){me("MemoryPersistence","Starting transaction:",e);const o=new m2(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(e,n){return ne.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,n))))}}class m2 extends BC{constructor(e){super(),this.currentSequenceNumber=e}}class Qp{constructor(e){this.persistence=e,this.Ri=new Gp,this.Vi=null}static mi(e){return new Qp(e)}get fi(){if(this.Vi)return this.Vi;throw be(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),ne.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),ne.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),ne.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>s.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.fi,(s=>{const o=ve.fromPath(s);return this.gi(e,o).next((u=>{u||n.removeEntry(o,Ie.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return ne.or([()=>ne.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class jh{constructor(e,n){this.persistence=e,this.pi=new ma((s=>FC(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=i2(this,n)}static mi(e,n){return new jh(e,n)}Ei(){}di(e){return ne.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((o=>s+o))))}wr(e){let n=0;return this.pr(e,(s=>{n++})).next((()=>n))}pr(e,n){return ne.forEach(this.pi,((s,o)=>this.br(e,s,o).next((u=>u?ne.resolve():n(o)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(e,(f=>this.br(e,f,n).next((p=>{p||(s++,u.removeEntry(f,Ie.min()))})))).next((()=>u.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),ne.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),ne.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),ne.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),ne.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=_h(e.data.value)),n}br(e,n,s){return ne.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return ne.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=o}static As(e,n){let s=Ue(),o=Ue();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Yp(e,n.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return k1()?8:qC(sn())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,o){const u={result:null};return this.ys(e,n).next((f=>{u.result=f})).next((()=>{if(!u.result)return this.ws(e,n,o,s).next((f=>{u.result=f}))})).next((()=>{if(u.result)return;const f=new p2;return this.Ss(e,n,f).next((p=>{if(u.result=p,this.Vs)return this.bs(e,n,f,p.size)}))})).next((()=>u.result))}bs(e,n,s,o){return s.documentReadCount<this.fs?(co()<=ke.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",ho(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ne.resolve()):(co()<=ke.DEBUG&&me("QueryEngine","Query:",ho(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(co()<=ke.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",ho(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Mi(n))):ne.resolve())}ys(e,n){if(zE(n))return ne.resolve(null);let s=Mi(n);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=tp(n,null,"F"),s=Mi(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((u=>{const f=Ue(...u);return this.ps.getDocuments(e,f).next((p=>this.indexManager.getMinOffset(e,s).next((m=>{const y=this.Ds(n,p);return this.Cs(n,y,f,m.readTime)?this.ys(e,tp(n,null,"F")):this.vs(e,y,n,m)}))))})))))}ws(e,n,s,o){return zE(n)||o.isEqual(Ie.min())?ne.resolve(null):this.ps.getDocuments(e,s).next((u=>{const f=this.Ds(n,u);return this.Cs(n,f,s,o)?ne.resolve(null):(co()<=ke.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),ho(n)),this.vs(e,f,n,LC(o,pu)).next((p=>p)))}))}Ds(e,n){let s=new kt(hS(e));return n.forEach(((o,u)=>{rf(e,u)&&(s=s.add(u))})),s}Cs(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,n,s){return co()<=ke.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",ho(n)),this.ps.getDocumentsMatchingQuery(e,n,ls.min(),s)}vs(e,n,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((u=>(n.forEach((f=>{u=u.insert(f.key,f)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kp="LocalStore",y2=3e8;class _2{constructor(e,n,s,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new ht(Le),this.xs=new ma((u=>Up(u)),jp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new a2(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function v2(r,e,n,s){return new _2(r,e,n,s)}async function VS(r,e){const n=Ce(r);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next((u=>(o=u,n.Bs(e),n.mutationQueue.getAllMutationBatches(s)))).next((u=>{const f=[],p=[];let m=Ue();for(const y of o){f.push(y.batchId);for(const T of y.mutations)m=m.add(T.key)}for(const y of u){p.push(y.batchId);for(const T of y.mutations)m=m.add(T.key)}return n.localDocuments.getDocuments(s,m).next((y=>({Ls:y,removedBatchIds:f,addedBatchIds:p})))}))}))}function E2(r,e){const n=Ce(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),u=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(p,m,y,T){const A=y.batch,R=A.keys();let N=ne.resolve();return R.forEach((B=>{N=N.next((()=>T.getEntry(m,B))).next(($=>{const L=y.docVersions.get(B);Ke(L!==null,48541),$.version.compareTo(L)<0&&(A.applyToRemoteDocument($,y),$.isValidDocument()&&($.setReadTime(y.commitVersion),T.addEntry($)))}))})),N.next((()=>p.mutationQueue.removeMutationBatch(m,A)))})(n,s,e,u).next((()=>u.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(p){let m=Ue();for(let y=0;y<p.mutationResults.length;++y)p.mutationResults[y].transformResults.length>0&&(m=m.add(p.batch.mutations[y].key));return m})(e)))).next((()=>n.localDocuments.getDocuments(s,o)))}))}function PS(r){const e=Ce(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function T2(r,e){const n=Ce(r),s=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const f=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const p=[];e.targetChanges.forEach(((T,A)=>{const R=o.get(A);if(!R)return;p.push(n.Pi.removeMatchingKeys(u,T.removedDocuments,A).next((()=>n.Pi.addMatchingKeys(u,T.addedDocuments,A))));let N=R.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(A)!==null?N=N.withResumeToken(Xt.EMPTY_BYTE_STRING,Ie.min()).withLastLimboFreeSnapshotVersion(Ie.min()):T.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(T.resumeToken,s)),o=o.insert(A,N),(function($,L,se){return $.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-$.snapshotVersion.toMicroseconds()>=y2?!0:se.addedDocuments.size+se.modifiedDocuments.size+se.removedDocuments.size>0})(R,N,T)&&p.push(n.Pi.updateTargetData(u,N))}));let m=gr(),y=Ue();if(e.documentUpdates.forEach((T=>{e.resolvedLimboDocuments.has(T)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(u,T))})),p.push(S2(u,f,e.documentUpdates).next((T=>{m=T.ks,y=T.qs}))),!s.isEqual(Ie.min())){const T=n.Pi.getLastRemoteSnapshotVersion(u).next((A=>n.Pi.setTargetsMetadata(u,u.currentSequenceNumber,s)));p.push(T)}return ne.waitFor(p).next((()=>f.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,m,y))).next((()=>m))})).then((u=>(n.Ms=o,u)))}function S2(r,e,n){let s=Ue(),o=Ue();return n.forEach((u=>s=s.add(u))),e.getEntries(r,s).next((u=>{let f=gr();return n.forEach(((p,m)=>{const y=u.get(p);m.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(p)),m.isNoDocument()&&m.version.isEqual(Ie.min())?(e.removeEntry(p,m.readTime),f=f.insert(p,m)):!y.isValidDocument()||m.version.compareTo(y.version)>0||m.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(m),f=f.insert(p,m)):me(Kp,"Ignoring outdated watch update for ",p,". Current version:",y.version," Watch version:",m.version)})),{ks:f,qs:o}}))}function A2(r,e){const n=Ce(r);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Pp),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function b2(r,e){const n=Ce(r);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return n.Pi.getTargetData(s,e).next((u=>u?(o=u,ne.resolve(o)):n.Pi.allocateTargetId(s).next((f=>(o=new es(e,f,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=n.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s}))}async function ap(r,e,n){const s=Ce(r),o=s.Ms.get(e),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,(f=>s.persistence.referenceDelegate.removeTarget(f,o)))}catch(f){if(!Po(f))throw f;me(Kp,`Failed to update sequence numbers for target ${e}: ${f}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function ZE(r,e,n){const s=Ce(r);let o=Ie.min(),u=Ue();return s.persistence.runTransaction("Execute query","readwrite",(f=>(function(m,y,T){const A=Ce(m),R=A.xs.get(T);return R!==void 0?ne.resolve(A.Ms.get(R)):A.Pi.getTargetData(y,T)})(s,f,Mi(e)).next((p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(f,p.targetId).next((m=>{u=m}))})).next((()=>s.Fs.getDocumentsMatchingQuery(f,e,n?o:Ie.min(),n?u:Ue()))).next((p=>(w2(s,uN(e),p),{documents:p,Qs:u})))))}function w2(r,e,n){let s=r.Os.get(e)||Ie.min();n.forEach(((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)})),r.Os.set(e,s)}class e0{constructor(){this.activeTargetIds=pN()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class R2{constructor(){this.Mo=new e0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new e0,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t0="ConnectivityMonitor";class n0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){me(t0,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){me(t0,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ch=null;function op(){return ch===null?ch=(function(){return 268435456+Math.round(2147483648*Math.random())})():ch++,"0x"+ch.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nm="RestConnection",I2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class C2{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===Vh?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,n,s,o,u){const f=op(),p=this.zo(e,n.toUriEncodedString());me(Nm,`Sending RPC '${e}' ${f}:`,p,s);const m={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(m,o,u);const{host:y}=new URL(p),T=Do(y);return this.Jo(e,p,m,s,T).then((A=>(me(Nm,`Received RPC '${e}' ${f}: `,A),A)),(A=>{throw Ao(Nm,`RPC '${e}' ${f} failed with error: `,A,"url: ",p,"request:",s),A}))}Ho(e,n,s,o,u,f){return this.Go(e,n,s,o,u)}jo(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Mo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,u)=>e[u]=o)),s&&s.headers.forEach(((o,u)=>e[u]=o))}zo(e,n){const s=I2[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const en="WebChannelConnection";class D2 extends C2{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,o,u){const f=op();return new Promise(((p,m)=>{const y=new UT;y.setWithCredentials(!0),y.listenOnce(jT.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case yh.NO_ERROR:const A=y.getResponseJson();me(en,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(A)),p(A);break;case yh.TIMEOUT:me(en,`RPC '${e}' ${f} timed out`),m(new he(Z.DEADLINE_EXCEEDED,"Request time out"));break;case yh.HTTP_ERROR:const R=y.getStatus();if(me(en,`RPC '${e}' ${f} failed with status:`,R,"response text:",y.getResponseText()),R>0){let N=y.getResponseJson();Array.isArray(N)&&(N=N[0]);const B=N?.error;if(B&&B.status&&B.message){const $=(function(se){const ae=se.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(ae)>=0?ae:Z.UNKNOWN})(B.status);m(new he($,B.message))}else m(new he(Z.UNKNOWN,"Server responded with status "+y.getStatus()))}else m(new he(Z.UNAVAILABLE,"Connection failed."));break;default:be(9055,{l_:e,streamId:f,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{me(en,`RPC '${e}' ${f} completed.`)}}));const T=JSON.stringify(o);me(en,`RPC '${e}' ${f} sending request:`,o),y.send(n,"POST",T,s,15)}))}T_(e,n,s){const o=op(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=qT(),p=BT(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(m.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(m.useFetchStreams=!0),this.jo(m.initMessageHeaders,n,s),m.encodeInitMessageHeaders=!0;const T=u.join("");me(en,`Creating RPC '${e}' stream ${o}: ${T}`,m);const A=f.createWebChannel(T,m);this.I_(A);let R=!1,N=!1;const B=new N2({Yo:L=>{N?me(en,`Not sending because RPC '${e}' stream ${o} is closed:`,L):(R||(me(en,`Opening RPC '${e}' stream ${o} transport.`),A.open(),R=!0),me(en,`RPC '${e}' stream ${o} sending:`,L),A.send(L))},Zo:()=>A.close()}),$=(L,se,ae)=>{L.listen(se,(re=>{try{ae(re)}catch(fe){setTimeout((()=>{throw fe}),0)}}))};return $(A,Jl.EventType.OPEN,(()=>{N||(me(en,`RPC '${e}' stream ${o} transport opened.`),B.o_())})),$(A,Jl.EventType.CLOSE,(()=>{N||(N=!0,me(en,`RPC '${e}' stream ${o} transport closed`),B.a_(),this.E_(A))})),$(A,Jl.EventType.ERROR,(L=>{N||(N=!0,Ao(en,`RPC '${e}' stream ${o} transport errored. Name:`,L.name,"Message:",L.message),B.a_(new he(Z.UNAVAILABLE,"The operation could not be completed")))})),$(A,Jl.EventType.MESSAGE,(L=>{if(!N){const se=L.data[0];Ke(!!se,16349);const ae=se,re=ae?.error||ae[0]?.error;if(re){me(en,`RPC '${e}' stream ${o} received error:`,re);const fe=re.status;let le=(function(x){const w=xt[x];if(w!==void 0)return SS(w)})(fe),pe=re.message;le===void 0&&(le=Z.INTERNAL,pe="Unknown error status: "+fe+" with message "+re.message),N=!0,B.a_(new he(le,pe)),A.close()}else me(en,`RPC '${e}' stream ${o} received:`,se),B.u_(se)}})),$(p,zT.STAT_EVENT,(L=>{L.stat===Km.PROXY?me(en,`RPC '${e}' stream ${o} detected buffering proxy`):L.stat===Km.NOPROXY&&me(en,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{B.__()}),0),B}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function Dm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lf(r){return new PN(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(e,n,s=1e3,o=1.5,u=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-s);o>0&&me("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0="PersistentStream";class LS{constructor(e,n,s,o,u,f,p,m){this.Mi=e,this.S_=s,this.b_=o,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=p,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new kS(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===Z.RESOURCE_EXHAUSTED?(pr(n.toString()),pr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===n&&this.G_(s,o)}),(s=>{e((()=>{const o=new he(Z.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return me(i0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(me(i0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class O2 extends LS{constructor(e,n,s,o,u,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,f),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=UN(this.serializer,e),s=(function(u){if(!("targetChange"in u))return Ie.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?Ie.min():f.readTime?Vi(f.readTime):Ie.min()})(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=sp(this.serializer),n.addTarget=(function(u,f){let p;const m=f.target;if(p=Zm(m)?{documents:BN(u,m)}:{query:qN(u,m).ft},p.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){p.resumeToken=wS(u,f.resumeToken);const y=np(u,f.expectedCount);y!==null&&(p.expectedCount=y)}else if(f.snapshotVersion.compareTo(Ie.min())>0){p.readTime=Uh(u,f.snapshotVersion.toTimestamp());const y=np(u,f.expectedCount);y!==null&&(p.expectedCount=y)}return p})(this.serializer,e);const s=FN(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=sp(this.serializer),n.removeTarget=e,this.q_(n)}}class M2 extends LS{constructor(e,n,s,o,u,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,f),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ke(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ke(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ke(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=zN(e.writeResults,e.commitTime),s=Vi(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=sp(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>jN(this.serializer,s)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{}class P2 extends V2{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new he(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.Go(e,ip(n,s),o,u,f))).catch((u=>{throw u.name==="FirebaseError"?(u.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new he(Z.UNKNOWN,u.toString())}))}Ho(e,n,s,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,p])=>this.connection.Ho(e,ip(n,s),o,f,p,u))).catch((f=>{throw f.name==="FirebaseError"?(f.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new he(Z.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class k2{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(pr(n),this.aa=!1):me("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ca="RemoteStore";class L2{constructor(e,n,s,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((f=>{s.enqueueAndForget((async()=>{ga(this)&&(me(ca,"Restarting streams for network reachability change."),await(async function(m){const y=Ce(m);y.Ea.add(4),await Ou(y),y.Ra.set("Unknown"),y.Ea.delete(4),await uf(y)})(this))}))})),this.Ra=new k2(s,o)}}async function uf(r){if(ga(r))for(const e of r.da)await e(!0)}async function Ou(r){for(const e of r.da)await e(!1)}function US(r,e){const n=Ce(r);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Jp(n)?Wp(n):Lo(n).O_()&&Xp(n,e))}function $p(r,e){const n=Ce(r),s=Lo(n);n.Ia.delete(e),s.O_()&&jS(n,e),n.Ia.size===0&&(s.O_()?s.L_():ga(n)&&n.Ra.set("Unknown"))}function Xp(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ie.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Lo(r).Y_(e)}function jS(r,e){r.Va.Ue(e),Lo(r).Z_(e)}function Wp(r){r.Va=new DN({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Lo(r).start(),r.Ra.ua()}function Jp(r){return ga(r)&&!Lo(r).x_()&&r.Ia.size>0}function ga(r){return Ce(r).Ea.size===0}function zS(r){r.Va=void 0}async function U2(r){r.Ra.set("Online")}async function j2(r){r.Ia.forEach(((e,n)=>{Xp(r,e)}))}async function z2(r,e){zS(r),Jp(r)?(r.Ra.ha(e),Wp(r)):r.Ra.set("Unknown")}async function B2(r,e,n){if(r.Ra.set("Online"),e instanceof bS&&e.state===2&&e.cause)try{await(async function(o,u){const f=u.cause;for(const p of u.targetIds)o.Ia.has(p)&&(await o.remoteSyncer.rejectListen(p,f),o.Ia.delete(p),o.Va.removeTarget(p))})(r,e)}catch(s){me(ca,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await zh(r,s)}else if(e instanceof Th?r.Va.Ze(e):e instanceof AS?r.Va.st(e):r.Va.tt(e),!n.isEqual(Ie.min()))try{const s=await PS(r.localStore);n.compareTo(s)>=0&&await(function(u,f){const p=u.Va.Tt(f);return p.targetChanges.forEach(((m,y)=>{if(m.resumeToken.approximateByteSize()>0){const T=u.Ia.get(y);T&&u.Ia.set(y,T.withResumeToken(m.resumeToken,f))}})),p.targetMismatches.forEach(((m,y)=>{const T=u.Ia.get(m);if(!T)return;u.Ia.set(m,T.withResumeToken(Xt.EMPTY_BYTE_STRING,T.snapshotVersion)),jS(u,m);const A=new es(T.target,m,y,T.sequenceNumber);Xp(u,A)})),u.remoteSyncer.applyRemoteEvent(p)})(r,n)}catch(s){me(ca,"Failed to raise snapshot:",s),await zh(r,s)}}async function zh(r,e,n){if(!Po(e))throw e;r.Ea.add(1),await Ou(r),r.Ra.set("Offline"),n||(n=()=>PS(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{me(ca,"Retrying IndexedDB access"),await n(),r.Ea.delete(1),await uf(r)}))}function BS(r,e){return e().catch((n=>zh(r,n,e)))}async function cf(r){const e=Ce(r),n=fs(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Pp;for(;q2(e);)try{const o=await A2(e.localStore,s);if(o===null){e.Ta.length===0&&n.L_();break}s=o.batchId,H2(e,o)}catch(o){await zh(e,o)}qS(e)&&HS(e)}function q2(r){return ga(r)&&r.Ta.length<10}function H2(r,e){r.Ta.push(e);const n=fs(r);n.O_()&&n.X_&&n.ea(e.mutations)}function qS(r){return ga(r)&&!fs(r).x_()&&r.Ta.length>0}function HS(r){fs(r).start()}async function F2(r){fs(r).ra()}async function G2(r){const e=fs(r);for(const n of r.Ta)e.ea(n.mutations)}async function Q2(r,e,n){const s=r.Ta.shift(),o=qp.from(s,e,n);await BS(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await cf(r)}async function Y2(r,e){e&&fs(r).X_&&await(async function(s,o){if((function(f){return IN(f)&&f!==Z.ABORTED})(o.code)){const u=s.Ta.shift();fs(s).B_(),await BS(s,(()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o))),await cf(s)}})(r,e),qS(r)&&HS(r)}async function r0(r,e){const n=Ce(r);n.asyncQueue.verifyOperationInProgress(),me(ca,"RemoteStore received new credentials");const s=ga(n);n.Ea.add(3),await Ou(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await uf(n)}async function K2(r,e){const n=Ce(r);e?(n.Ea.delete(2),await uf(n)):e||(n.Ea.add(2),await Ou(n),n.Ra.set("Unknown"))}function Lo(r){return r.ma||(r.ma=(function(n,s,o){const u=Ce(n);return u.sa(),new O2(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(r.datastore,r.asyncQueue,{Xo:U2.bind(null,r),t_:j2.bind(null,r),r_:z2.bind(null,r),H_:B2.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),Jp(r)?Wp(r):r.Ra.set("Unknown")):(await r.ma.stop(),zS(r))}))),r.ma}function fs(r){return r.fa||(r.fa=(function(n,s,o){const u=Ce(n);return u.sa(),new M2(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:F2.bind(null,r),r_:Y2.bind(null,r),ta:G2.bind(null,r),na:Q2.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await cf(r)):(await r.fa.stop(),r.Ta.length>0&&(me(ca,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(e,n,s,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new as,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,u){const f=Date.now()+s,p=new Zp(e,n,f,o,u);return p.start(s),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function eg(r,e){if(pr("AsyncQueue",`${e}: ${r}`),Po(r))return new he(Z.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{static emptySet(e){return new vo(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||ve.comparator(n.key,s.key):(n,s)=>ve.comparator(n.key,s.key),this.keyedMap=Zl(),this.sortedSet=new ht(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof vo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new vo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0{constructor(){this.ga=new ht(ve.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):be(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class Io{constructor(e,n,s,o,u,f,p,m,y){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=p,this.excludesMetadataChanges=m,this.hasCachedResults=y}static fromInitialDocuments(e,n,s,o,u){const f=[];return n.forEach((p=>{f.push({type:0,doc:p})})),new Io(e,n,vo.emptySet(n),f,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&nf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class X2{constructor(){this.queries=a0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const o=Ce(n),u=o.queries;o.queries=a0(),u.forEach(((f,p)=>{for(const m of p.Sa)m.onError(s)}))})(this,new he(Z.ABORTED,"Firestore shutting down"))}}function a0(){return new ma((r=>cS(r)),nf)}async function FS(r,e){const n=Ce(r);let s=3;const o=e.query;let u=n.queries.get(o);u?!u.ba()&&e.Da()&&(s=2):(u=new $2,s=e.Da()?0:1);try{switch(s){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(f){const p=eg(f,`Initialization of query '${ho(e.query)}' failed`);return void e.onError(p)}n.queries.set(o,u),u.Sa.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&tg(n)}async function GS(r,e){const n=Ce(r),s=e.query;let o=3;const u=n.queries.get(s);if(u){const f=u.Sa.indexOf(e);f>=0&&(u.Sa.splice(f,1),u.Sa.length===0?o=e.Da()?0:1:!u.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function W2(r,e){const n=Ce(r);let s=!1;for(const o of e){const u=o.query,f=n.queries.get(u);if(f){for(const p of f.Sa)p.Fa(o)&&(s=!0);f.wa=o}}s&&tg(n)}function J2(r,e,n){const s=Ce(r),o=s.queries.get(e);if(o)for(const u of o.Sa)u.onError(n);s.queries.delete(e)}function tg(r){r.Ca.forEach((e=>{e.next()}))}var lp,o0;(o0=lp||(lp={})).Ma="default",o0.Cache="cache";class QS{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Io(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Io.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==lp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(e){this.key=e}}class KS{constructor(e){this.key=e}}class Z2{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ue(),this.mutatedKeys=Ue(),this.eu=hS(e),this.tu=new vo(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new s0,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,f=o,p=!1;const m=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((T,A)=>{const R=o.get(T),N=rf(this.query,A)?A:null,B=!!R&&this.mutatedKeys.has(R.key),$=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let L=!1;R&&N?R.data.isEqual(N.data)?B!==$&&(s.track({type:3,doc:N}),L=!0):this.su(R,N)||(s.track({type:2,doc:N}),L=!0,(m&&this.eu(N,m)>0||y&&this.eu(N,y)<0)&&(p=!0)):!R&&N?(s.track({type:0,doc:N}),L=!0):R&&!N&&(s.track({type:1,doc:R}),L=!0,(m||y)&&(p=!0)),L&&(N?(f=f.add(N),u=$?u.add(T):u.delete(T)):(f=f.delete(T),u=u.delete(T)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const T=this.query.limitType==="F"?f.last():f.first();f=f.delete(T.key),u=u.delete(T.key),s.track({type:1,doc:T})}return{tu:f,iu:s,Cs:p,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const f=e.iu.ya();f.sort(((T,A)=>(function(N,B){const $=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return be(20277,{Rt:L})}};return $(N)-$(B)})(T.type,A.type)||this.eu(T.doc,A.doc))),this.ou(s),o=o??!1;const p=n&&!o?this._u():[],m=this.Xa.size===0&&this.current&&!o?1:0,y=m!==this.Za;return this.Za=m,f.length!==0||y?{snapshot:new Io(this.query,e.tu,u,f,e.mutatedKeys,m===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new s0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ue(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return e.forEach((s=>{this.Xa.has(s)||n.push(new KS(s))})),this.Xa.forEach((s=>{e.has(s)||n.push(new YS(s))})),n}cu(e){this.Ya=e.Qs,this.Xa=Ue();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Io.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const ng="SyncEngine";class eD{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class tD{constructor(e){this.key=e,this.hu=!1}}class nD{constructor(e,n,s,o,u,f){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new ma((p=>cS(p)),nf),this.Iu=new Map,this.Eu=new Set,this.du=new ht(ve.comparator),this.Au=new Map,this.Ru=new Gp,this.Vu={},this.mu=new Map,this.fu=xo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function iD(r,e,n=!0){const s=eA(r);let o;const u=s.Tu.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await $S(s,e,n,!0),o}async function rD(r,e){const n=eA(r);await $S(n,e,!0,!1)}async function $S(r,e,n,s){const o=await b2(r.localStore,Mi(e)),u=o.targetId,f=r.sharedClientState.addLocalQueryTarget(u,n);let p;return s&&(p=await sD(r,e,u,f==="current",o.resumeToken)),r.isPrimaryClient&&n&&US(r.remoteStore,o),p}async function sD(r,e,n,s,o){r.pu=(A,R,N)=>(async function($,L,se,ae){let re=L.view.ru(se);re.Cs&&(re=await ZE($.localStore,L.query,!1).then((({documents:M})=>L.view.ru(M,re))));const fe=ae&&ae.targetChanges.get(L.targetId),le=ae&&ae.targetMismatches.get(L.targetId)!=null,pe=L.view.applyChanges(re,$.isPrimaryClient,fe,le);return u0($,L.targetId,pe.au),pe.snapshot})(r,A,R,N);const u=await ZE(r.localStore,e,!0),f=new Z2(e,u.Qs),p=f.ru(u.documents),m=Du.createSynthesizedTargetChangeForCurrentChange(n,s&&r.onlineState!=="Offline",o),y=f.applyChanges(p,r.isPrimaryClient,m);u0(r,n,y.au);const T=new eD(e,n,f);return r.Tu.set(e,T),r.Iu.has(n)?r.Iu.get(n).push(e):r.Iu.set(n,[e]),y.snapshot}async function aD(r,e,n){const s=Ce(r),o=s.Tu.get(e),u=s.Iu.get(o.targetId);if(u.length>1)return s.Iu.set(o.targetId,u.filter((f=>!nf(f,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await ap(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),n&&$p(s.remoteStore,o.targetId),up(s,o.targetId)})).catch(Vo)):(up(s,o.targetId),await ap(s.localStore,o.targetId,!0))}async function oD(r,e){const n=Ce(r),s=n.Tu.get(e),o=n.Iu.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),$p(n.remoteStore,s.targetId))}async function lD(r,e,n){const s=pD(r);try{const o=await(function(f,p){const m=Ce(f),y=ot.now(),T=p.reduce(((N,B)=>N.add(B.key)),Ue());let A,R;return m.persistence.runTransaction("Locally write mutations","readwrite",(N=>{let B=gr(),$=Ue();return m.Ns.getEntries(N,T).next((L=>{B=L,B.forEach(((se,ae)=>{ae.isValidDocument()||($=$.add(se))}))})).next((()=>m.localDocuments.getOverlayedDocuments(N,B))).next((L=>{A=L;const se=[];for(const ae of p){const re=AN(ae,A.get(ae.key).overlayedDocument);re!=null&&se.push(new pa(ae.key,re,nS(re.value.mapValue),ai.exists(!0)))}return m.mutationQueue.addMutationBatch(N,y,se,p)})).next((L=>{R=L;const se=L.applyToLocalDocumentSet(A,$);return m.documentOverlayCache.saveOverlays(N,L.batchId,se)}))})).then((()=>({batchId:R.batchId,changes:dS(A)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(f,p,m){let y=f.Vu[f.currentUser.toKey()];y||(y=new ht(Le)),y=y.insert(p,m),f.Vu[f.currentUser.toKey()]=y})(s,o.batchId,n),await Mu(s,o.changes),await cf(s.remoteStore)}catch(o){const u=eg(o,"Failed to persist write");n.reject(u)}}async function XS(r,e){const n=Ce(r);try{const s=await T2(n.localStore,e);e.targetChanges.forEach(((o,u)=>{const f=n.Au.get(u);f&&(Ke(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?f.hu=!0:o.modifiedDocuments.size>0?Ke(f.hu,14607):o.removedDocuments.size>0&&(Ke(f.hu,42227),f.hu=!1))})),await Mu(n,s,e)}catch(s){await Vo(s)}}function l0(r,e,n){const s=Ce(r);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.Tu.forEach(((u,f)=>{const p=f.view.va(e);p.snapshot&&o.push(p.snapshot)})),(function(f,p){const m=Ce(f);m.onlineState=p;let y=!1;m.queries.forEach(((T,A)=>{for(const R of A.Sa)R.va(p)&&(y=!0)})),y&&tg(m)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function uD(r,e,n){const s=Ce(r);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Au.get(e),u=o&&o.key;if(u){let f=new ht(ve.comparator);f=f.insert(u,nn.newNoDocument(u,Ie.min()));const p=Ue().add(u),m=new of(Ie.min(),new Map,new ht(Le),f,p);await XS(s,m),s.du=s.du.remove(u),s.Au.delete(e),ig(s)}else await ap(s.localStore,e,!1).then((()=>up(s,e,n))).catch(Vo)}async function cD(r,e){const n=Ce(r),s=e.batch.batchId;try{const o=await E2(n.localStore,e);JS(n,s,null),WS(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Mu(n,o)}catch(o){await Vo(o)}}async function hD(r,e,n){const s=Ce(r);try{const o=await(function(f,p){const m=Ce(f);return m.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let T;return m.mutationQueue.lookupMutationBatch(y,p).next((A=>(Ke(A!==null,37113),T=A.keys(),m.mutationQueue.removeMutationBatch(y,A)))).next((()=>m.mutationQueue.performConsistencyCheck(y))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(y,T,p))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,T))).next((()=>m.localDocuments.getDocuments(y,T)))}))})(s.localStore,e);JS(s,e,n),WS(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Mu(s,o)}catch(o){await Vo(o)}}function WS(r,e){(r.mu.get(e)||[]).forEach((n=>{n.resolve()})),r.mu.delete(e)}function JS(r,e,n){const s=Ce(r);let o=s.Vu[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function up(r,e,n=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Iu.get(e))r.Tu.delete(s),n&&r.Pu.yu(s,n);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((s=>{r.Ru.containsKey(s)||ZS(r,s)}))}function ZS(r,e){r.Eu.delete(e.path.canonicalString());const n=r.du.get(e);n!==null&&($p(r.remoteStore,n),r.du=r.du.remove(e),r.Au.delete(n),ig(r))}function u0(r,e,n){for(const s of n)s instanceof YS?(r.Ru.addReference(s.key,e),fD(r,s)):s instanceof KS?(me(ng,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,e),r.Ru.containsKey(s.key)||ZS(r,s.key)):be(19791,{wu:s})}function fD(r,e){const n=e.key,s=n.path.canonicalString();r.du.get(n)||r.Eu.has(s)||(me(ng,"New document in limbo: "+n),r.Eu.add(s),ig(r))}function ig(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const n=new ve(at.fromString(e)),s=r.fu.next();r.Au.set(s,new tD(n)),r.du=r.du.insert(n,s),US(r.remoteStore,new es(Mi(tf(n.path)),s,"TargetPurposeLimboResolution",Jh.ce))}}async function Mu(r,e,n){const s=Ce(r),o=[],u=[],f=[];s.Tu.isEmpty()||(s.Tu.forEach(((p,m)=>{f.push(s.pu(m,e,n).then((y=>{if((y||n)&&s.isPrimaryClient){const T=y?!y.fromCache:n?.targetChanges.get(m.targetId)?.current;s.sharedClientState.updateQueryState(m.targetId,T?"current":"not-current")}if(y){o.push(y);const T=Yp.As(m.targetId,y);u.push(T)}})))})),await Promise.all(f),s.Pu.H_(o),await(async function(m,y){const T=Ce(m);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",(A=>ne.forEach(y,(R=>ne.forEach(R.Es,(N=>T.persistence.referenceDelegate.addReference(A,R.targetId,N))).next((()=>ne.forEach(R.ds,(N=>T.persistence.referenceDelegate.removeReference(A,R.targetId,N)))))))))}catch(A){if(!Po(A))throw A;me(Kp,"Failed to update sequence numbers: "+A)}for(const A of y){const R=A.targetId;if(!A.fromCache){const N=T.Ms.get(R),B=N.snapshotVersion,$=N.withLastLimboFreeSnapshotVersion(B);T.Ms=T.Ms.insert(R,$)}}})(s.localStore,u))}async function dD(r,e){const n=Ce(r);if(!n.currentUser.isEqual(e)){me(ng,"User change. New user:",e.toKey());const s=await VS(n.localStore,e);n.currentUser=e,(function(u,f){u.mu.forEach((p=>{p.forEach((m=>{m.reject(new he(Z.CANCELLED,f))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Mu(n,s.Ls)}}function mD(r,e){const n=Ce(r),s=n.Au.get(e);if(s&&s.hu)return Ue().add(s.key);{let o=Ue();const u=n.Iu.get(e);if(!u)return o;for(const f of u){const p=n.Tu.get(f);o=o.unionWith(p.view.nu)}return o}}function eA(r){const e=Ce(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=XS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=mD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=uD.bind(null,e),e.Pu.H_=W2.bind(null,e.eventManager),e.Pu.yu=J2.bind(null,e.eventManager),e}function pD(r){const e=Ce(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=cD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=hD.bind(null,e),e}class Bh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=lf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return v2(this.persistence,new g2,e.initialUser,this.serializer)}Cu(e){return new MS(Qp.mi,this.serializer)}Du(e){return new R2}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Bh.provider={build:()=>new Bh};class gD extends Bh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ke(this.persistence.referenceDelegate instanceof jh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new t2(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?mn.withCacheSize(this.cacheSizeBytes):mn.DEFAULT;return new MS((s=>jh.mi(s,n)),this.serializer)}}class cp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>l0(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=dD.bind(null,this.syncEngine),await K2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new X2})()}createDatastore(e){const n=lf(e.databaseInfo.databaseId),s=(function(u){return new D2(u)})(e.databaseInfo);return(function(u,f,p,m){return new P2(u,f,p,m)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,o,u,f,p){return new L2(s,o,u,f,p)})(this.localStore,this.datastore,e.asyncQueue,(n=>l0(this.syncEngine,n,0)),(function(){return n0.v()?new n0:new x2})())}createSyncEngine(e,n){return(function(o,u,f,p,m,y,T){const A=new nD(o,u,f,p,m,y);return T&&(A.gu=!0),A})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=Ce(n);me(ca,"RemoteStore shutting down."),s.Ea.add(5),await Ou(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}cp.provider={build:()=>new cp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):pr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ds="FirestoreClient";class yD{constructor(e,n,s,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=tn.UNAUTHENTICATED,this.clientId=Vp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,(async f=>{me(ds,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(s,(f=>(me(ds,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new as;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=eg(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Om(r,e){r.asyncQueue.verifyOperationInProgress(),me(ds,"Initializing OfflineComponentProvider");const n=r.configuration;await e.initialize(n);let s=n.initialUser;r.setCredentialChangeListener((async o=>{s.isEqual(o)||(await VS(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function c0(r,e){r.asyncQueue.verifyOperationInProgress();const n=await _D(r);me(ds,"Initializing OnlineComponentProvider"),await e.initialize(n,r.configuration),r.setCredentialChangeListener((s=>r0(e.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,o)=>r0(e.remoteStore,o))),r._onlineComponents=e}async function _D(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){me(ds,"Using user provided OfflineComponentProvider");try{await Om(r,r._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===Z.FAILED_PRECONDITION||o.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;Ao("Error using user provided cache. Falling back to memory cache: "+n),await Om(r,new Bh)}}else me(ds,"Using default OfflineComponentProvider"),await Om(r,new gD(void 0));return r._offlineComponents}async function nA(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(me(ds,"Using user provided OnlineComponentProvider"),await c0(r,r._uninitializedComponentsProvider._online)):(me(ds,"Using default OnlineComponentProvider"),await c0(r,new cp))),r._onlineComponents}function vD(r){return nA(r).then((e=>e.syncEngine))}async function hp(r){const e=await nA(r),n=e.eventManager;return n.onListen=iD.bind(null,e.syncEngine),n.onUnlisten=aD.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=rD.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=oD.bind(null,e.syncEngine),n}function ED(r,e,n={}){const s=new as;return r.asyncQueue.enqueueAndForget((async()=>(function(u,f,p,m,y){const T=new tA({next:R=>{T.Nu(),f.enqueueAndForget((()=>GS(u,A)));const N=R.docs.has(p);!N&&R.fromCache?y.reject(new he(Z.UNAVAILABLE,"Failed to get document because the client is offline.")):N&&R.fromCache&&m&&m.source==="server"?y.reject(new he(Z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(R)},error:R=>y.reject(R)}),A=new QS(tf(p.path),T,{includeMetadataChanges:!0,qa:!0});return FS(u,A)})(await hp(r),r.asyncQueue,e,n,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iA(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h0=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rA="firestore.googleapis.com",f0=!0;class d0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new he(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=rA,this.ssl=f0}else this.host=e.host,this.ssl=e.ssl??f0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=OS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<ZN)throw new he(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}kC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=iA(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new he(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new he(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new he(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class hf{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new d0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new d0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new RC;switch(s.type){case"firstParty":return new NC(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new he(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=h0.get(n);s&&(me("ComponentProvider","Removing Datastore"),h0.delete(n),s.terminate())})(this),Promise.resolve()}}function TD(r,e,n,s={}){r=Oi(r,hf);const o=Do(e),u=r._getSettings(),f={...u,emulatorOptions:r._getEmulatorOptions()},p=`${e}:${n}`;o&&(Y0(`https://${p}`),K0("Firestore",!0)),u.host!==rA&&u.host!==p&&Ao("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...u,host:p,ssl:o,emulatorOptions:s};if(!sa(m,f)&&(r._setSettings(m),s.mockUserToken)){let y,T;if(typeof s.mockUserToken=="string")y=s.mockUserToken,T=tn.MOCK_USER;else{y=x1(s.mockUserToken,r._app?.options.projectId);const A=s.mockUserToken.sub||s.mockUserToken.user_id;if(!A)throw new he(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new tn(A)}r._authCredentials=new xC(new FT(y,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new ya(this.firestore,e,this._query)}}class vt{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new os(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new vt(this.firestore,e,this._key)}toJSON(){return{type:vt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(Cu(n,vt._jsonSchema))return new vt(e,s||null,new ve(at.fromString(n.referencePath)))}}vt._jsonSchemaVersion="firestore/documentReference/1.0",vt._jsonSchema={type:Ct("string",vt._jsonSchemaVersion),referencePath:Ct("string")};class os extends ya{constructor(e,n,s){super(e,n,tf(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new vt(this.firestore,null,new ve(e))}withConverter(e){return new os(this.firestore,e,this._path)}}function Kn(r,e,...n){if(r=Tt(r),GT("collection","path",e),r instanceof hf){const s=at.fromString(e,...n);return RE(s),new os(r,null,s)}{if(!(r instanceof vt||r instanceof os))throw new he(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(at.fromString(e,...n));return RE(s),new os(r.firestore,null,s)}}function rn(r,e,...n){if(r=Tt(r),arguments.length===1&&(e=Vp.newId()),GT("doc","path",e),r instanceof hf){const s=at.fromString(e,...n);return wE(s),new vt(r,null,new ve(s))}{if(!(r instanceof vt||r instanceof os))throw new he(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(at.fromString(e,...n));return wE(s),new vt(r.firestore,r instanceof os?r.converter:null,new ve(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m0="AsyncQueue";class p0{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new kS(this,"async_queue_retry"),this._c=()=>{const s=Dm();s&&me(m0,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=Dm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Dm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new as;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Po(e))throw e;me(m0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,pr("INTERNAL UNHANDLED ERROR: ",g0(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=Zp.createAndSchedule(this,e,n,s,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&be(47125,{Pc:g0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function g0(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y0(r){return(function(n,s){if(typeof n!="object"||n===null)return!1;const o=n;for(const u of s)if(u in o&&typeof o[u]=="function")return!0;return!1})(r,["next","error","complete"])}class ha extends hf{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new p0,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new p0(e),this._firestoreClient=void 0,await e}}}function SD(r,e){const n=typeof r=="object"?r:Tp(),s=typeof r=="string"?r:Vh,o=Ep(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=w1("firestore");u&&TD(o,...u)}return o}function rg(r){if(r._terminated)throw new he(Z.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||AD(r),r._firestoreClient}function AD(r){const e=r._freezeSettings(),n=(function(o,u,f,p){return new YC(o,u,f,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,iA(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new yD(r._authCredentials,r._appCheckCredentials,r._queue,n,r._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Yn(Xt.fromBase64String(e))}catch(n){throw new he(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Yn(Xt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Yn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Cu(e,Yn._jsonSchema))return Yn.fromBase64String(e.bytes)}}Yn._jsonSchemaVersion="firestore/bytes/1.0",Yn._jsonSchema={type:Ct("string",Yn._jsonSchemaVersion),bytes:Ct("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new he(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $t(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new he(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new he(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Pi._jsonSchemaVersion}}static fromJSON(e){if(Cu(e,Pi._jsonSchema))return new Pi(e.latitude,e.longitude)}}Pi._jsonSchemaVersion="firestore/geoPoint/1.0",Pi._jsonSchema={type:Ct("string",Pi._jsonSchemaVersion),latitude:Ct("number"),longitude:Ct("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ki._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Cu(e,ki._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new ki(e.vectorValues);throw new he(Z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ki._jsonSchemaVersion="firestore/vectorValue/1.0",ki._jsonSchema={type:Ct("string",ki._jsonSchemaVersion),vectorValues:Ct("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bD=/^__.*__$/;class wD{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new pa(e,this.data,this.fieldMask,n,this.fieldTransforms):new Nu(e,this.data,n,this.fieldTransforms)}}function sA(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw be(40011,{Ac:r})}}class og{constructor(e,n,s,o,u,f){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new og({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return qh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(sA(this.Ac)&&bD.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class RD{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||lf(e)}Cc(e,n,s,o=!1){return new og({Ac:e,methodName:n,Dc:s,path:$t.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function lg(r){const e=r._freezeSettings(),n=lf(r._databaseId);return new RD(r._databaseId,!!e.ignoreUndefinedProperties,n)}function aA(r,e,n,s,o,u={}){const f=r.Cc(u.merge||u.mergeFields?2:0,e,n,o);uA("Data must be an object, but it was:",f,s);const p=oA(s,f);let m,y;if(u.merge)m=new ri(f.fieldMask),y=f.fieldTransforms;else if(u.mergeFields){const T=[];for(const A of u.mergeFields){const R=ID(e,A,n);if(!f.contains(R))throw new he(Z.INVALID_ARGUMENT,`Field '${R}' is specified in your field mask but missing from your input data.`);ND(T,R)||T.push(R)}m=new ri(T),y=f.fieldTransforms.filter((A=>m.covers(A.field)))}else m=null,y=f.fieldTransforms;return new wD(new Qn(p),m,y)}class ug extends ag{_toFieldTransform(e){return new vN(e.path,new Eu)}isEqual(e){return e instanceof ug}}function xD(r,e,n,s=!1){return cg(n,r.Cc(s?4:3,e))}function cg(r,e){if(lA(r=Tt(r)))return uA("Unsupported field value:",e,r),oA(r,e);if(r instanceof ag)return(function(s,o){if(!sA(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const u=[];let f=0;for(const p of s){let m=cg(p,o.wc(f));m==null&&(m={nullValue:"NULL_VALUE"}),u.push(m),f++}return{arrayValue:{values:u}}})(r,e)}return(function(s,o){if((s=Tt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return gN(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=ot.fromDate(s);return{timestampValue:Uh(o.serializer,u)}}if(s instanceof ot){const u=new ot(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Uh(o.serializer,u)}}if(s instanceof Pi)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Yn)return{bytesValue:wS(o.serializer,s._byteString)};if(s instanceof vt){const u=o.databaseId,f=s.firestore._databaseId;if(!f.isEqual(u))throw o.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Fp(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof ki)return(function(f,p){return{mapValue:{fields:{[eS]:{stringValue:tS},[Ph]:{arrayValue:{values:f.toArray().map((y=>{if(typeof y!="number")throw p.Sc("VectorValues must only contain numeric values.");return zp(p.serializer,y)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${Wh(s)}`)})(r,e)}function oA(r,e){const n={};return KT(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):da(r,((s,o)=>{const u=cg(o,e.mc(s));u!=null&&(n[s]=u)})),{mapValue:{fields:n}}}function lA(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof ot||r instanceof Pi||r instanceof Yn||r instanceof vt||r instanceof ag||r instanceof ki)}function uA(r,e,n){if(!lA(n)||!QT(n)){const s=Wh(n);throw s==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+s)}}function ID(r,e,n){if((e=Tt(e))instanceof sg)return e._internalPath;if(typeof e=="string")return cA(r,e);throw qh("Field path arguments must be of type string or ",r,!1,void 0,n)}const CD=new RegExp("[~\\*/\\[\\]]");function cA(r,e,n){if(e.search(CD)>=0)throw qh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new sg(...e.split("."))._internalPath}catch{throw qh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function qh(r,e,n,s,o){const u=s&&!s.isEmpty(),f=o!==void 0;let p=`Function ${e}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let m="";return(u||f)&&(m+=" (found",u&&(m+=` in field ${s}`),f&&(m+=` in document ${o}`),m+=")"),new he(Z.INVALID_ARGUMENT,p+r+m)}function ND(r,e){return r.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(e,n,s,o,u){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new vt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new DD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(ff("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class DD extends hA{data(){return super.data()}}function ff(r,e){return typeof e=="string"?cA(r,e):e instanceof sg?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OD(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new he(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class hg{}class fA extends hg{}function ms(r,e,...n){let s=[];e instanceof hg&&s.push(e),s=s.concat(n),(function(u){const f=u.filter((m=>m instanceof fg)).length,p=u.filter((m=>m instanceof df)).length;if(f>1||f>0&&p>0)throw new he(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)r=o._apply(r);return r}class df extends fA{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new df(e,n,s)}_apply(e){const n=this._parse(e);return dA(e._query,n),new ya(e.firestore,e.converter,ep(e._query,n))}_parse(e){const n=lg(e.firestore);return(function(u,f,p,m,y,T,A){let R;if(y.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new he(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){v0(A,T);const B=[];for(const $ of A)B.push(_0(m,u,$));R={arrayValue:{values:B}}}else R=_0(m,u,A)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||v0(A,T),R=xD(p,f,A,T==="in"||T==="not-in");return It.create(y,T,R)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function si(r,e,n){const s=e,o=ff("where",r);return df._create(o,s,n)}class fg extends hg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new fg(e,n)}_parse(e){const n=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:li.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,u){let f=o;const p=u.getFlattenedFilters();for(const m of p)dA(f,m),f=ep(f,m)})(e._query,n),new ya(e.firestore,e.converter,ep(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class dg extends fA{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new dg(e,n)}_apply(e){const n=(function(o,u,f){if(o.startAt!==null)throw new he(Z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new he(Z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new vu(u,f)})(e._query,this._field,this._direction);return new ya(e.firestore,e.converter,(function(o,u){const f=o.explicitOrderBy.concat([u]);return new ko(o.path,o.collectionGroup,f,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,n))}}function Hh(r,e="asc"){const n=e,s=ff("orderBy",r);return dg._create(s,n)}function _0(r,e,n){if(typeof(n=Tt(n))=="string"){if(n==="")throw new he(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!uS(e)&&n.indexOf("/")!==-1)throw new he(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(at.fromString(n));if(!ve.isDocumentKey(s))throw new he(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return VE(r,new ve(s))}if(n instanceof vt)return VE(r,n._key);throw new he(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Wh(n)}.`)}function v0(r,e){if(!Array.isArray(r)||r.length===0)throw new he(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function dA(r,e){const n=(function(o,u){for(const f of o)for(const p of f.getFlattenedFilters())if(u.indexOf(p.op)>=0)return p.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new he(Z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new he(Z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class MD{convertValue(e,n="none"){switch(hs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _t(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(cs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw be(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return da(e,((o,u)=>{s[o]=this.convertValue(u,n)})),s}convertVectorValue(e){const n=e.fields?.[Ph].arrayValue?.values?.map((s=>_t(s.doubleValue)));return new ki(n)}convertGeoPoint(e){return new Pi(_t(e.latitude),_t(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=ef(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(gu(e));default:return null}}convertTimestamp(e){const n=us(e);return new ot(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=at.fromString(e);Ke(DS(s),9688,{name:e});const o=new yu(s.get(1),s.get(3)),u=new ve(s.popFirst(5));return o.isEqual(n)||pr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mA(r,e,n){let s;return s=r?n&&(n.merge||n.mergeFields)?r.toFirestore(e,n):r.toFirestore(e):e,s}class tu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ra extends hA{constructor(e,n,s,o,u,f){super(e,n,s,o,f),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Sh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(ff("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new he(Z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ra._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ra._jsonSchemaVersion="firestore/documentSnapshot/1.0",ra._jsonSchema={type:Ct("string",ra._jsonSchemaVersion),bundleSource:Ct("string","DocumentSnapshot"),bundleName:Ct("string"),bundle:Ct("string")};class Sh extends ra{data(e={}){return super.data(e)}}class Eo{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new tu(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new Sh(this._firestore,this._userDataWriter,s.key,s,new tu(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new he(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map((p=>{const m=new Sh(o._firestore,o._userDataWriter,p.doc.key,p.doc,new tu(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:m,oldIndex:-1,newIndex:f++}}))}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((p=>u||p.type!==3)).map((p=>{const m=new Sh(o._firestore,o._userDataWriter,p.doc.key,p.doc,new tu(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,T=-1;return p.type!==0&&(y=f.indexOf(p.doc.key),f=f.delete(p.doc.key)),p.type!==1&&(f=f.add(p.doc),T=f.indexOf(p.doc.key)),{type:VD(p.type),doc:m,oldIndex:y,newIndex:T}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new he(Z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Eo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Vp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),s.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function VD(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return be(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pA(r){r=Oi(r,vt);const e=Oi(r.firestore,ha);return ED(rg(e),r._key).then((n=>yA(e,r,n)))}Eo._jsonSchemaVersion="firestore/querySnapshot/1.0",Eo._jsonSchema={type:Ct("string",Eo._jsonSchemaVersion),bundleSource:Ct("string","QuerySnapshot"),bundleName:Ct("string"),bundle:Ct("string")};class gA extends MD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new vt(this.firestore,null,n)}}function oi(r,e,n){r=Oi(r,vt);const s=Oi(r.firestore,ha),o=mA(r.converter,e,n);return mg(s,[aA(lg(s),"setDoc",r._key,o,r.converter!==null,n).toMutation(r._key,ai.none())])}function PD(r){return mg(Oi(r.firestore,ha),[new Bp(r._key,ai.none())])}function kD(r,e){const n=Oi(r.firestore,ha),s=rn(r),o=mA(r.converter,e);return mg(n,[aA(lg(r.firestore),"addDoc",s._key,o,r.converter!==null,{}).toMutation(s._key,ai.exists(!1))]).then((()=>s))}function pn(r,...e){r=Tt(r);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||y0(e[s])||(n=e[s++]);const o={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(y0(e[s])){const m=e[s];e[s]=m.next?.bind(m),e[s+1]=m.error?.bind(m),e[s+2]=m.complete?.bind(m)}let u,f,p;if(r instanceof vt)f=Oi(r.firestore,ha),p=tf(r._key.path),u={next:m=>{e[s]&&e[s](yA(f,r,m))},error:e[s+1],complete:e[s+2]};else{const m=Oi(r,ya);f=Oi(m.firestore,ha),p=m._query;const y=new gA(f);u={next:T=>{e[s]&&e[s](new Eo(f,y,m,T))},error:e[s+1],complete:e[s+2]},OD(r._query)}return(function(y,T,A,R){const N=new tA(R),B=new QS(T,N,A);return y.asyncQueue.enqueueAndForget((async()=>FS(await hp(y),B))),()=>{N.Nu(),y.asyncQueue.enqueueAndForget((async()=>GS(await hp(y),B)))}})(rg(f),p,o,u)}function mg(r,e){return(function(s,o){const u=new as;return s.asyncQueue.enqueueAndForget((async()=>lD(await vD(s),o,u))),u.promise})(rg(r),e)}function yA(r,e,n){const s=n.docs.get(e._key),o=new gA(r);return new ra(r,o,e._key,s,new tu(n.hasPendingWrites,n.fromCache),e.converter)}function xn(){return new ug("serverTimestamp")}(function(e,n=!0){(function(o){Mo=o})(Oo),To(new aa("firestore",((s,{instanceIdentifier:o,options:u})=>{const f=s.getProvider("app").getImmediate(),p=new ha(new IC(s.getProvider("auth-internal")),new DC(f,s.getProvider("app-check-internal")),(function(y,T){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new he(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yu(y.options.projectId,T)})(f,o),f);return u={useFetchStreams:n,...u},p._setSettings(u),p}),"PUBLIC").setMultipleInstances(!0)),rs(TE,SE,e),rs(TE,SE,"esm2020")})();var LD="firebase",UD="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */rs(LD,UD,"app");const jD={apiKey:"AIzaSyDr2XSTmdtMA1LD8UEv39HVYuZTf8AAbHo",authDomain:"timeisnow-b3923.firebaseapp.com",projectId:"timeisnow-b3923",storageBucket:"timeisnow-b3923.firebasestorage.app",messagingSenderId:"85315532113",appId:"1:85315532113:web:14339f7e6ebbc7177b4f70",measurementId:void 0},_A=FR().length?Tp():W0(jD),Ii=bC(_A),rt=SD(_A),zD=r=>oI(Ii,r??window.location.href),vA=U.createContext(null);function Xn(){return U.useContext(vA)}function BD({children:r}){const[e,n]=U.useState(null),[s,o]=U.useState(!0);U.useEffect(()=>{const N=fI(Ii,async B=>{try{if(n(B||null),B){const $=rn(rt,"users",B.uid);await oi($,{uid:B.uid,email:B.email||"",displayName:B.displayName||B.email?.split("@")[0]||"User",emailVerified:!!B.emailVerified,photoURL:B.photoURL||null,updatedAt:xn()},{merge:!0})}}catch($){console.error("Auth init error:",$)}finally{o(!1)}});return()=>N()},[]);async function u(N,B,$){let L,se,ae;if(typeof N=="object"&&N!==null?{email:L,password:se,displayName:ae}=N:(L=N,se=B,ae=$),!L||!se)throw new Error("Email and password are required");const re=await rI(Ii,L,se);if(ae)try{await RT(re.user,{displayName:ae})}catch{}const fe=rn(rt,"users",re.user.uid);return await oi(fe,{uid:re.user.uid,email:re.user.email||"",displayName:re.user.displayName||re.user.email?.split("@")[0]||"User",emailVerified:!!re.user.emailVerified,photoURL:re.user.photoURL||null,createdAt:xn(),updatedAt:xn()},{merge:!0}),re.user}async function f(N,B){let $,L;if(typeof N=="object"&&N!==null?{email:$,password:L}=N:($=N,L=B),!$||!L)throw new Error("Email and password are required");const{user:se}=await sI(Ii,$,L);return se}async function p(N){if(!N)throw new Error("Please enter your email.");await eI(Ii,N)}async function m(){await dI(Ii)}function y(){return{url:`${window.location.origin}/complete-email`,handleCodeInApp:!0}}async function T(N,B=y()){if(!N)throw new Error("Please enter your email.");await aI(Ii,N,B);try{window.localStorage.setItem("emailForSignIn",N)}catch{}}async function A(N){const B=(()=>{try{return window.localStorage.getItem("emailForSignIn")}catch{return null}})(),$=N||B;if(!$)throw new Error("Missing email for email-link sign-in.");const{user:L}=await lI(Ii,$,window.location.href);try{window.localStorage.removeItem("emailForSignIn")}catch{}const se=rn(rt,"users",L.uid);return await oi(se,{uid:L.uid,email:L.email||$,displayName:L.displayName||L.email?.split("@")[0]||"User",emailVerified:!!L.emailVerified,photoURL:L.photoURL||null,updatedAt:xn()},{merge:!0}),L}const R=U.useMemo(()=>({user:e,initializing:s,signUp:u,signIn:f,sendReset:p,signOut:m,startEmailLinkSignIn:T,completeEmailLinkSignIn:A,sendVerificationLink:T}),[e,s]);return E.jsx(vA.Provider,{value:R,children:r})}const qD={en:{journeys:"Journeys",vvote:"Vote",questions:"Questions",profile:"Profile",signIn:"Sign in",footerQuote:"Stay consistent, stay inspired.",reflection:"Reflection",subscribers:"subscribers",votersToday:"voters today",join:"Join",joined:"Joined",success:"Success",onTrack:"On track",overachieving:"Overachieving",digitalFree:"Digital free time",drinkWater:"Drink water",journaling:"Journaling",reading:"Reading",fallingBehind:"Falling behind",back:"← Back",today:"Today",yesterday:"Yesterday",finalized:"Finalized",draft:"Draft",vote:"Vote",close:"Close",haveYouDone:"Have you done this journey?",yes:"Yes",no:"No",ml:"ml",duration:"Duration",toBeContinued:"To be continued",saving:"Saving…",reflectionPlaceholder:"What did you feel or learn?",digital_free:"Digital Free",drink_water:"Drink Water",journaling:"Journaling",reading:"Reading",yes:"Yes",no:"No",started:"Started on",cancel:"Cancel",share:"Share",communityContributions:"Community contributions",noContributions:"No contributions yet.",exceeded:"Exceeded",done:"Done",no:"No",you:"You",seeMore:"See more",digital_freeQuote:"Unplug to recharge your mind.",drink_waterQuote:"Hydrate to feel energized.",journalingQuote:"Write to discover yourself.",readingQuote:"Read to expand your world.",questions:"Questions",all:"All",replyTo:"Reply to",chooseQuestion:"Choose a question…",selectQuestionPlaceholder:"Select a question to answer…",writeAnswer:"Write your answer…",sending:"Sending…",send:"Send",timeIsUp:"Time is up",communityOpensTomorrow:"Community will open again tomorrow.",goBack:"Go back",seeless:"See less",left:"left",metTargetOn:"metTargetOn",days:"days",partial:"partial",q1:"What went well today?",q2:"What challenged you?",q3:"One thing you learned?","30days":"30 days",firstRowNote:"First row starts from journey start date",day:"Day",missed:"missed",target:"target",daily:"daily",h:"h",min:"min",ml:"ml",started:"started",reacts:"Reacts",inspiring:"Inspiring",journeys:"Journeys",yourJourneys:"Your Journeys",editJourneys:"Edit Journeys",noJourneysYet:"No journeys yet.",chooseJourneys:"Choose your journeys",pickUpTo:"Pick up to",eachRunsFor:"Each runs for",whileActiveLocked:"While active, its settings are locked.",more:"more",nowOrLater:"now or later.",digitalFreeSub:"Disconnect, recharge",drinkWaterSub:"Hydrate daily",journalingSub:"Reflect & grow",readingSub:"Daily pages",locked:"Locked",edit:"Edit",setUp:"Set up",selectedTapToEdit:"Selected • tap to edit",fullWait:"Full (wait until one unlocks)",notSet:"Not set",daysLeft:"d left",whyDo:"Why do you want to do this?",yourReason:"Your reason or motivation",whenWork:"When will you work on this goal? (approx.)",targetDuration:"Target duration (hh:mm)",dailyTargetMl:"Daily target (ml)",whatDoInTime:"What can you do in this time?",activityPlaceholder:"e.g., Nothing, walking, tea, stretching",bottleSizeMl:"Bottle/cup size (ml)",howJournal:"How are you going to journal?",journalPlaceholder:"e.g., Notebook and pen",suggestion:"Suggestion",notebookPen:"Notebook and pen",whatBook:"What is the book you will read?",bookPlaceholder:"e.g., Atomic Habits",noJourneyYet:"No journey set up yet",ctaDescription:"Pick up to two journeys to start tracking your daily progress.",setUpJourney:"Set up journey",profile:"Profile",signIn:"Sign in",signInPrompt:"Please sign in to view your profile."},ar:{journeys:"الرحلات",vote:"تصويت",questions:"أسئلة",profile:"الملف الشخصي",signIn:"تسجيل الدخول",footerQuote:"ابقَ ثابتًا، وابقَ مُلهمًا.",reflection:"انعكاس",subscribers:"مشتركين",votersToday:"مصوتين اليوم",join:"انضم",joined:"منضم",success:"نجاح",onTrack:"على المسار",seeLess:"شاهد أقل",overachieving:"متفوق",fallingBehind:"متأخر",digitalFree:"وقت بلا شاشات",drinkWater:"شرب الماء",journaling:"كتابة يومية",reading:"القراءة",back:"→ رجوع",seeMore:"شاهد المزيد",today:"اليوم",yesterday:"أمس",finalized:"مُنجز",draft:"مسودة",vote:"التصويت",close:"إغلاق",metTargetOn:"حققت الهدف في",haveYouDone:"هل أنجزت هذه الرحلة؟",yes:"نعم",no:"لا",ml:"مل",days:"أيام",duration:"المدة",toBeContinued:"سأكمل لاحقًا",saving:"جارٍ الحفظ…",reflectionPlaceholder:"ماذا شعرت أو ماذا تعلمت؟",cancel:"إلغاء",share:"شارك",communityContributions:"مساهمات المجتمع",noContributions:"لا توجد مساهمات بعد.",exceeded:"تجاوز",done:"تم",no:"لا",you:"أنت",digital_freeQuote:"افصل لتجدد ذهنك.",drink_waterQuote:"ارتوِ لتشعر بالنشاط.",journalingQuote:"اكتب لتكتشف نفسك.",readingQuote:"اقرأ لتوسع آفاقك.",questions:"الأسئلة",all:"الكل",replyTo:"رد على",chooseQuestion:"اختر سؤالًا…",selectQuestionPlaceholder:"اختر سؤالًا للإجابة…",writeAnswer:"اكتب إجابتك…",sending:"جارٍ الإرسال…",send:"إرسال",timeIsUp:"انتهى الوقت",communityOpensTomorrow:"سيفتح المجتمع مرة أخرى غدًا.",goBack:"عودة",left:"متبقي",q1:"ما الذي سار بشكل جيد اليوم؟",q2:"ما الذي شكّلك تحديًا؟",q3:"شيء واحد تعلمته؟","30days":"٣٠ يوم",firstRowNote:"الصف الأول يبدأ من تاريخ بداية الرحلة",day:"اليوم",digital_free:"وقت بلا شاشات",partial:"جزئي",missed:"فائت",target:"هدف",daily:"يومي",h:"س",min:"د",started:"بدأت في",ml:"مل",reacts:"تفاعلات",inspiring:"ملهم",journeys:"الرحلات",yourJourneys:"رحلاتك",editJourneys:"تعديل الرحلات",noJourneysYet:"لا توجد رحلات بعد.",chooseJourneys:"اختر رحلاتك",pickUpTo:"اختر حتى",eachRunsFor:"كل رحلة تستمر لمدة",whileActiveLocked:"أثناء النشاط، تكون الإعدادات مقفلة.",more:"أخرى",nowOrLater:"الآن أو لاحقًا.",digitalFreeSub:"افصل لتتجدد",drinkWaterSub:"اشرب الماء يوميًا",journalingSub:"اكتب وانمُ",readingSub:"اقرأ يوميًا",locked:"مقفل",edit:"تعديل",setUp:"إعداد",selectedTapToEdit:"محدد • اضغط للتعديل",fullWait:"ممتلئ (انتظر حتى تُفتح رحلة)",notSet:"غير محدد",daysLeft:"يوم متبقٍ",whyDo:"لماذا تريد القيام بذلك؟",yourReason:"اكتب سببك أو دافعك",whenWork:"متى ستعمل على هذا الهدف؟ (تقريبًا)",targetDuration:"المدة المستهدفة (س:د)",dailyTargetMl:"الهدف اليومي (مل)",whatDoInTime:"ماذا يمكنك أن تفعل في هذا الوقت؟",activityPlaceholder:"مثال: لا شيء، مشي، شاي، تمدد",bottleSizeMl:"حجم الزجاجة/الكوب (مل)",howJournal:"كيف ستكتب يومياتك؟",journalPlaceholder:"مثال: دفتر وقلم",suggestion:"اقتراح",notebookPen:"دفتر وقلم",whatBook:"ما الكتاب الذي ستقرأه؟",bookPlaceholder:"مثال: العادات الذرية",noJourneyYet:"لم يتم إعداد أي رحلة بعد",ctaDescription:"اختر حتى رحلتين لبدء متابعة تقدمك اليومي.",setUpJourney:"إعداد رحلة",profile:"الملف الشخصي",signIn:"تسجيل الدخول",signInPrompt:"الرجاء تسجيل الدخول لعرض ملفك الشخصي."}},EA=U.createContext();function TA({children:r}){const[e,n]=U.useState(()=>localStorage.getItem("lang")||"en"),s=u=>{n(u),localStorage.setItem("lang",u)};U.useEffect(()=>{document.documentElement.lang=e,document.documentElement.dir=e==="ar"?"rtl":"ltr"},[e]);const o=u=>qD[e]?.[u]||u;return E.jsx(EA.Provider,{value:{lang:e,setLang:s,t:o},children:r})}function an(){return U.useContext(EA)}function SA(r){var e,n,s="";if(typeof r=="string"||typeof r=="number")s+=r;else if(typeof r=="object")if(Array.isArray(r)){var o=r.length;for(e=0;e<o;e++)r[e]&&(n=SA(r[e]))&&(s&&(s+=" "),s+=n)}else for(n in r)r[n]&&(s&&(s+=" "),s+=n);return s}function nu(){for(var r,e,n=0,s="",o=arguments.length;n<o;n++)(r=arguments[n])&&(e=SA(r))&&(s&&(s+=" "),s+=e);return s}function HD({open:r,onClose:e,title:n,children:s,footer:o,center:u=!1}){return r?E.jsx("div",{className:"modal-backdrop",onClick:e,children:E.jsxs("div",{className:nu("modal relative",u&&"text-center"),onClick:f=>f.stopPropagation(),children:[E.jsx("button",{className:"absolute right-4 top-4 text-2xl leading-none",onClick:e,"aria-label":"Close",children:"×"}),E.jsx("h3",{className:nu("text-2xl font-semibold mb-4",u&&"mx-auto"),children:n}),E.jsx("div",{className:nu(u&&"flex flex-col items-center"),children:s}),o&&E.jsx("div",{className:nu("mt-6 flex gap-3",u?"justify-center":"justify-end"),children:o})]})}):null}function FD({value:r=0,max:e=100}){const n=Math.max(0,Math.min(100,r/e*100));return E.jsx("div",{className:"w-full h-2 bg-ring rounded-full overflow-hidden",children:E.jsx("div",{className:"h-full bg-accent",style:{width:n+"%"}})})}function Fe({children:r,variant:e="primary",className:n="",...s}){const o="rounded-xl px-4 py-2 font-medium transition disabled:opacity-50 disabled:cursor-not-allowed",u={primary:"bg-accent text-white shadow hover:bg-accent/90",ghost:"text-text/70 hover:bg-ring/10",danger:"bg-red-600 text-white hover:bg-red-700"};return E.jsx("button",{...s,className:nu(o,u[e],n),children:r})}function Nt({children:r,className:e="",onClick:n}){return E.jsx("div",{onClick:n,role:n?"button":void 0,tabIndex:n?0:void 0,className:`rounded-xl border border-ring bg-white p-6 shadow-sm ${n?"cursor-pointer":""} ${e}`,children:r})}function ia({children:r,className:e=""}){const{lang:n}=an();return E.jsx("div",{dir:n==="ar"?"rtl":"ltr",className:`max-w-3xl mx-auto px-4 ${e}`,children:r})}function GD(){const{user:r,signOut:e}=Xn(),{lang:n,setLang:s}=an(),[o,u]=U.useState(!1),f=U.useRef(null);return r?(U.useEffect(()=>{function p(y){f.current&&!f.current.contains(y.target)&&u(!1)}function m(y){y.key==="Escape"&&u(!1)}return o&&(document.addEventListener("mousedown",p),document.addEventListener("keydown",m)),()=>{document.removeEventListener("mousedown",p),document.removeEventListener("keydown",m)}},[o]),U.useEffect(()=>{n==="ar"?document.documentElement.dir="rtl":document.documentElement.dir="ltr"},[n]),E.jsxs("div",{className:"relative",ref:f,children:[E.jsxs(Fe,{variant:"ghost",size:"sm",onClick:()=>u(p=>!p),className:"flex items-center gap-2",children:[E.jsx("span",{className:"truncate max-w-[150px] text-sm",children:r.email}),E.jsx("span",{className:"text-lg",children:"▾"})]}),o&&E.jsxs(Nt,{className:"absolute right-0 mt-2 w-48 shadow-lg p-2 z-50 space-y-1",children:[E.jsx(Fe,{variant:"ghost",className:"w-full justify-start",onClick:()=>{s(n==="en"?"ar":"en"),u(!1)},children:n==="en"?"العربية":"English"}),E.jsx(Fe,{variant:"ghost",className:"w-full justify-start text-red-600",onClick:()=>{e(),u(!1)},children:"Sign out"})]})]})):null}function Kl({children:r}){const{user:e}=Xn(),n=ui(),{t:s,lang:o,setLang:u}=an();return E.jsxs("div",{className:"min-h-screen flex flex-col bg-background text-text",dir:o==="ar"?"rtl":"ltr",children:[E.jsx("header",{className:"fixed top-0 left-0 w-full z-50 border-b border-ring bg-white",children:E.jsxs("div",{className:`max-w-4xl w-full mx-auto px-2 sm:px-4 py-2 flex items-center justify-between ${o==="ar"?"flex-row-reverse":""}`,children:[E.jsx(rh,{to:"/vote",className:"font-semibold text-lg",children:"🌸"}),E.jsxs("nav",{className:`flex items-center gap-4 ${o==="ar"?"flex-row-reverse":""}`,children:[E.jsxs(rh,{to:"/vote","aria-label":s("vote"),children:[" ",E.jsx("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:E.jsx("path",{d:"M12 19V6M5 12l7-7 7 7"})})]}),E.jsxs(rh,{to:"/questions","aria-label":s("questions"),children:[" ",E.jsxs("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[E.jsx("circle",{cx:"12",cy:"12",r:"10"}),E.jsx("path",{d:"M12 16v-4"}),E.jsx("path",{d:"M12 8h.01"})]})]}),E.jsxs(rh,{to:"/profile","aria-label":s("profile"),children:[" ",E.jsxs("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[E.jsx("circle",{cx:"12",cy:"7",r:"4"}),E.jsx("path",{d:"M5.5 21a8.38 8.38 0 0 1 13 0"})]})]}),e?E.jsx(GD,{}):E.jsx(Fe,{variant:"primary",size:"sm",className:"w-full sm:w-auto",onClick:()=>n("/auth"),children:E.jsxs("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[E.jsx("path",{d:"M15 3h4a2 2 0 0 1 2 2v16a2 2 0 0 1-2 2h-4"}),E.jsx("polyline",{points:"10 17 15 12 10 7"}),E.jsx("line",{x1:"15",y1:"12",x2:"3",y2:"12"})]})})]})]})}),E.jsx("main",{className:"flex-1 w-full pt-[64px]",children:E.jsx("div",{className:"max-w-4xl w-full mx-auto px-2 sm:px-4 py-4 sm:py-6",children:r})}),E.jsx("footer",{className:"border-t border-ring text-sm text-text/70 w-full",children:E.jsxs("div",{className:"max-w-4xl w-full mx-auto px-2 sm:px-4 py-2 sm:py-3 flex flex-col sm:flex-row justify-between items-center gap-2",children:[E.jsxs("p",{children:["© ",new Date().getFullYear()," Aldaem"]}),E.jsx("p",{className:"italic text-center sm:text-right",children:s("footerQuote")})]})})]})}function Mm({label:r,value:e}){return E.jsxs("div",{className:"rounded-xl border border-ring p-3",children:[E.jsx("div",{className:"text-xs uppercase tracking-wide text-text/60",children:r}),E.jsx("div",{className:"text-lg font-semibold",children:e})]})}function QD({className:r=""}){return E.jsxs("svg",{className:r,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[E.jsx("path",{d:"M12 20h9"}),E.jsx("path",{d:"M16.5 3.5a2.121 2.121 0 013 3L7 19l-4 1 1-4 12.5-12.5z"})]})}function YD({className:r=""}){return E.jsx("svg",{className:r,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:E.jsx("polyline",{points:"20 6 9 17 4 12"})})}function KD({className:r=""}){return E.jsxs("svg",{className:r,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[E.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),E.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}const $D={reading:{unit:"min",monthlyUnit:"h"},journaling:{unit:"min",monthlyUnit:"h"},digital_free:{unit:"min",monthlyUnit:"h"},drink_water:{unit:"ml",monthlyUnit:"L"}};function XD({journeyKey:r,title:e,unit:n,monthlyUnit:s,dailyTargetRaw:o,toSeconds:u,monthlyTargetCalc:f,shares:p=[],filterShare:m,amountOfShare:y,starThresholdMult:T=1.5,startMs:A,compact:R=!1}){const{t:N}=an(),B=$D[r]||{},$=n||B.unit||"unit",L=s||B.monthlyUnit||"units",se=1440*60*1e3,ae=30,re=7,fe=5,le=r==="digital_free"?N("digitalFree"):r==="drink_water"?N("drinkWater"):r==="journaling"?N("journaling"):r==="reading"?N("reading"):e||N("journeys"),pe=new Date(A||Date.now());pe.setHours(0,0,0,0);const M=+pe,x=M+ae*se,w=new Date;w.setHours(0,0,0,0);const O=+w,V=(()=>{const ue=new Date(M);return`${String(ue.getDate()).padStart(2,"0")}/${String(ue.getMonth()+1).padStart(2,"0")}/${String(ue.getFullYear()).slice(-2)}`})(),k=u?u(o):o,I=f?f(o):30*o,Ae=`${o} ${N($)}`,Ee=new Map,G=ue=>{const je=new Date(ue);return`${je.getFullYear()}-${String(je.getMonth()+1).padStart(2,"0")}-${String(je.getDate()).padStart(2,"0")}`};p.filter(m||(()=>!0)).forEach(ue=>{const je=ue.finishedAt?.toDate?.()||ue.createdAt?.toDate?.()||null;if(!je)return;const Ne=+new Date(je.getFullYear(),je.getMonth(),je.getDate());if(Ne<M||Ne>=x)return;const nt=G(Ne);Ee.set(nt,(Ee.get(nt)||0)+(y?y(ue):0))});let X=0,ce=0;const xe=[];for(let ue=0;ue<fe*re;ue++){if(ue>=ae){xe.push({kind:"placeholder",label:"",ms:M+ue*se});continue}const je=M+ue*se,Ne=G(je),nt=Ee.get(Ne)||0;let St="miss";je>O?St="future":nt>=k?(St="star",X++,nt>=k*(T||1.5)&&ce++):nt>0&&(St="dot"),xe.push({kind:St,label:String(ue+1),ms:je,amt:nt})}const D=Math.min(ae,Math.floor((O-M)/se)+1);let F="onTrack";X>=D&&ce>=3&&(F="overachieving");const ie=R?"p-4":"p-6",ee=R?"text-lg":"text-xl",de=R?"h-6 w-6":"h-7 w-7",Re=R?"mb-2":"mb-3";return E.jsxs("div",{className:`card ${ie}`,children:[E.jsxs("div",{className:`flex items-center justify-between ${Re}`,children:[E.jsxs("div",{children:[E.jsx("h3",{className:`${ee} font-semibold`,children:le}),E.jsxs("p",{className:"text-sm text-text/70",children:[N("target"),": ",E.jsx("b",{children:I})," ",N(L)," ","(",N("daily"),": ",Ae,")"]}),E.jsxs("p",{className:"text-xs text-text/60 mt-0.5",children:[N("started"),": ",E.jsx("b",{children:V})]})]}),E.jsx("span",{className:`badge ${F==="overachieving"?"bg-green-50 text-green-700":F==="onTrack"?"bg-blue-50 text-blue-700":"bg-rose-50 text-rose-700"}`,children:N(F)})]}),E.jsx("div",{className:"grid grid-cols-7 gap-y-1 gap-x-[2px]",children:xe.map(ue=>{const je=`${de} grid place-items-center rounded border text-xs select-none`;let Ne={},nt="";ue.kind==="star"?(nt="★",Ne={borderColor:"rgba(16,185,129,.45)",background:"rgba(16,185,129,.12)",color:"rgba(16,185,129,1)"}):ue.kind==="dot"?(nt="•",Ne={borderColor:"rgba(99,102,241,.45)",background:"rgba(99,102,241,.12)",color:"rgba(99,102,241,1)"}):ue.kind==="miss"?(nt="×",Ne={borderColor:"rgba(239,68,68,.35)",background:"rgba(239,68,68,.08)",color:"rgba(239,68,68,1)"}):ue.kind==="future"?Ne={borderColor:"rgba(148,163,184,.15)",background:"rgba(148,163,184,.06)",color:"rgba(148,163,184,.4)"}:Ne={borderColor:"rgba(0,0,0,.05)",background:"rgba(0,0,0,.02)"};const St=new Date;return St.setHours(0,0,0,0),ue.ms===+St&&(Ne={...Ne,borderColor:"rgba(59,130,246,.7)",background:"rgba(59,130,246,.12)"}),E.jsx("div",{className:je,style:Ne,title:ue.label?`Day ${ue.label}`:"",children:nt},ue.ms)})}),E.jsxs("div",{className:"flex flex-col gap-1 text-sm text-text/70 mt-3",children:[E.jsxs("span",{children:[N("metTargetOn")," ",E.jsx("b",{children:X})," / ",Math.max(0,D)," ",N("days")]}),E.jsxs("span",{className:"opacity-90 ml-",children:["⭐ ",N("exceeded")," • ",N("partial")," × ",N("missed")]})]})]})}const E0=1440*60*1e3,WD=["S","M","T","W","T","F","S"],JD=["أ","إث","ث","أر","خ","ج","س"];function T0(r){const e=r instanceof Date?new Date(r):new Date(r||Date.now());return e.setHours(0,0,0,0),+e}function S0(r){const e=new Date(r);return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`}function ZD({def:r}){const{lang:e,t:n}=an(),s=T0(r.startMs||Date.now()),o=s+30*E0,u=U.useMemo(()=>{const m=new Map;return r.shares.filter(r.filter).forEach(y=>{const T=y.finishedAt?.toDate?.()||y.createdAt?.toDate?.();if(!T)return;const A=T0(T);if(A<s||A>=o)return;const R=S0(A),N=r.amountOfShare(y);m.set(R,(m.get(R)||0)+N)}),m},[r,s,o]),f=e==="ar"?JD:WD,p=[];for(let m=0;m<35;m++){const y=s+m*E0;if(m>=30){p.push({kind:"blank",label:"",pct:0});continue}const T=S0(y),A=u.get(T)||0,R=r.toSeconds?r.toSeconds(r.dailyTargetRaw):r.dailyTargetRaw,N=R?A/R:0,B=f[new Date(y).getDay()];p.push({kind:"day",label:B,pct:N,ms:y})}return E.jsxs("div",{className:"card p-6",children:[E.jsxs("div",{className:"flex items-center justify-between mb-3",children:[E.jsxs("div",{className:"font-semibold",children:[r.title," — ",n("30days")," "]}),E.jsxs("span",{className:"text-xs text-text/60",children:[n("firstRowNote")," "]})]}),E.jsx("div",{className:"grid grid-cols-7 gap-y-1 gap-x-[2px]",children:p.map((m,y)=>{if(m.kind==="blank")return E.jsx("div",{className:"h-10 w-10 rounded border bg-gray-100"},y);const T=`rgba(99,102,241,${.12+.55*m.pct})`,A=`rgba(99,102,241,${.4+.4*m.pct})`;let R={background:T,borderColor:A};const N=new Date;return N.setHours(0,0,0,0),m.ms===+N&&(R={...R,borderColor:"rgba(59,130,246,.7)",background:"rgba(59,130,246,.12)"}),E.jsxs("div",{className:"h-10 w-10 grid place-items-center rounded border text-[10px] text-center leading-tight",style:R,title:`${n("day")} ${y+1}: ${Math.round(m.pct*100)}%`,children:[E.jsx("div",{className:"font-bold",children:m.label}),E.jsxs("div",{className:"opacity-70",children:[Math.round(m.pct*100),"%"]})]},y)})})]})}function eO({chosen:r,params:e,shares:n,startBy:s,fallbackStartMs:o}){const{t:u}=an(),f=[],p=(m,y)=>f.push({key:m,...y});if(r.includes("digital_free")&&p("digital_free",{key:"digital_free",title:u("digitalFree"),monthlyUnit:u("h"),dailyTargetRaw:e?.digital_free?.minutesPerDay??(e?.digital_free?.hoursPerDay?e.digital_free.hoursPerDay*60:60),toSeconds:m=>m*60,amountOfShare:m=>Math.max(0,m.actualSec||m.plannedSec||0),filter:m=>m.type==="achieved"&&(m.goalId||"").startsWith("digital-free"),startMs:s?.digital_free??o}),r.includes("reading")){const m=e?.reading?.minutesPerDay??e?.reading?.dailyMin??10;p("reading",{key:"reading",title:u("reading"),monthlyUnit:"min",dailyTargetRaw:m,toSeconds:y=>y*60,amountOfShare:y=>Math.max(0,y.actualSec||y.plannedSec||0),filter:y=>y.type==="achieved"&&(y.goalId==="reading"||y.journeyKey==="reading"),startMs:s?.reading??o})}return r.includes("journaling")&&p("journaling",{key:"journaling",title:u("journaling"),monthlyUnit:u("days"),dailyTargetRaw:1,toSeconds:null,amountOfShare:()=>1,filter:m=>m.type==="achieved"&&m.goalId==="journaling",startMs:s?.journaling??o}),r.includes("drink_water")&&p("drink_water",{key:"drink_water",title:u("drinkWater"),monthlyUnit:"ml",dailyTargetRaw:e?.drink_water?.dailyTargetMl??2e3,toSeconds:null,amountOfShare:m=>Math.max(0,m.waterMl||0),filter:m=>m.type==="achieved"&&m.goalId==="drink-water",startMs:s?.drink_water??o}),f.map(m=>({...m,shares:n}))}function A0(){const{user:r}=Xn(),e=ui(),{uid:n}=qw(),s=n||r?.uid,o=!n||n===r?.uid,{t:u}=an(),[f,p]=U.useState(null);U.useEffect(()=>{if(!s)return;const F=rn(rt,"profiles",s);return pn(F,ie=>p(ie.data()||null))},[s]);const[m,y]=U.useState(null);U.useEffect(()=>{if(!s)return;const F=rn(rt,"users",s);return pn(F,ie=>y(ie.data()||null))},[s]);const[T,A]=U.useState([]);U.useEffect(()=>{if(!s)return;const F=ms(Kn(rt,"shares"),si("uid","==",s),Hh("createdAt","desc"));return pn(F,ie=>A(ie.docs.map(ee=>({id:ee.id,...ee.data()}))))},[s]);const[R,N]=U.useState(0),[B,$]=U.useState(0);U.useEffect(()=>{const F=new Map,ie=new Map,ee=[];return T.forEach(de=>{const Re=Kn(rt,"shares",de.id,"reactions"),ue=Kn(rt,"shares",de.id,"inspirations"),je=pn(Re,nt=>{F.set(de.id,nt.size),N([...F.values()].reduce((St,gn)=>St+gn,0))}),Ne=pn(ue,nt=>{ie.set(de.id,nt.size),$([...ie.values()].reduce((St,gn)=>St+gn,0))});ee.push(je,Ne)}),()=>ee.forEach(de=>de&&de())},[T]),U.useEffect(()=>{if(!r||!o)return;const F=m?.journeys,ie=F?.chosen||[],ee=F?.startedAtMs;ie.length>0&&!ee&&oi(rn(rt,"users",r.uid),{journeys:{startedAtMs:Date.now()},updatedAt:xn()},{merge:!0})},[o,r?.uid,m?.journeys?.chosen,m?.journeys?.startedAtMs]);const L=U.useMemo(()=>{if(!T.length)return null;let F=1/0;for(const ie of T){const ee=ie.finishedAt?.toDate?ie.finishedAt.toDate():ie.createdAt?.toDate?ie.createdAt.toDate():null;if(!ee)continue;const de=new Date(ee.getFullYear(),ee.getMonth(),ee.getDate()).getTime();de<F&&(F=de)}return F===1/0?null:F},[T]),se=U.useMemo(()=>{const F=new Set;for(const ie of T){ie.journeyKey&&F.add(ie.journeyKey);const ee=ie.goalId||"";ee.startsWith("digital-free")&&F.add("digital_free"),ee==="drink-water"&&F.add("drink_water"),ee==="journaling"&&F.add("journaling"),ee==="reading"&&F.add("reading")}return Array.from(F)},[T]),ae=U.useMemo(()=>{const F=m?.journeys?.chosen;return F?o||Array.isArray(F)&&F.length>0?F:se:[]},[o,m?.journeys?.chosen,se]),re=m?.journeys?.params||{},fe=o&&(!m||!m.journeys||!Array.isArray(m.journeys.chosen)||m.journeys.chosen.length===0),le=eO({chosen:ae,params:re,shares:T,startBy:m?.journeys?.startBy||{},fallbackStartMs:L||Date.now()}),pe=le.slice(0,2),M=pe.length===2;if(!r)return E.jsx(ia,{children:E.jsxs(Nt,{className:"text-center",children:[E.jsx("h2",{className:"text-2xl font-semibold mb-2",children:u("profile")}),E.jsx("p",{className:"text-text/70 mb-4",children:u("signInPrompt")}),E.jsx(Fe,{variant:"primary",onClick:()=>e("/sign-in"),children:u("signIn")})]})});const x=o?(r?.email||"").split("@")[0]:"",[w,O]=U.useState(o&&(r?.displayName||x)||"User");U.useEffect(()=>{if(o)return;const F=m?.displayName||f?.displayName||T[0]?.authorName||"User";O(F)},[o,m?.displayName,f?.displayName,T]);const[V,k]=U.useState(!1),[I,Ae]=U.useState(w),[Ee,G]=U.useState(!1),[X,ce]=U.useState(""),xe=(w||"U").trim().charAt(0).toUpperCase();async function D(){if(!o)return;const F=(I||"").trim();if(!F){ce("Please enter a name.");return}if(F===w){k(!1),ce("");return}G(!0);try{await oi(rn(rt,"profiles",r.uid),{displayName:F},{merge:!0}),await RT(r,{displayName:F}),O(F),k(!1),ce("")}catch(ie){console.error("Failed to update name:",ie),ce("Could not save name. Try again.")}finally{G(!1)}}return E.jsxs(ia,{children:[E.jsx(Nt,{children:E.jsxs("div",{className:"flex items-start gap-4",children:[E.jsx("div",{className:"rounded-full bg-accent/10 text-accent border border-ring h-16 w-16 grid place-items-center text-2xl font-semibold",children:xe}),E.jsxs("div",{className:"flex-1 grid gap-3",children:[V?E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("input",{className:"text flex-1",value:I,maxLength:40,onChange:F=>Ae(F.target.value),autoFocus:!0}),o&&E.jsx("button",{className:"p-2 rounded-lg hover:bg-muted/50",onClick:D,disabled:Ee,children:E.jsx(YD,{className:"h-5 w-5"})}),E.jsx("button",{className:"p-2 rounded-lg hover:bg-muted/50",onClick:()=>{k(!1),Ae(w),ce("")},children:E.jsx(KD,{className:"h-5 w-5"})})]}):E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("div",{className:"text-2xl font-semibold break-all",children:w}),o&&E.jsx("button",{className:"p-2 rounded-lg hover:bg-muted/50",onClick:()=>{Ae(w),k(!0)},children:E.jsx(QD,{className:"h-5 w-5 text-text/70"})})]}),X&&E.jsx("p",{className:"text-sm text-red-600",children:X}),E.jsxs("div",{className:"grid grid-cols-3 gap-3 mt-2",children:[E.jsx(Mm,{label:u("reacts"),value:R}),E.jsx(Mm,{label:u("inspiring"),value:B}),E.jsx(Mm,{label:u("journeys"),value:Array.isArray(ae)?ae.length:0})]})]})]})}),o&&fe&&E.jsx(Nt,{children:E.jsxs("div",{className:"flex items-center justify-between gap-4",children:[E.jsxs("div",{children:[E.jsx("h3",{className:"text-lg font-semibold",children:u("noJourneyYet")}),E.jsx("p",{className:"text-sm text-text/70",children:u("ctaDescription")})]}),E.jsx(Fe,{variant:"primary",className:"shrink-0",onClick:()=>e("/journey"),children:u("setUpJourney")})]})}),E.jsxs("div",{className:"mb-4",children:[E.jsxs("div",{className:"flex items-center justify-between mb-2",children:[E.jsx("h2",{className:"text-lg font-semibold text-[#2B1B47]",children:u("yourJourneys")}),o&&E.jsx("button",{onClick:()=>e("/journey"),className:"text-sm text-[#7C6AE6] hover:underline",children:u("editJourneys")})]}),ae.length>0?E.jsx("div",{className:M?"grid sm:grid-cols-2 gap-4":"grid gap-4",children:pe.map(({key:F,...ie})=>E.jsx(XD,{...ie},F))}):E.jsx("p",{className:"text-sm text-text/60 italic",children:u("noJourneysYet")})]}),ae.length>0&&E.jsx("div",{className:"grid gap-4",children:le.map(F=>E.jsx(ZD,{def:F},F.key))})]})}const tO=(r="U")=>(String(r).trim()[0]||"U").toUpperCase(),nO=(r="")=>String(r).split("@")[0]||"User";function pg(r){return r?.toDate?r.toDate():r instanceof Date?r:new Date(r||Date.now())}function iO(r){const e=pg(r),n=Date.now()-e.getTime(),s=6e4,o=60*s,u=24*o,f=7*u;return n<o?`${Math.max(1,Math.floor(n/s))}m`:n<u?`${Math.floor(n/o)}h`:n<f?`${Math.floor(n/u)}d`:`${Math.floor(n/f)}w`}function rO(r){const e=pg(r);return isNaN(e.getTime())?"":e.toLocaleString([],{weekday:"short",month:"short",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}function AA({ts:r}){const e=pg(r);return E.jsxs("span",{className:"relative inline-block group",children:[E.jsx("time",{className:"text-xs text-text/60 cursor-default",dateTime:e.toISOString(),children:iO(r)}),E.jsx("span",{className:`
          pointer-events-none absolute bottom-full left-1/2 -translate-x-1/2
          mb-1 whitespace-nowrap rounded bg-black/80 px-2 py-1
          text-[10px] leading-tight text-white opacity-0
          transition-opacity duration-150
          group-hover:opacity-100
        `,children:rO(r)})]})}function bA({messageId:r,uid:e,className:n=""}){const[s,o]=U.useState(0),[u,f]=U.useState(!1);U.useEffect(()=>{if(!r)return()=>{};const y=Kn(rt,"qaMessages",r,"reactions"),T=pn(y,A=>{let R=0,N=!1;A.forEach(B=>{R+=1,e&&B.id===e&&(N=!0)}),o(R),f(N)});return()=>T()},[r,e]);async function p(){if(!e||!r)return;const y=rn(rt,"qaMessages",r,"reactions",e);u?await PD(y):await oi(y,{at:xn()})}const m="px-2.5 py-1 rounded-full border text-sm transition "+(u?"bg-rose-50 text-rose-700 border-rose-200":"hover:bg-muted/50");return E.jsxs("button",{onClick:p,className:`${m} ${n}`,"aria-label":"React",title:e?"React":"Sign in to react",disabled:!e,children:["❤️ ",s]})}function wA({src:r,name:e,className:n=""}){return r?E.jsx("img",{src:r,alt:e||"User",className:`h-8 w-8 rounded-full object-cover border border-ring ${n}`}):E.jsx("div",{className:`h-8 w-8 rounded-full grid place-items-center border border-ring bg-accent/10 text-accent text-sm font-semibold ${n}`,children:tO(e)})}function sO({text:r,alignRight:e=!1,clampLines:n=3}){const[s,o]=U.useState(!1),u=(r||"").length>220,f=s?{}:{display:"-webkit-box",WebkitLineClamp:String(n),WebkitBoxOrient:"vertical",overflow:"hidden"};return E.jsxs("div",{className:e?"text-right":"",children:[E.jsx("div",{className:"text-sm leading-relaxed whitespace-pre-wrap",style:f,children:r}),u&&E.jsx("button",{onClick:()=>o(p=>!p),className:"text-xs underline mt-1",children:s?"See less":"See more"})]})}const RA="digital_free",Jr="drink_water",xA="journaling",IA="reading",aO=[RA,Jr,xA,IA],CA={[RA]:"digital-free-1h",[Jr]:"drink-water",[xA]:"journaling",[IA]:"reading"},b0=(r,e,n)=>Math.max(e,Math.min(n,r)),w0=r=>String(r).padStart(2,"0"),Fh=r=>`${r.getFullYear()}-${w0(r.getMonth()+1)}-${w0(r.getDate())}`;function fp(r){return CA[r]||r}function hh(r,e,n){return`${r}_${fp(e)}_${Fh(n)}`}function oO(r,e){const n=Math.max(0,parseInt(r||"0",10)),s=Math.max(0,parseInt(e||"0",10));return n*3600+s*60}function lO(){const{t:r}=an(),{user:e}=Xn(),[n,s]=U.useState([]),[o,u]=U.useState({}),[f,p]=U.useState(!0),[m,y]=U.useState(null);return U.useEffect(()=>{if(!e?.uid)return;const T=rn(rt,"users",e.uid),A=pn(T,R=>{if(!R.exists()){s([]),u({}),p(!1);return}const N=R.data(),B=N.journeys&&typeof N.journeys=="object"?N.journeys:{};s(Array.isArray(B.chosen)?B.chosen:[]),u(B.params&&typeof B.params=="object"?B.params:{}),p(!1)});return()=>A()},[e?.uid]),e?f?E.jsx(ia,{children:E.jsxs(Nt,{children:[E.jsx("h3",{className:"text-xl font-semibold mb-2",children:r("vote")}),E.jsx("p",{className:"text-text/70",children:"Loading…"})]})}):m?E.jsx(ia,{className:"space-y-4",children:E.jsx(cO,{user:e,journeyKey:m,params:o?.[m]||{},onBack:()=>y(null)})}):E.jsx(ia,{children:E.jsxs(Nt,{children:[E.jsx("h2",{className:"text-xl font-semibold mb-4",children:r("journeys")}),E.jsx("div",{className:"grid sm:grid-cols-2 gap-4",children:aO.map(T=>E.jsx(uO,{journeyKey:T,active:n.includes(T),onClick:()=>y(T)},T))})]})}):E.jsx(ia,{children:E.jsxs(Nt,{children:[E.jsx("h3",{className:"text-xl font-semibold mb-2",children:r("vote")}),E.jsx("p",{className:"text-text/70",children:r("pleaseSignIn")})]})})}function uO({journeyKey:r,active:e,onClick:n}){const{t:s}=an(),[o,u]=U.useState(0),[f,p]=U.useState(0),m=Fh(new Date),y=ui();return U.useEffect(()=>{const T=ms(Kn(rt,"users"),si("journeys.chosen","array-contains",r));return pn(T,A=>u(A.size))},[r]),U.useEffect(()=>{const T=ms(Kn(rt,"shares"),si("goalId","==",CA[r]),si("dayKey","==",m),si("source","==","vote"));return pn(T,A=>p(A.size))},[r,m]),E.jsxs(Nt,{onClick:e?n:void 0,className:`transition ${e?"hover:shadow-md cursor-pointer border-primary bg-primary/5":"hover:shadow-md cursor-pointer"}`,children:[E.jsx("h3",{className:"font-semibold mb-1",children:s(r===Jr?"drinkWater":r)}),E.jsx("p",{className:"text-sm text-text/70 mb-2",children:s(r+"Quote")}),E.jsxs("div",{className:"flex items-center justify-between text-sm mt-2",children:[E.jsxs("div",{className:"flex flex-col",children:[E.jsxs("span",{children:[o," ",s("subscribers")]}),E.jsxs("span",{children:[f," ",s("votersToday")]})]}),E.jsx("div",{children:e?E.jsx(Fe,{variant:"ghost",size:"sm",disabled:!0,children:s("joined")}):E.jsx(Fe,{variant:"primary",size:"sm",onClick:T=>{T.stopPropagation(),y(`/journeys?join=${r}`)},children:s("join")})})]})]})}function cO({user:r,journeyKey:e,params:n,onBack:s}){const{t:o}=an(),[u,f]=U.useState("today"),[p,m]=U.useState(null),[y,T]=U.useState(!1),[A,R]=U.useState(null),[N,B]=U.useState("00"),[$,L]=U.useState("10"),[se,ae]=U.useState("600"),[re,fe]=U.useState(!1),[le,pe]=U.useState(!1),[M,x]=U.useState(!1),[w,O]=U.useState(""),k=(()=>{const X=new Date;return u==="yesterday"&&X.setDate(X.getDate()-1),X.setHours(0,0,0,0),X})();U.useEffect(()=>{if(!r?.uid||!e)return;const X=rn(rt,"shares",hh(r.uid,e,k)),ce=pn(X,xe=>{if(xe.exists()){const D=xe.data();if(m(D),R(D.done??null),e===Jr&&D.waterMl)ae(String(D.waterMl));else if(D.actualSec){const F=Math.floor(D.actualSec/3600),ie=Math.floor(D.actualSec%3600/60);B(String(F).padStart(2,"0")),L(String(ie).padStart(2,"0"))}pe(!!D.reflectionAdded)}else m(null),R(null),pe(!1)});return()=>ce()},[r?.uid,e,u]);async function I(X=!1){if(r?.uid){fe(!0);try{const ce=rn(rt,"shares",hh(r.uid,e,k)),xe=await pA(ce);let D=xe.exists()?xe.data():{},F=0,ie=0;A&&(e===Jr?ie=parseInt(se||"0",10):F=oO(N,$));const ee=(D.actualSec||0)+F,de=(D.waterMl||0)+ie;let Re="no";if(A)if(e===Jr)Re=de>=(n?.dailyTargetMl||2e3)?"exceed":"done";else{const ue=e==="reading"?n?.minutesPerDay??n?.dailyMin??10:e==="journaling"?n?.minutesPerDay??10:e==="digital_free"?n?.minutesPerDay??60:0;Re=ee>=ue*60?"exceed":"done"}await oi(ce,{uid:r.uid,journeyKey:e,goalId:fp(e),dayKey:Fh(k),createdAt:D.createdAt||xn(),updatedAt:xn(),source:"vote",actualSec:ee||null,waterMl:de||null,done:!!A,finalized:X?!0:D.finalized||!1,voteClass:Re},{merge:!0}),m({...D,actualSec:ee,waterMl:de,done:!!A,finalized:X?!0:D.finalized||!1,voteClass:Re}),T(!1)}catch(ce){console.error("saveVote error",ce)}finally{fe(!1)}}}async function Ae(){if(!r?.uid)return;const X=rn(rt,"shares",hh(r.uid,e,k));try{await oi(X,{reflection:w.trim(),reflectionAdded:!0,updatedAt:xn()},{merge:!0}),x(!1),pe(!0),O("")}catch(ce){console.error("saveReflection error",ce)}}const Ee=!!p?.finalized,G=!Ee&&!y;return E.jsxs("div",{className:"space-y-4",children:[E.jsxs(Nt,{children:[E.jsxs("div",{className:"flex items-center justify-between mb-3 gap-3 flex-wrap",children:[E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx(Fe,{variant:"ghost",size:"sm",onClick:s,children:o("back")}),E.jsx("h3",{className:"text-xl font-semibold",children:o(e)})]}),E.jsxs("div",{className:"flex items-center gap-2 flex-1 justify-end",children:[E.jsxs("select",{className:"text !w-28",value:u,onChange:X=>f(X.target.value),children:[E.jsx("option",{value:"today",children:o("today")}),E.jsx("option",{value:"yesterday",children:o("yesterday")})]}),E.jsx("span",{className:`badge ${Ee?"bg-slate-100 text-slate-700":"bg-amber-50 text-amber-700"}`,style:{minWidth:70,textAlign:"center"},children:o(Ee?"finalized":"draft")}),G&&E.jsx(Fe,{variant:"ghost",size:"sm",onClick:()=>T(!0),children:o("vote")}),y&&E.jsx(Fe,{variant:"ghost",size:"sm",onClick:()=>T(!1),children:o("close")})]})]}),y&&E.jsxs("div",{className:"grid gap-4 mb-4",children:[E.jsxs("fieldset",{className:"space-y-2",children:[E.jsx("legend",{className:"field",children:o("haveYouDone")}),E.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[E.jsxs("label",{className:"inline-flex items-center gap-2",children:[E.jsx("input",{type:"radio",name:"done",checked:A===!0,onChange:()=>R(!0)}),E.jsx("span",{children:o("yes")})]}),E.jsxs("label",{className:"inline-flex items-center gap-2",children:[E.jsx("input",{type:"radio",name:"done",checked:A===!1,onChange:()=>R(!1)}),E.jsx("span",{children:o("no")})]})]})]}),A===!0&&e===Jr&&E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("label",{className:"field whitespace-nowrap",children:o("ml")}),E.jsx("input",{className:"text !w-24",type:"number",min:"0",inputMode:"numeric",value:se,onChange:X=>ae((X.target.value||"0").replace(/[^\d]/g,""))})]}),A===!0&&e!==Jr&&E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("label",{className:"field whitespace-nowrap",children:o("duration")}),E.jsx("input",{className:"text !w-16 text-center",type:"number",min:"0",value:N,onChange:X=>B(String(b0(parseInt(X.target.value||"0",10),0,23)).padStart(2,"0"))}),E.jsx("span",{children:":"}),E.jsx("input",{className:"text !w-16 text-center",type:"number",min:"0",value:$,onChange:X=>L(String(b0(parseInt(X.target.value||"0",10),0,59)).padStart(2,"0"))})]})]}),y&&E.jsxs("div",{className:"flex justify-end gap-3",children:[E.jsx(Fe,{variant:"ghost",onClick:()=>I(!1),disabled:re,children:o("toBeContinued")}),E.jsx(Fe,{variant:"primary",onClick:()=>I(!0),disabled:re||!A,children:o(re?"saving":"done")})]}),E.jsx(hO,{goalId:fp(e),dayKey:Fh(k),myShareId:hh(r.uid,e,k)})]}),!le&&!M&&E.jsxs(Fe,{variant:"outline",onClick:()=>x(!0),children:["+ ",o("reflection")]}),M&&E.jsxs(Nt,{className:"p-4",children:[E.jsx("textarea",{className:"text w-full mb-3",rows:3,placeholder:o("reflectionPlaceholder"),value:w,onChange:X=>O(X.target.value)}),E.jsxs("div",{className:"flex justify-end gap-2",children:[E.jsx(Fe,{variant:"ghost",onClick:()=>x(!1),children:o("cancel")}),E.jsx(Fe,{variant:"primary",onClick:Ae,disabled:!w.trim(),children:o("share")})]})]}),E.jsx(fO,{journeyKey:e,currentUser:r})]})}function hO({goalId:r,dayKey:e,myShareId:n}){const{t:s}=an(),[o,u]=U.useState({exceed:0,done:0,no:0}),[f,p]=U.useState(null),[m,y]=U.useState(null);U.useEffect(()=>{const R=ms(Kn(rt,"shares"),si("goalId","==",r),si("dayKey","==",e),si("source","==","vote")),N=pn(R,B=>{let $=0,L=0,se=0,ae=null,re=0,fe=0;if(B.forEach(le=>{const pe=le.data(),M=pe.voteClass||(pe.status==="skipped"?"no":"done");M==="exceed"?$++:M==="done"?L++:se++,le.id===n&&(ae=M),pe.uid===n.split("_")[0]&&(pe.waterMl&&(fe+=pe.waterMl),pe.actualSec&&(re+=pe.actualSec))}),u({exceed:$,done:L,no:se}),p(ae),fe>0)y(fe>=1e3?`${(fe/1e3).toFixed(1)} L`:`${fe} ml`);else if(re>0){const le=Math.round(re/60);if(le<60)y(`${le} min`);else{const pe=Math.floor(le/60),M=le%60;y(`${pe}h${M>0?` ${M}m`:""}`)}}else y(null)});return()=>N()},[r,e,n]);const T=Math.max(1,o.exceed,o.done,o.no),A=({label:R,n:N,tone:B,selected:$})=>E.jsxs("div",{className:"flex items-center gap-3 py-1",children:[E.jsx("span",{className:`inline-block h-2 w-2 rounded-full ${B.dot}`}),E.jsx("span",{className:"font-medium",children:R}),$&&m&&E.jsx("span",{className:"badge bg-slate-800 text-white",children:m}),E.jsx("div",{className:"flex-1 rounded bg-black/5 overflow-hidden",style:{height:6},children:E.jsx("div",{className:`${B.bar}`,style:{height:"100%",width:`${Math.max(6,N/T*100)}%`}})}),E.jsx("span",{className:"text-xs text-text/60 w-6 text-right",children:N})]});return E.jsxs("div",{className:"space-y-2",children:[E.jsx(A,{label:s("exceeded"),n:o.exceed,tone:{dot:"bg-green-600",bar:"bg-green-500/80"},selected:f==="exceed"}),E.jsx(A,{label:s("done"),n:o.done,tone:{dot:"bg-blue-600",bar:"bg-blue-500/80"},selected:f==="done"}),E.jsx(A,{label:s("no"),n:o.no,tone:{dot:"bg-rose-600",bar:"bg-rose-500/80"},selected:f==="no"})]})}function fO({journeyKey:r,currentUser:e}){const{t:n}=an(),[s,o]=U.useState([]);return U.useEffect(()=>{const u=ms(Kn(rt,"shares"),si("journeyKey","==",r),si("reflectionAdded","==",!0)),f=pn(u,p=>{const m=[];p.forEach(y=>m.push({id:y.id,...y.data()})),m.sort((y,T)=>(y.createdAt?.toMillis?.()||0)-(T.createdAt?.toMillis?.()||0)),o(m)});return()=>f()},[r]),E.jsxs(Nt,{children:[E.jsx("h3",{className:"text-lg font-semibold mb-4",children:n("communityContributions")}),s.length===0?E.jsx("p",{className:"text-sm text-text/60",children:n("noContributions")}):E.jsx("div",{className:"space-y-4",children:s.map(u=>E.jsxs("div",{className:"flex gap-3 items-start",children:[E.jsx(wA,{src:u.authorPhotoURL||u.photoURL,name:u.authorName}),E.jsxs("div",{className:"flex-1",children:[E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("span",{className:"font-medium text-sm",children:u.authorName}),E.jsx(AA,{ts:u.createdAt})]}),E.jsx(sO,{text:u.reflection}),E.jsx("div",{className:"mt-2",children:E.jsx(bA,{messageId:u.id,uid:e?.uid})})]})]},u.id))})]})}const NA=U.createContext(null);function dO({children:r}){const{user:e}=Xn(),[n,s]=U.useState({leftSec:900,lockedUntil:null});U.useEffect(()=>{const p="communityLock:"+new Date().toISOString().slice(0,10),m=localStorage.getItem(p);m&&s(JSON.parse(m))},[]),U.useEffect(()=>{const p="communityLock:"+new Date().toISOString().slice(0,10);localStorage.setItem(p,JSON.stringify(n))},[n]);const[o,u]=U.useState([]);U.useEffect(()=>{const p=ms(Kn(rt,"shares"),Hh("createdAt","desc")),m=pn(p,y=>{u(y.docs.map(T=>({id:T.id,...T.data()})))});return()=>m()},[]);const f=U.useMemo(()=>({communityLock:n,setCommunityLock:s,feed:o}),[n,o]);return E.jsx(NA.Provider,{value:f,children:r})}const mO=()=>U.useContext(NA),Vm=[{id:"q1"},{id:"q2"},{id:"q3"}];function pO(){const[r,e]=U.useState([]),[n,s]=U.useState([]),[o,u]=U.useState("all"),[f,p]=U.useState(""),[m,y]=U.useState(""),[T,A]=U.useState(!1),{user:R}=Xn(),{t:N,lang:B}=an(),$=ui(),{communityLock:L,setCommunityLock:se}=mO(),ae=U.useRef(null),re=U.useRef(null),fe=3600,[le,pe]=U.useState(fe);U.useEffect(()=>{const w=typeof L.leftSec=="number"?L.leftSec:null;L.lockedUntil&&Date.now()<L.lockedUntil?pe(0):w==null||w<=0||w===900?pe(fe):pe(Math.min(fe,w))},[L]),U.useEffect(()=>{if(L.lockedUntil&&Date.now()<L.lockedUntil){pe(0);return}if(le<=0)return;const w=setInterval(()=>{pe(O=>Math.max(0,O-1))},1e3);return()=>clearInterval(w)},[L.lockedUntil,le]);const M=L.lockedUntil&&Date.now()<L.lockedUntil||le<=0;U.useEffect(()=>{let w;o==="all"?w=ms(Kn(rt,"qaMessages"),Hh("createdAt","asc")):w=ms(Kn(rt,"qaMessages"),si("questionId","==",o),Hh("createdAt","asc"));const O=pn(w,V=>s(V.docs.map(k=>({id:k.id,...k.data()}))));return()=>O()},[o]),U.useEffect(()=>{re.current?.scrollIntoView({behavior:"smooth"})},[n.length]);async function x(){const w=(m||"").trim();if(!R){$("/auth");return}if(!w)return;const O=Vm.find(V=>V.id===f);A(!0);try{await kD(Kn(rt,"qaMessages"),{questionId:f,questionTitle:N(O?.id),type:"answer",text:w,uid:R.uid,authorName:R.displayName||nO(R.email||""),authorPhotoURL:R.photoURL||null,createdAt:xn()}),y(""),ae.current&&(ae.current.style.height="auto"),o!=="all"&&o!==f&&u(f)}finally{A(!1)}}return E.jsxs(ia,{children:[E.jsx("div",{className:"sticky top-[56px] z-20 bg-white border-b border-gray-200 shadow-sm w-full",children:E.jsx("div",{className:"w-full px-4",children:E.jsxs("div",{className:"flex items-center gap-4 py-3",children:[E.jsx(FD,{value:Math.max(0,Math.min(fe,le)),max:fe}),E.jsxs("div",{className:"badge whitespace-nowrap",children:[Math.floor(le/3600).toString().padStart(2,"0"),":",Math.floor(le%3600/60).toString().padStart(2,"0"),":",(le%60).toString().padStart(2,"0")," ",N("left")]})]})})}),E.jsx("div",{className:"sticky top-[104px] z-20 bg-white border-b border-gray-100 w-full",children:E.jsxs("div",{className:"max-w-2xl mx-auto px-4 flex gap-2 pb-3 pt-2 overflow-x-auto whitespace-nowrap",children:[E.jsx(Fe,{className:`badge ${o==="all"?"bg-slate-900 text-white":""}`,onClick:()=>u("all"),children:N("all")}),Vm.map(w=>E.jsx(Fe,{className:`badge ${o===w.id?"bg-slate-900 text-white":""}`,onClick:()=>{u(w.id),p(w.id)},children:N(w.id)},w.id))]})}),E.jsx("div",{className:"overflow-y-auto pr-1 grow min-h-0 pb-2 pt-[120px]",children:E.jsxs("div",{className:"grid gap-2 sm:gap-3",children:[n.map(w=>{const O=w.uid&&R&&w.uid===R.uid,V=r.includes(w.id),k=w.text&&w.text.length>120,I=O?"bg-gray-50":"bg-white";return E.jsx("div",{className:`flex ${O?"justify-end":"justify-start"}`,children:E.jsxs(Nt,{className:`p-3 sm:p-4 w-[90%] ${I}`,children:[E.jsxs("div",{className:"flex flex-col items-start",children:[E.jsxs("div",{className:"flex items-center gap-2 justify-start",children:[E.jsx(wA,{src:w.authorPhotoURL,name:w.authorName||"User"}),E.jsx("a",{href:`/profile/${w.uid||""}`,className:"font-semibold underline decoration-muted/60 hover:decoration-current",children:w.authorName||"User"})]}),E.jsx("span",{className:"mt-0.5 text-xs text-text/60 text-left block",children:w.questionTitle||N("question")})]}),E.jsx("div",{className:"my-2 border-t border-ring/40"}),E.jsxs("div",{className:"relative my-2",style:{textAlign:w.text&&/[\u0600-\u06FF]/.test(w.text)?"right":"left",direction:w.text&&/[\u0600-\u06FF]/.test(w.text)?"rtl":"ltr"},children:[E.jsx("div",{className:V?"":"line-clamp-2",children:w.text}),!V&&k&&E.jsx("div",{className:"absolute bottom-0 left-0 w-full flex justify-center bg-gradient-to-t from-white to-transparent",children:E.jsx("div",{className:"rounded bg-blue-50 px-2 py-1",children:E.jsx("span",{onClick:()=>e([...r,w.id]),className:"text-sm text-blue-600 hover:underline cursor-pointer",children:N("seeMore")||"see more"})})}),V&&k&&E.jsx("div",{className:`flex ${O?"justify-end":"justify-start"}`,children:E.jsx("div",{className:"rounded bg-blue-50 px-2 py-1 mt-1",children:E.jsx("span",{onClick:()=>e(r.filter(Ee=>Ee!==w.id)),className:"text-sm text-blue-600 hover:underline cursor-pointer",children:N("seeLess")||"see less"})})})]}),E.jsxs("div",{className:`mt-3 flex items-center gap-3 text-xs text-text/60 ${O?"justify-end":""}`,children:[E.jsx(AA,{ts:w.createdAt}),E.jsx(bA,{messageId:w.id,uid:R?.uid})]})]})},w.id)}),E.jsx("div",{ref:re})]})}),E.jsx("div",{className:"fixed bottom-0 left-1/2 transform -translate-x-1/2 w-full max-w-3xl z-40 bg-white border-t border-gray-200 px-2 sm:px-0",children:E.jsxs(Nt,{className:"p-1 sm:p-2 m-0 shadow-none w-full rounded-md",children:[E.jsxs("div",{className:"flex flex-row items-center gap-2 mb-1 flex-nowrap w-full overflow-hidden",children:[E.jsx("span",{className:"text-sm text-text/70 whitespace-nowrap",children:N("replyTo")}),E.jsxs("select",{className:"text min-w-[120px] max-w-[180px] truncate overflow-ellipsis whitespace-nowrap",id:"question-select",value:o==="all"?f:o,onChange:w=>p(w.target.value),disabled:o!=="all",children:[o==="all"&&E.jsx("option",{value:"",children:N("chooseQuestion")}),Vm.map(w=>E.jsx("option",{value:w.id,className:"truncate",children:N(w.id)},w.id))]})]}),E.jsxs("div",{className:"flex items-end gap-2 w-full",children:[E.jsx("textarea",{ref:ae,className:"text flex-1 resize-none overflow-hidden min-h-[40px] max-h-[120px] sm:min-h-[48px] sm:max-h-[160px] rounded-md border border-gray-300 p-2 placeholder:truncate placeholder:overflow-ellipsis placeholder:whitespace-nowrap",rows:1,placeholder:N(o==="all"&&!f?"selectQuestionPlaceholder":"writeAnswer"),value:m,onChange:w=>y(w.target.value),onInput:w=>{w.target.style.height="auto",w.target.style.height=w.target.scrollHeight+"px"},disabled:o==="all"&&!f}),E.jsx(Fe,{variant:"primary",className:"min-w-[48px] sm:min-w-[64px]",onClick:x,disabled:T||!m.trim()||o==="all"&&!f,children:N(T?"sending":"send")})]})]})}),M&&E.jsx("div",{className:"absolute inset-0 z-50 bg-white/90 backdrop-blur-sm grid place-items-center p-6",children:E.jsxs(Nt,{className:"max-w-md w-full p-6 text-center",children:[E.jsx("h3",{className:"text-2xl font-semibold mb-2",children:N("timeIsUp")}),E.jsx("p",{className:"text-text/70 mb-6",children:N("communityOpensTomorrow")}),E.jsx(Fe,{variant:"primary",className:"w-full",onClick:()=>$("/vote"),children:N("goBack")})]})})]})}function gO(){const{sendReset:r}=Xn(),[e,n]=U.useState(""),[s,o]=U.useState(!1),[u,f]=U.useState("");async function p(m){m.preventDefault();try{await r(e),o(!0)}catch(y){f(y.message)}}return E.jsx("div",{className:"min-h-screen grid place-items-center p-6",children:E.jsxs(Nt,{className:"w-full max-w-md p-6 space-y-3",children:[E.jsx("h1",{className:"text-2xl font-bold",children:"Reset password"}),E.jsxs("form",{onSubmit:p,className:"space-y-3",children:[E.jsx("label",{className:"field",children:"Email"}),E.jsx("input",{className:"text",type:"email",required:!0,value:e,onChange:m=>n(m.target.value)}),E.jsx(Fe,{variant:"primary",className:"w-full",children:"Send reset email"})]}),s&&E.jsx("p",{className:"text-green-700",children:"Check your inbox for the reset email."}),u&&E.jsx("p",{className:"text-red-600",children:u})]})})}function yO(){const[r]=g1(),e=ui(),n=r.get("oobCode"),[s,o]=U.useState(""),[u,f]=U.useState(""),[p,m]=U.useState(""),[y,T]=U.useState(""),[A,R]=U.useState(!1),[N,B]=U.useState(!0);U.useEffect(()=>{if(!n){T("Invalid reset link."),B(!1);return}iI(Ii,n).then(L=>{o(L),B(!1)}).catch(()=>{T("This reset link is invalid or expired."),B(!1)})},[n]);async function $(L){if(L.preventDefault(),T(""),u!==p){T("Passwords do not match.");return}try{await tI(Ii,n,u),R(!0),setTimeout(()=>e("/auth"),2e3)}catch(se){T(se.message)}}return N?E.jsx("div",{className:"min-h-screen grid place-items-center text-text/70",children:"Verifying reset link…"}):E.jsx("div",{className:"min-h-screen grid place-items-center p-6",children:E.jsxs(Nt,{className:"w-full max-w-md p-6 space-y-3",children:[E.jsx("h1",{className:"text-2xl font-bold",children:"Set new password"}),s&&E.jsxs("p",{className:"text-sm text-text/70",children:["For account: ",E.jsx("b",{children:s})]}),E.jsxs("form",{onSubmit:$,className:"space-y-3",children:[E.jsx("label",{className:"field",children:"New Password"}),E.jsx("input",{className:"text",type:"password",required:!0,value:u,onChange:L=>f(L.target.value)}),E.jsx("label",{className:"field",children:"Confirm Password"}),E.jsx("input",{className:"text",type:"password",required:!0,value:p,onChange:L=>m(L.target.value)}),E.jsx(Fe,{variant:"primary",className:"w-full",children:"Reset Password"})]}),A&&E.jsx("p",{className:"text-green-700",children:"Password has been reset! Redirecting…"}),y&&E.jsx("p",{className:"text-red-600",children:y})]})})}function _O(){const r=ui(),{completeEmailLinkSignIn:e}=Xn(),[n,s]=U.useState(""),[o,u]=U.useState(!0),[f,p]=U.useState(!1),[m,y]=U.useState("");U.useEffect(()=>{async function A(){try{if(!zD(window.location.href)){y("Invalid or expired link.");return}let R=null;try{R=window.localStorage.getItem("emailForSignIn")}catch{}if(R){await e(R),r("/vote",{replace:!0});return}p(!0)}catch(R){y(R?.message||String(R))}finally{u(!1)}}A()},[]);async function T(A){A.preventDefault(),y(""),u(!0);try{await e(n),r("/vote",{replace:!0})}catch(R){y(R?.message||String(R))}finally{u(!1)}}return o?E.jsx("div",{className:"p-6",children:"Completing sign-in…"}):m?E.jsx("div",{className:"p-6 text-red-600",children:m}):f?E.jsxs(Nt,{className:"p-6 max-w-md mx-auto",children:[E.jsx("h1",{className:"text-xl font-semibold mb-4",children:"Confirm your email"}),E.jsx("p",{className:"text-text/70 mb-4",children:"Enter the email that received the link."}),E.jsxs("form",{className:"grid gap-3",onSubmit:T,children:[E.jsx("input",{className:"text",type:"email",value:n,onChange:A=>s(A.target.value),required:!0}),E.jsx(Fe,{variant:"primary",disabled:o,children:o?"Signing in…":"Finish sign-in"}),m&&E.jsx("div",{className:"text-red-600 text-sm",children:m})]})]}):E.jsx("div",{className:"p-6",children:"Finishing up…"})}const qn="digital_free",Gn="drink_water",Hn="journaling",Fn="reading",ea=2,Pm=1440*60*1e3,km=30,R0={[Gn]:{why:"",approxTime:"08:00",dailyTargetMl:2e3,bottleMl:600},[qn]:{why:"",approxTime:"08:00",minutesPerDay:60,activitySuggestion:"Nothing"},[Hn]:{why:"",approxTime:"08:00",minutesPerDay:10,journalMethod:"Notebook and pen"},[Fn]:{why:"",approxTime:"08:00",minutesPerDay:10,bookName:""}};function vO(r=0){const e=Math.max(0,Math.round(r||0)),n=Math.floor(e/60),s=e%60,o=String(Math.min(n,23)).padStart(2,"0"),u=String(n>23?59:s).padStart(2,"0");return`${o}:${u}`}function EO(r){if(!r||typeof r!="string"||!r.includes(":"))return 0;const[e,n]=r.split(":"),s=parseInt(e,10),o=parseInt(n,10);return!Number.isFinite(s)||!Number.isFinite(o)?0:Math.max(0,s*60+o)}function TO(){const{user:r}=Xn(),e=ui(),n=gs(),o=new URLSearchParams(n.search).get("join"),{t:u}=an(),[f,p]=U.useState(!0),[m,y]=U.useState([]),[T,A]=U.useState(R0),[R,N]=U.useState({}),[B,$]=U.useState(!1),[L,se]=U.useState(null),[ae,re]=U.useState({});U.useEffect(()=>{r?.uid&&(async()=>{try{const I=rn(rt,"users",r.uid),Ae=await pA(I),G=(Ae.exists()?Ae.data():{}).journeys||{},X=Array.isArray(G.chosen)?G.chosen:[],ce=G.params||{},xe=G.startBy||{};y(X),A(D=>M(D,ce)),N(xe)}finally{p(!1)}})()},[r?.uid]),U.useEffect(()=>{!f&&o&&[qn,Gn,Hn,Fn].includes(o)&&x(o)},[f,o]);const fe=Date.now(),le=I=>{const Ae=R?.[I];return Ae?fe<Ae+km*Pm:!1},pe=I=>{const Ae=R?.[I];return Ae?Math.max(0,Math.ceil((Ae+km*Pm-fe)/Pm)):0};function M(I,Ae){const Ee={...I};for(const G of[qn,Gn,Hn,Fn]){if(Ee[G]={...I[G],...Ae?.[G]||{}},G===qn){const X=Ae?.[G]?.hoursPerDay;typeof X=="number"&&!Number.isNaN(X)&&(Ee[G].minutesPerDay=Math.round(X*60))}if(G===Fn){const X=Ae?.[G]?.minutesPerDay??Ae?.[G]?.dailyMin;typeof X=="number"&&!Number.isNaN(X)&&(Ee[G].minutesPerDay=X)}if(G===Hn){const X=Ae?.[G]?.hasTools;typeof X=="boolean"&&!Ae?.[G]?.journalMethod&&(Ee[G].journalMethod=X?"Notebook and pen":"")}}return Ee}function x(I){!m.includes(I)&&m.length>=ea||m.includes(I)&&le(I)||(se(I),re({...T[I]||R0[I]||{}}),$(!0))}function w(){$(!1),se(null),re({})}async function O(){if(!L||!r?.uid)return;const I=m.includes(L),Ae={...T[L]||{},...ae};A(Ee=>({...Ee,[L]:Ae}));try{const Ee=rn(rt,"users",r.uid);if(I)await oi(Ee,{journeys:{params:{[L]:Ae}},updatedAt:xn()},{merge:!0});else{const G=[...m,L],X={...R,[L]:Date.now()};y(G),N(X),await oi(Ee,{journeys:{chosen:G,params:{[L]:Ae},startBy:X,setupDone:G.length>0},updatedAt:xn()},{merge:!0})}}catch(Ee){console.error("Failed to save journey params",Ee)}w()}async function V(I){if(!m.includes(I)||le(I))return;const Ae=m.filter(G=>G!==I),Ee={...R};delete Ee[I],y(Ae),N(Ee);try{await oi(rn(rt,"users",r.uid),{journeys:{chosen:Ae,startBy:Ee},updatedAt:xn()},{merge:!0})}catch(G){console.error("Failed to unselect journey",G)}}if(!r)return E.jsxs(Nt,{className:"p-6 mx-auto max-w-xl text-center",children:[E.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Journeys"}),E.jsx("p",{className:"text-text/70",children:"Please sign in."})]});if(f)return E.jsxs(Nt,{className:"p-6 mx-auto max-w-xl text-center",children:[E.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Journeys"}),E.jsx("p",{className:"text-text/70",children:"Loading…"})]});const k=Math.max(0,ea-m.length);return E.jsxs(Nt,{className:"p-6 mx-auto max-w-2xl",children:[E.jsxs("div",{className:"flex items-center justify-between mb-3",children:[E.jsx(Fe,{variant:"ghost",onClick:()=>e(-1),children:u("back")}),E.jsx("h3",{className:"text-xl font-semibold",children:u("chooseJourneys")})]}),E.jsxs("p",{className:"text-text/70 mb-4",children:[u("pickUpTo")," ",E.jsx("b",{children:ea})," ",u("journeys"),". ",u("eachRunsFor")," ",E.jsxs("b",{children:[km," ",u("days")]}),".",u("whileActiveLocked")," ",k?`${k} ${u("more")}`:u("more")," ",u("nowOrLater"),"."]}),E.jsxs("div",{className:"grid sm:grid-cols-2 gap-3",children:[E.jsx(fh,{title:u("digitalFree"),subtitle:u("digitalFreeSub"),checked:m.includes(qn),locked:le(qn),daysLeft:pe(qn),onOpen:()=>x(qn),onUnselect:()=>V(qn),disabled:!m.includes(qn)&&m.length>=ea}),E.jsx(fh,{title:u("drinkWater"),subtitle:u("drinkWaterSub"),checked:m.includes(Gn),locked:le(Gn),daysLeft:pe(Gn),onOpen:()=>x(Gn),onUnselect:()=>V(Gn),disabled:!m.includes(Gn)&&m.length>=ea}),E.jsx(fh,{title:u("journaling"),subtitle:u("journalingSub"),checked:m.includes(Hn),locked:le(Hn),daysLeft:pe(Hn),onOpen:()=>x(Hn),onUnselect:()=>V(Hn),disabled:!m.includes(Hn)&&m.length>=ea}),E.jsx(fh,{title:u("reading"),subtitle:u("readingSub"),checked:m.includes(Fn),locked:le(Fn),daysLeft:pe(Fn),onOpen:()=>x(Fn),onUnselect:()=>V(Fn),disabled:!m.includes(Fn)&&m.length>=ea})]}),E.jsxs(HD,{open:B,onClose:w,title:SO(L),children:[L&&E.jsx(AO,{keyName:L,draft:ae,setDraft:re}),E.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[E.jsx(Fe,{variant:"ghost",onClick:w,children:"Cancel"}),E.jsx(Fe,{variant:"primary",onClick:O,children:"Save"})]})]})]})}function SO(r){return r===qn?"Digital free time":r===Gn?"Drink water":r===Hn?"Journaling":r===Fn?"Reading":"Goal"}function fh({goal:r,title:e,subtitle:n,checked:s,locked:o,daysLeft:u,disabled:f,onOpen:p}){const{t:m}=an(),y=s?"border-primary bg-primary/10 text-primary":"border-ring hover:bg-muted/40",T=s&&!o,A=m(s?o?"locked":"edit":f?"locked":"setUp"),R=!s&&f||s&&o;return E.jsxs("div",{className:`p-4 rounded-xl border transition cursor-pointer ${y} ${!s&&f?"opacity-50":""}`,onClick:()=>{(!s&&!f||T)&&p()},children:[E.jsx("div",{className:"flex items-start justify-between gap-2",children:E.jsxs("div",{children:[E.jsx("div",{className:"font-medium",children:e}),E.jsx("div",{className:"text-xs text-text/60",children:n})]})}),E.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[E.jsx("span",{className:"text-xs text-text/60",children:s?o?`${m("locked")} • ${u}${m("daysLeft")}`:m("selectedTapToEdit"):m(f?"fullWait":"notSet")}),E.jsx(Fe,{variant:s?"ghost":"primary",onClick:N=>{N.stopPropagation(),(!s&&!f||T)&&p()},disabled:R,children:A})]})]})}function AO({keyName:r,draft:e,setDraft:n}){const s=(f,p)=>n(m=>({...m,[f]:p})),{t:o}=an(),u=E.jsxs("div",{className:"grid gap-3",children:[E.jsxs("div",{children:[E.jsx("label",{className:"field",children:o("whyDo you want to do this?")}),E.jsx("input",{className:"text",value:e.why??"",onChange:f=>s("why",f.target.value),placeholder:o("Your reason or motivation")})]}),E.jsxs("div",{children:[E.jsxs("label",{className:"field",children:[o("When will you work on this goal?")," (approx.)"]}),E.jsx("input",{type:"time",className:"text !w-40",value:e.approxTime??"07:00",onChange:f=>s("approxTime",f.target.value)})]}),r!==Gn?E.jsxs("div",{children:[E.jsx("label",{className:"field",children:o("Target duration (hh:mm)")}),E.jsx("input",{type:"time",step:"60",className:"text !w-28",value:vO(e.minutesPerDay??10),onChange:f=>s("minutesPerDay",EO(f.target.value))})]}):E.jsxs("div",{children:[E.jsx("label",{className:"field",children:o(">Daily target (ml)")}),E.jsx("input",{type:"number",min:"200",step:"50",className:"text !w-28",value:e.dailyTargetMl??2e3,onChange:f=>s("dailyTargetMl",Math.max(100,parseInt(f.target.value||"2000",10)))})]})]});return r===qn?E.jsxs("div",{className:"grid gap-4",children:[u,E.jsxs("div",{children:[E.jsx("label",{className:"field",children:o("What can you do in this time?")}),E.jsx("input",{className:"text",value:e.activitySuggestion??"Nothing",onChange:f=>s("activitySuggestion",f.target.value),placeholder:o("e.g., Nothing, walking, tea, stretching")})]})]}):r===Gn?E.jsxs("div",{className:"grid gap-4",children:[u,E.jsxs("div",{children:[E.jsx("label",{className:"field",children:o("Bottle/cup size (ml)")}),E.jsx("input",{type:"number",min:"50",step:"50",className:"text !w-28",value:e.bottleMl??600,onChange:f=>s("bottleMl",Math.max(50,parseInt(f.target.value||"600",10)))})]})]}):r===Hn?E.jsxs("div",{className:"grid gap-4",children:[u,E.jsxs("div",{children:[E.jsx("label",{className:"field",children:o(">How are you going to journal?")}),E.jsx("input",{className:"text",value:e.journalMethod??"Notebook and pen",onChange:f=>s("journalMethod",f.target.value),placeholder:o("e.g., Notebook and pen")}),E.jsxs("p",{className:"text-xs text-text/60 mt-1",children:[o("suggestion"),":",E.jsx(Fe,{variant:"ghost",size:"sm",className:"underline px-1",onClick:()=>s("journalMethod","Notebook and pen"),children:o("Notebook and pen")})]})]})]}):r===Fn?E.jsxs("div",{className:"grid gap-4",children:[u,E.jsxs("div",{children:[E.jsx("label",{className:"field",children:o("What is the book you will read?")}),E.jsx("input",{className:"text",value:e.bookName??"",onChange:f=>s("bookName",f.target.value),placeholder:o("e.g., Atomic Habits")})]})]}):u}function bO(){const{signIn:r,signUp:e,sendReset:n,startEmailLinkSignIn:s}=Xn(),o=ui(),f=gs().state?.from?.pathname||"/vote",[p,m]=U.useState("signin"),[y,T]=U.useState(""),[A,R]=U.useState(""),[N,B]=U.useState(""),[$,L]=U.useState(""),[se,ae]=U.useState(!1),[re,fe]=U.useState(""),[le,pe]=U.useState("");async function M(O){O.preventDefault(),fe(""),pe(""),ae(!0);try{if(p==="signup"){if(!$.trim())throw new Error("Please enter a username.");if(A.length<6)throw new Error("Password must be at least 6 characters.");if(A!==N)throw new Error("Passwords do not match.");await e({email:y,password:A,displayName:$})}else await r({email:y,password:A});o(f,{replace:!0})}catch(V){fe(V?.message||String(V))}finally{ae(!1)}}async function x(){fe(""),pe("");try{if(!y)throw new Error("Enter your email first.");await n(y),pe("Password reset email sent.")}catch(O){fe(O?.message||String(O))}}async function w(){fe(""),pe("");try{if(!y)throw new Error("Enter your email first.");await s(y),pe("Sign-in link sent. Check your inbox.")}catch(O){fe(O?.message||String(O))}}return E.jsxs("div",{className:"card p-6 max-w-md mx-auto",children:[E.jsx("h1",{className:"text-2xl font-semibold mb-4 text-center",children:p==="signup"?"Create account":"Sign in"}),E.jsxs("form",{className:"grid gap-3",onSubmit:M,children:[p==="signup"&&E.jsxs(E.Fragment,{children:[E.jsx("label",{className:"field",children:"Username"}),E.jsx("input",{className:"text",value:$,onChange:O=>L(O.target.value),required:!0})]}),E.jsx("label",{className:"field",children:"Email"}),E.jsx("input",{className:"text",type:"email",value:y,onChange:O=>T(O.target.value),required:!0}),E.jsx("label",{className:"field",children:"Password"}),E.jsx("input",{className:"text",type:"password",value:A,onChange:O=>R(O.target.value),required:!0}),p==="signup"&&E.jsxs(E.Fragment,{children:[E.jsx("label",{className:"field",children:"Confirm password"}),E.jsx("input",{className:"text",type:"password",value:N,onChange:O=>B(O.target.value),required:!0})]}),E.jsx(Fe,{variant:"primary",className:"mt-2",disabled:se,type:"submit",children:se?p==="signup"?"Creating…":"Signing in…":p==="signup"?"Sign up":"Sign in"})]}),p==="signin"&&E.jsxs("div",{className:"mt-3 flex flex-col gap-2 text-sm text-center",children:[E.jsx(Fe,{variant:"ghost",onClick:x,children:"Forgot password?"}),E.jsx(Fe,{variant:"ghost",onClick:w,children:"Send me a magic sign-in link"})]}),le&&E.jsx("div",{className:"text-green-700 text-sm mt-2",children:le}),re&&E.jsx("div",{className:"text-red-600 text-sm mt-2",children:re}),E.jsx("div",{className:"mt-6 text-sm text-center",children:p==="signup"?E.jsxs(E.Fragment,{children:["Already have an account?"," ",E.jsx(Fe,{variant:"ghost",onClick:()=>m("signin"),children:"Sign in"})]}):E.jsxs(E.Fragment,{children:["New here?"," ",E.jsx(Fe,{variant:"ghost",onClick:()=>m("signup"),children:"Create account"})]})})]})}function $l({children:r}){const{user:e,initializing:n}=Xn();return n?E.jsx("div",{className:"min-h-screen grid place-items-center",children:"Loading…"}):e?r:E.jsx(bh,{to:"/auth",replace:!0})}function x0({children:r}){const{user:e,initializing:n}=Xn();return n?E.jsx("div",{className:"min-h-screen grid place-items-center",children:"Loading…"}):e?E.jsx(bh,{to:"/vote",replace:!0}):r}function wO(){return E.jsx(TA,{children:E.jsxs(r1,{children:[E.jsx(Bn,{path:"/reset",element:E.jsx(x0,{children:E.jsx(gO,{})})}),E.jsx(Bn,{path:"/confirm-reset",element:E.jsx(yO,{})}),E.jsx(Bn,{path:"/complete-email",element:E.jsx(x0,{children:E.jsx(_O,{})})}),E.jsx(Bn,{path:"/auth/*",element:E.jsx(bO,{})}),E.jsx(Bn,{path:"/questions",element:E.jsx($l,{children:E.jsx(Kl,{children:E.jsx(pO,{})})})}),E.jsx(Bn,{path:"/vote",element:E.jsx($l,{children:E.jsx(Kl,{children:E.jsx(lO,{})})})}),E.jsx(Bn,{path:"/journeys",element:E.jsx($l,{children:E.jsx(Kl,{children:E.jsx(TO,{})})})}),E.jsx(Bn,{path:"/profile",element:E.jsx($l,{children:E.jsx(Kl,{children:E.jsx(A0,{})})})}),E.jsx(Bn,{path:"/profile/:uid",element:E.jsx($l,{children:E.jsx(Kl,{children:E.jsx(A0,{},"other")})})}),E.jsx(Bn,{path:"/",element:E.jsx(bh,{to:"/vote",replace:!0})}),E.jsx(Bn,{path:"*",element:E.jsx(bh,{to:"/vote",replace:!0})})]})})}fw.createRoot(document.getElementById("root")).render(E.jsx(C0.StrictMode,{children:E.jsx(TA,{children:E.jsx(BD,{children:E.jsx(dO,{children:E.jsx(f1,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:E.jsx(wO,{})})})})})}));
